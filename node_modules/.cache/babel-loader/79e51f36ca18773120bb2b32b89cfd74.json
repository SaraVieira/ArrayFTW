{"ast":null,"code":"import { FloatNode } from '../inputs/FloatNode.js';\nimport { NodeLib } from '../core/NodeLib.js';\n\nfunction TimerNode(scale, scope, timeScale) {\n  FloatNode.call(this);\n  this.scale = scale !== undefined ? scale : 1;\n  this.scope = scope || TimerNode.GLOBAL;\n  this.timeScale = timeScale !== undefined ? timeScale : scale !== undefined;\n}\n\nTimerNode.GLOBAL = 'global';\nTimerNode.LOCAL = 'local';\nTimerNode.DELTA = 'delta';\nTimerNode.prototype = Object.create(FloatNode.prototype);\nTimerNode.prototype.constructor = TimerNode;\nTimerNode.prototype.nodeType = 'Timer';\n\nTimerNode.prototype.getReadonly = function () {\n  // never use TimerNode as readonly but aways as \"uniform\"\n  return false;\n};\n\nTimerNode.prototype.getUnique = function () {\n  // share TimerNode \"uniform\" input if is used on more time with others TimerNode\n  return this.timeScale && (this.scope === TimerNode.GLOBAL || this.scope === TimerNode.DELTA);\n};\n\nTimerNode.prototype.updateFrame = function (frame) {\n  var scale = this.timeScale ? this.scale : 1;\n\n  switch (this.scope) {\n    case TimerNode.LOCAL:\n      this.value += frame.delta * scale;\n      break;\n\n    case TimerNode.DELTA:\n      this.value = frame.delta * scale;\n      break;\n\n    default:\n      this.value = frame.time * scale;\n  }\n};\n\nTimerNode.prototype.copy = function (source) {\n  FloatNode.prototype.copy.call(this, source);\n  this.scope = source.scope;\n  this.scale = source.scale;\n  this.timeScale = source.timeScale;\n  return this;\n};\n\nTimerNode.prototype.toJSON = function (meta) {\n  var data = FloatNode.prototype.toJSON.call(this, meta);\n  data.scope = this.scope;\n  data.scale = this.scale;\n  data.timeScale = this.timeScale;\n  return data;\n};\n\nNodeLib.addKeyword('time', function () {\n  return new TimerNode();\n});\nexport { TimerNode };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/nodes/utils/TimerNode.js"],"names":["FloatNode","NodeLib","TimerNode","scale","scope","timeScale","call","undefined","GLOBAL","LOCAL","DELTA","prototype","Object","create","constructor","nodeType","getReadonly","getUnique","updateFrame","frame","value","delta","time","copy","source","toJSON","meta","data","addKeyword"],"mappings":"AAAA,SAASA,SAAT,QAA0B,wBAA1B;AACA,SAASC,OAAT,QAAwB,oBAAxB;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0BC,KAA1B,EAAiCC,SAAjC,EAA4C;AAC1CL,EAAAA,SAAS,CAACM,IAAV,CAAe,IAAf;AACA,OAAKH,KAAL,GAAaA,KAAK,KAAKI,SAAV,GAAsBJ,KAAtB,GAA8B,CAA3C;AACA,OAAKC,KAAL,GAAaA,KAAK,IAAIF,SAAS,CAACM,MAAhC;AACA,OAAKH,SAAL,GAAiBA,SAAS,KAAKE,SAAd,GAA0BF,SAA1B,GAAsCF,KAAK,KAAKI,SAAjE;AACD;;AAEDL,SAAS,CAACM,MAAV,GAAmB,QAAnB;AACAN,SAAS,CAACO,KAAV,GAAkB,OAAlB;AACAP,SAAS,CAACQ,KAAV,GAAkB,OAAlB;AACAR,SAAS,CAACS,SAAV,GAAsBC,MAAM,CAACC,MAAP,CAAcb,SAAS,CAACW,SAAxB,CAAtB;AACAT,SAAS,CAACS,SAAV,CAAoBG,WAApB,GAAkCZ,SAAlC;AACAA,SAAS,CAACS,SAAV,CAAoBI,QAApB,GAA+B,OAA/B;;AAEAb,SAAS,CAACS,SAAV,CAAoBK,WAApB,GAAkC,YAAY;AAC5C;AACA,SAAO,KAAP;AACD,CAHD;;AAKAd,SAAS,CAACS,SAAV,CAAoBM,SAApB,GAAgC,YAAY;AAC1C;AACA,SAAO,KAAKZ,SAAL,KAAmB,KAAKD,KAAL,KAAeF,SAAS,CAACM,MAAzB,IAAmC,KAAKJ,KAAL,KAAeF,SAAS,CAACQ,KAA/E,CAAP;AACD,CAHD;;AAKAR,SAAS,CAACS,SAAV,CAAoBO,WAApB,GAAkC,UAAUC,KAAV,EAAiB;AACjD,MAAIhB,KAAK,GAAG,KAAKE,SAAL,GAAiB,KAAKF,KAAtB,GAA8B,CAA1C;;AAEA,UAAQ,KAAKC,KAAb;AACE,SAAKF,SAAS,CAACO,KAAf;AACE,WAAKW,KAAL,IAAcD,KAAK,CAACE,KAAN,GAAclB,KAA5B;AACA;;AAEF,SAAKD,SAAS,CAACQ,KAAf;AACE,WAAKU,KAAL,GAAaD,KAAK,CAACE,KAAN,GAAclB,KAA3B;AACA;;AAEF;AACE,WAAKiB,KAAL,GAAaD,KAAK,CAACG,IAAN,GAAanB,KAA1B;AAVJ;AAYD,CAfD;;AAiBAD,SAAS,CAACS,SAAV,CAAoBY,IAApB,GAA2B,UAAUC,MAAV,EAAkB;AAC3CxB,EAAAA,SAAS,CAACW,SAAV,CAAoBY,IAApB,CAAyBjB,IAAzB,CAA8B,IAA9B,EAAoCkB,MAApC;AACA,OAAKpB,KAAL,GAAaoB,MAAM,CAACpB,KAApB;AACA,OAAKD,KAAL,GAAaqB,MAAM,CAACrB,KAApB;AACA,OAAKE,SAAL,GAAiBmB,MAAM,CAACnB,SAAxB;AACA,SAAO,IAAP;AACD,CAND;;AAQAH,SAAS,CAACS,SAAV,CAAoBc,MAApB,GAA6B,UAAUC,IAAV,EAAgB;AAC3C,MAAIC,IAAI,GAAG3B,SAAS,CAACW,SAAV,CAAoBc,MAApB,CAA2BnB,IAA3B,CAAgC,IAAhC,EAAsCoB,IAAtC,CAAX;AACAC,EAAAA,IAAI,CAACvB,KAAL,GAAa,KAAKA,KAAlB;AACAuB,EAAAA,IAAI,CAACxB,KAAL,GAAa,KAAKA,KAAlB;AACAwB,EAAAA,IAAI,CAACtB,SAAL,GAAiB,KAAKA,SAAtB;AACA,SAAOsB,IAAP;AACD,CAND;;AAQA1B,OAAO,CAAC2B,UAAR,CAAmB,MAAnB,EAA2B,YAAY;AACrC,SAAO,IAAI1B,SAAJ,EAAP;AACD,CAFD;AAIA,SAASA,SAAT","sourcesContent":["import { FloatNode } from '../inputs/FloatNode.js';\nimport { NodeLib } from '../core/NodeLib.js';\n\nfunction TimerNode(scale, scope, timeScale) {\n  FloatNode.call(this);\n  this.scale = scale !== undefined ? scale : 1;\n  this.scope = scope || TimerNode.GLOBAL;\n  this.timeScale = timeScale !== undefined ? timeScale : scale !== undefined;\n}\n\nTimerNode.GLOBAL = 'global';\nTimerNode.LOCAL = 'local';\nTimerNode.DELTA = 'delta';\nTimerNode.prototype = Object.create(FloatNode.prototype);\nTimerNode.prototype.constructor = TimerNode;\nTimerNode.prototype.nodeType = 'Timer';\n\nTimerNode.prototype.getReadonly = function () {\n  // never use TimerNode as readonly but aways as \"uniform\"\n  return false;\n};\n\nTimerNode.prototype.getUnique = function () {\n  // share TimerNode \"uniform\" input if is used on more time with others TimerNode\n  return this.timeScale && (this.scope === TimerNode.GLOBAL || this.scope === TimerNode.DELTA);\n};\n\nTimerNode.prototype.updateFrame = function (frame) {\n  var scale = this.timeScale ? this.scale : 1;\n\n  switch (this.scope) {\n    case TimerNode.LOCAL:\n      this.value += frame.delta * scale;\n      break;\n\n    case TimerNode.DELTA:\n      this.value = frame.delta * scale;\n      break;\n\n    default:\n      this.value = frame.time * scale;\n  }\n};\n\nTimerNode.prototype.copy = function (source) {\n  FloatNode.prototype.copy.call(this, source);\n  this.scope = source.scope;\n  this.scale = source.scale;\n  this.timeScale = source.timeScale;\n  return this;\n};\n\nTimerNode.prototype.toJSON = function (meta) {\n  var data = FloatNode.prototype.toJSON.call(this, meta);\n  data.scope = this.scope;\n  data.scale = this.scale;\n  data.timeScale = this.timeScale;\n  return data;\n};\n\nNodeLib.addKeyword('time', function () {\n  return new TimerNode();\n});\n\nexport { TimerNode };\n"]},"metadata":{},"sourceType":"module"}