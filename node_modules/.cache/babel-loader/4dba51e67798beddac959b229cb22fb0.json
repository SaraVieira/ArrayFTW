{"ast":null,"code":"import { TempNode } from '../core/TempNode.js';\nimport { ConstNode } from '../core/ConstNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\n\nfunction LuminanceNode(rgb) {\n  TempNode.call(this, 'f');\n  this.rgb = rgb;\n}\n\nLuminanceNode.Nodes = function () {\n  var LUMA = new ConstNode('vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )');\n  var luminance = new FunctionNode([// Algorithm from Chapter 10 of Graphics Shaders\n  'float luminance( vec3 rgb ) {', '\treturn dot( rgb, LUMA );', '}'].join('\\n'), [LUMA]);\n  return {\n    LUMA: LUMA,\n    luminance: luminance\n  };\n}();\n\nLuminanceNode.prototype = Object.create(TempNode.prototype);\nLuminanceNode.prototype.constructor = LuminanceNode;\nLuminanceNode.prototype.nodeType = 'Luminance';\n\nLuminanceNode.prototype.generate = function (builder, output) {\n  var luminance = builder.include(LuminanceNode.Nodes.luminance);\n  return builder.format(luminance + '( ' + this.rgb.build(builder, 'v3') + ' )', this.getType(builder), output);\n};\n\nLuminanceNode.prototype.copy = function (source) {\n  TempNode.prototype.copy.call(this, source);\n  this.rgb = source.rgb;\n  return this;\n};\n\nLuminanceNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.rgb = this.rgb.toJSON(meta).uuid;\n  }\n\n  return data;\n};\n\nexport { LuminanceNode };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/nodes/effects/LuminanceNode.js"],"names":["TempNode","ConstNode","FunctionNode","LuminanceNode","rgb","call","Nodes","LUMA","luminance","join","prototype","Object","create","constructor","nodeType","generate","builder","output","include","format","build","getType","copy","source","toJSON","meta","data","getJSONNode","createJSONNode","uuid"],"mappings":"AAAA,SAASA,QAAT,QAAyB,qBAAzB;AACA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAASC,YAAT,QAA6B,yBAA7B;;AAEA,SAASC,aAAT,CAAuBC,GAAvB,EAA4B;AAC1BJ,EAAAA,QAAQ,CAACK,IAAT,CAAc,IAAd,EAAoB,GAApB;AACA,OAAKD,GAAL,GAAWA,GAAX;AACD;;AAEDD,aAAa,CAACG,KAAd,GAAsB,YAAY;AAChC,MAAIC,IAAI,GAAG,IAAIN,SAAJ,CAAc,0CAAd,CAAX;AACA,MAAIO,SAAS,GAAG,IAAIN,YAAJ,CAAiB,CAAC;AAClC,iCADiC,EACA,2BADA,EAC6B,GAD7B,EACkCO,IADlC,CACuC,IADvC,CAAjB,EAC+D,CAACF,IAAD,CAD/D,CAAhB;AAEA,SAAO;AACLA,IAAAA,IAAI,EAAEA,IADD;AAELC,IAAAA,SAAS,EAAEA;AAFN,GAAP;AAID,CARqB,EAAtB;;AAUAL,aAAa,CAACO,SAAd,GAA0BC,MAAM,CAACC,MAAP,CAAcZ,QAAQ,CAACU,SAAvB,CAA1B;AACAP,aAAa,CAACO,SAAd,CAAwBG,WAAxB,GAAsCV,aAAtC;AACAA,aAAa,CAACO,SAAd,CAAwBI,QAAxB,GAAmC,WAAnC;;AAEAX,aAAa,CAACO,SAAd,CAAwBK,QAAxB,GAAmC,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5D,MAAIT,SAAS,GAAGQ,OAAO,CAACE,OAAR,CAAgBf,aAAa,CAACG,KAAd,CAAoBE,SAApC,CAAhB;AACA,SAAOQ,OAAO,CAACG,MAAR,CAAeX,SAAS,GAAG,IAAZ,GAAmB,KAAKJ,GAAL,CAASgB,KAAT,CAAeJ,OAAf,EAAwB,IAAxB,CAAnB,GAAmD,IAAlE,EAAwE,KAAKK,OAAL,CAAaL,OAAb,CAAxE,EAA+FC,MAA/F,CAAP;AACD,CAHD;;AAKAd,aAAa,CAACO,SAAd,CAAwBY,IAAxB,GAA+B,UAAUC,MAAV,EAAkB;AAC/CvB,EAAAA,QAAQ,CAACU,SAAT,CAAmBY,IAAnB,CAAwBjB,IAAxB,CAA6B,IAA7B,EAAmCkB,MAAnC;AACA,OAAKnB,GAAL,GAAWmB,MAAM,CAACnB,GAAlB;AACA,SAAO,IAAP;AACD,CAJD;;AAMAD,aAAa,CAACO,SAAd,CAAwBc,MAAxB,GAAiC,UAAUC,IAAV,EAAgB;AAC/C,MAAIC,IAAI,GAAG,KAAKC,WAAL,CAAiBF,IAAjB,CAAX;;AAEA,MAAI,CAACC,IAAL,EAAW;AACTA,IAAAA,IAAI,GAAG,KAAKE,cAAL,CAAoBH,IAApB,CAAP;AACAC,IAAAA,IAAI,CAACtB,GAAL,GAAW,KAAKA,GAAL,CAASoB,MAAT,CAAgBC,IAAhB,EAAsBI,IAAjC;AACD;;AAED,SAAOH,IAAP;AACD,CATD;;AAWA,SAASvB,aAAT","sourcesContent":["import { TempNode } from '../core/TempNode.js';\nimport { ConstNode } from '../core/ConstNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\n\nfunction LuminanceNode(rgb) {\n  TempNode.call(this, 'f');\n  this.rgb = rgb;\n}\n\nLuminanceNode.Nodes = function () {\n  var LUMA = new ConstNode('vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )');\n  var luminance = new FunctionNode([// Algorithm from Chapter 10 of Graphics Shaders\n  'float luminance( vec3 rgb ) {', '\treturn dot( rgb, LUMA );', '}'].join('\\n'), [LUMA]);\n  return {\n    LUMA: LUMA,\n    luminance: luminance\n  };\n}();\n\nLuminanceNode.prototype = Object.create(TempNode.prototype);\nLuminanceNode.prototype.constructor = LuminanceNode;\nLuminanceNode.prototype.nodeType = 'Luminance';\n\nLuminanceNode.prototype.generate = function (builder, output) {\n  var luminance = builder.include(LuminanceNode.Nodes.luminance);\n  return builder.format(luminance + '( ' + this.rgb.build(builder, 'v3') + ' )', this.getType(builder), output);\n};\n\nLuminanceNode.prototype.copy = function (source) {\n  TempNode.prototype.copy.call(this, source);\n  this.rgb = source.rgb;\n  return this;\n};\n\nLuminanceNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.rgb = this.rgb.toJSON(meta).uuid;\n  }\n\n  return data;\n};\n\nexport { LuminanceNode };\n"]},"metadata":{},"sourceType":"module"}