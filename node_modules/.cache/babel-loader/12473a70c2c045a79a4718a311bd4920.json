{"ast":null,"code":"import _classCallCheck from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { EventDispatcher, Vector3, Spherical, MathUtils } from 'three';\n\nvar FirstPersonControls = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(FirstPersonControls, _EventDispatcher);\n\n  var _super = _createSuper(FirstPersonControls);\n\n  // internals\n  function FirstPersonControls(object, domElement) {\n    var _this;\n\n    _classCallCheck(this, FirstPersonControls);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"object\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"domElement\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"enabled\", true);\n\n    _defineProperty(_assertThisInitialized(_this), \"movementSpeed\", 1.0);\n\n    _defineProperty(_assertThisInitialized(_this), \"lookSpeed\", 0.005);\n\n    _defineProperty(_assertThisInitialized(_this), \"lookVertical\", true);\n\n    _defineProperty(_assertThisInitialized(_this), \"autoForward\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"activeLook\", true);\n\n    _defineProperty(_assertThisInitialized(_this), \"heightSpeed\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"heightCoef\", 1.0);\n\n    _defineProperty(_assertThisInitialized(_this), \"heightMin\", 0.0);\n\n    _defineProperty(_assertThisInitialized(_this), \"heightMax\", 1.0);\n\n    _defineProperty(_assertThisInitialized(_this), \"constrainVertical\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"verticalMin\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"verticalMax\", Math.PI);\n\n    _defineProperty(_assertThisInitialized(_this), \"mouseDragOn\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"autoSpeedFactor\", 0.0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mouseX\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"mouseY\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"moveForward\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"moveBackward\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"moveLeft\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"moveRight\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"moveUp\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"moveDown\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"viewHalfX\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"viewHalfY\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"lat\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"lon\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"lookDirection\", new Vector3());\n\n    _defineProperty(_assertThisInitialized(_this), \"spherical\", new Spherical());\n\n    _defineProperty(_assertThisInitialized(_this), \"target\", new Vector3());\n\n    _defineProperty(_assertThisInitialized(_this), \"dispose\", function () {\n      _this.domElement.removeEventListener('contextmenu', _this.contextmenu);\n\n      _this.domElement.removeEventListener('mousedown', _this.onMouseDown);\n\n      _this.domElement.removeEventListener('mousemove', _this.onMouseMove);\n\n      _this.domElement.removeEventListener('mouseup', _this.onMouseUp);\n\n      window.removeEventListener('keydown', _this.onKeyDown);\n      window.removeEventListener('keyup', _this.onKeyUp);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleResize\", function () {\n      if (_this.domElement instanceof Document) {\n        _this.viewHalfX = window.innerWidth / 2;\n        _this.viewHalfY = window.innerHeight / 2;\n      } else {\n        _this.viewHalfX = _this.domElement.offsetWidth / 2;\n        _this.viewHalfY = _this.domElement.offsetHeight / 2;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseDown\", function (event) {\n      if (_this.domElement instanceof HTMLElement) {\n        _this.domElement.focus();\n      }\n\n      event.preventDefault();\n\n      if (_this.activeLook) {\n        switch (event.button) {\n          case 0:\n            _this.moveForward = true;\n            break;\n\n          case 2:\n            _this.moveBackward = true;\n            break;\n        }\n      }\n\n      _this.mouseDragOn = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseUp\", function (event) {\n      event.preventDefault();\n\n      if (_this.activeLook) {\n        switch (event.button) {\n          case 0:\n            _this.moveForward = false;\n            break;\n\n          case 2:\n            _this.moveBackward = false;\n            break;\n        }\n      }\n\n      _this.mouseDragOn = false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseMove\", function (event) {\n      if (_this.domElement instanceof Document) {\n        _this.mouseX = event.pageX - _this.viewHalfX;\n        _this.mouseY = event.pageY - _this.viewHalfY;\n      } else {\n        _this.mouseX = event.pageX - _this.domElement.offsetLeft - _this.viewHalfX;\n        _this.mouseY = event.pageY - _this.domElement.offsetTop - _this.viewHalfY;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      //event.preventDefault();\n      switch (event.code) {\n        case 'ArrowUp':\n        case 'KeyW':\n          _this.moveForward = true;\n          break;\n\n        case 'ArrowLeft':\n        case 'KeyA':\n          _this.moveLeft = true;\n          break;\n\n        case 'ArrowDown':\n        case 'KeyS':\n          _this.moveBackward = true;\n          break;\n\n        case 'ArrowRight':\n        case 'KeyD':\n          _this.moveRight = true;\n          break;\n\n        case 'KeyR':\n          _this.moveUp = true;\n          break;\n\n        case 'KeyF':\n          _this.moveDown = true;\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyUp\", function (event) {\n      switch (event.code) {\n        case 'ArrowUp':\n        case 'KeyW':\n          _this.moveForward = false;\n          break;\n\n        case 'ArrowLeft':\n        case 'KeyA':\n          _this.moveLeft = false;\n          break;\n\n        case 'ArrowDown':\n        case 'KeyS':\n          _this.moveBackward = false;\n          break;\n\n        case 'ArrowRight':\n        case 'KeyD':\n          _this.moveRight = false;\n          break;\n\n        case 'KeyR':\n          _this.moveUp = false;\n          break;\n\n        case 'KeyF':\n          _this.moveDown = false;\n          break;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"lookAt\", function (x, y, z) {\n      if (x instanceof Vector3) {\n        _this.target.copy(x);\n      } else if (y && z) {\n        _this.target.set(x, y, z);\n      }\n\n      _this.object.lookAt(_this.target);\n\n      _this.setOrientation(_assertThisInitialized(_this));\n\n      return _assertThisInitialized(_this);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"targetPosition\", new Vector3());\n\n    _defineProperty(_assertThisInitialized(_this), \"update\", function (delta) {\n      if (_this.enabled === false) return;\n\n      if (_this.heightSpeed) {\n        var y = MathUtils.clamp(_this.object.position.y, _this.heightMin, _this.heightMax);\n        var heightDelta = y - _this.heightMin;\n        _this.autoSpeedFactor = delta * (heightDelta * _this.heightCoef);\n      } else {\n        _this.autoSpeedFactor = 0.0;\n      }\n\n      var actualMoveSpeed = delta * _this.movementSpeed;\n\n      if (_this.moveForward || _this.autoForward && !_this.moveBackward) {\n        _this.object.translateZ(-(actualMoveSpeed + _this.autoSpeedFactor));\n      }\n\n      if (_this.moveBackward) _this.object.translateZ(actualMoveSpeed);\n      if (_this.moveLeft) _this.object.translateX(-actualMoveSpeed);\n      if (_this.moveRight) _this.object.translateX(actualMoveSpeed);\n      if (_this.moveUp) _this.object.translateY(actualMoveSpeed);\n      if (_this.moveDown) _this.object.translateY(-actualMoveSpeed);\n      var actualLookSpeed = delta * _this.lookSpeed;\n\n      if (!_this.activeLook) {\n        actualLookSpeed = 0;\n      }\n\n      var verticalLookRatio = 1;\n\n      if (_this.constrainVertical) {\n        verticalLookRatio = Math.PI / (_this.verticalMax - _this.verticalMin);\n      }\n\n      _this.lon -= _this.mouseX * actualLookSpeed;\n      if (_this.lookVertical) _this.lat -= _this.mouseY * actualLookSpeed * verticalLookRatio;\n      _this.lat = Math.max(-85, Math.min(85, _this.lat));\n      var phi = MathUtils.degToRad(90 - _this.lat);\n      var theta = MathUtils.degToRad(_this.lon);\n\n      if (_this.constrainVertical) {\n        phi = MathUtils.mapLinear(phi, 0, Math.PI, _this.verticalMin, _this.verticalMax);\n      }\n\n      var position = _this.object.position;\n\n      _this.targetPosition.setFromSphericalCoords(1, phi, theta).add(position);\n\n      _this.object.lookAt(_this.targetPosition);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"contextmenu\", function (event) {\n      return event.preventDefault();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setOrientation\", function (controls) {\n      var quaternion = controls.object.quaternion;\n\n      _this.lookDirection.set(0, 0, -1).applyQuaternion(quaternion);\n\n      _this.spherical.setFromVector3(_this.lookDirection);\n\n      _this.lat = 90 - MathUtils.radToDeg(_this.spherical.phi);\n      _this.lon = MathUtils.radToDeg(_this.spherical.theta);\n    });\n\n    if (domElement === undefined) {\n      console.warn('THREE.FirstPersonControls: The second parameter \"domElement\" is now mandatory.');\n      domElement = document;\n    }\n\n    _this.object = object;\n    _this.domElement = domElement;\n\n    if (_this.domElement instanceof HTMLElement) {\n      _this.domElement.setAttribute('tabindex', '-1');\n    }\n\n    _this.handleResize();\n\n    _this.setOrientation(_assertThisInitialized(_this));\n\n    _this.domElement.addEventListener('contextmenu', _this.contextmenu);\n\n    _this.domElement.addEventListener('mousemove', _this.onMouseMove);\n\n    _this.domElement.addEventListener('mousedown', _this.onMouseDown);\n\n    _this.domElement.addEventListener('mouseup', _this.onMouseUp);\n\n    window.addEventListener('keydown', _this.onKeyDown);\n    window.addEventListener('keyup', _this.onKeyUp);\n    return _this;\n  }\n\n  return FirstPersonControls;\n}(EventDispatcher);\n\nexport { FirstPersonControls };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/controls/FirstPersonControls.js"],"names":["_defineProperty","EventDispatcher","Vector3","Spherical","MathUtils","FirstPersonControls","object","domElement","Math","PI","removeEventListener","contextmenu","onMouseDown","onMouseMove","onMouseUp","window","onKeyDown","onKeyUp","Document","viewHalfX","innerWidth","viewHalfY","innerHeight","offsetWidth","offsetHeight","event","HTMLElement","focus","preventDefault","activeLook","button","moveForward","moveBackward","mouseDragOn","mouseX","pageX","mouseY","pageY","offsetLeft","offsetTop","code","moveLeft","moveRight","moveUp","moveDown","x","y","z","target","copy","set","lookAt","setOrientation","delta","enabled","heightSpeed","clamp","position","heightMin","heightMax","heightDelta","autoSpeedFactor","heightCoef","actualMoveSpeed","movementSpeed","autoForward","translateZ","translateX","translateY","actualLookSpeed","lookSpeed","verticalLookRatio","constrainVertical","verticalMax","verticalMin","lon","lookVertical","lat","max","min","phi","degToRad","theta","mapLinear","targetPosition","setFromSphericalCoords","add","controls","quaternion","lookDirection","applyQuaternion","spherical","setFromVector3","radToDeg","undefined","console","warn","document","setAttribute","handleResize","addEventListener"],"mappings":"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","sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { EventDispatcher, Vector3, Spherical, MathUtils } from 'three';\n\nclass FirstPersonControls extends EventDispatcher {\n  // internals\n  constructor(object, domElement) {\n    super();\n\n    _defineProperty(this, \"object\", void 0);\n\n    _defineProperty(this, \"domElement\", void 0);\n\n    _defineProperty(this, \"enabled\", true);\n\n    _defineProperty(this, \"movementSpeed\", 1.0);\n\n    _defineProperty(this, \"lookSpeed\", 0.005);\n\n    _defineProperty(this, \"lookVertical\", true);\n\n    _defineProperty(this, \"autoForward\", false);\n\n    _defineProperty(this, \"activeLook\", true);\n\n    _defineProperty(this, \"heightSpeed\", false);\n\n    _defineProperty(this, \"heightCoef\", 1.0);\n\n    _defineProperty(this, \"heightMin\", 0.0);\n\n    _defineProperty(this, \"heightMax\", 1.0);\n\n    _defineProperty(this, \"constrainVertical\", false);\n\n    _defineProperty(this, \"verticalMin\", 0);\n\n    _defineProperty(this, \"verticalMax\", Math.PI);\n\n    _defineProperty(this, \"mouseDragOn\", false);\n\n    _defineProperty(this, \"autoSpeedFactor\", 0.0);\n\n    _defineProperty(this, \"mouseX\", 0);\n\n    _defineProperty(this, \"mouseY\", 0);\n\n    _defineProperty(this, \"moveForward\", false);\n\n    _defineProperty(this, \"moveBackward\", false);\n\n    _defineProperty(this, \"moveLeft\", false);\n\n    _defineProperty(this, \"moveRight\", false);\n\n    _defineProperty(this, \"moveUp\", false);\n\n    _defineProperty(this, \"moveDown\", false);\n\n    _defineProperty(this, \"viewHalfX\", 0);\n\n    _defineProperty(this, \"viewHalfY\", 0);\n\n    _defineProperty(this, \"lat\", 0);\n\n    _defineProperty(this, \"lon\", 0);\n\n    _defineProperty(this, \"lookDirection\", new Vector3());\n\n    _defineProperty(this, \"spherical\", new Spherical());\n\n    _defineProperty(this, \"target\", new Vector3());\n\n    _defineProperty(this, \"dispose\", () => {\n      this.domElement.removeEventListener('contextmenu', this.contextmenu);\n      this.domElement.removeEventListener('mousedown', this.onMouseDown);\n      this.domElement.removeEventListener('mousemove', this.onMouseMove);\n      this.domElement.removeEventListener('mouseup', this.onMouseUp);\n      window.removeEventListener('keydown', this.onKeyDown);\n      window.removeEventListener('keyup', this.onKeyUp);\n    });\n\n    _defineProperty(this, \"handleResize\", () => {\n      if (this.domElement instanceof Document) {\n        this.viewHalfX = window.innerWidth / 2;\n        this.viewHalfY = window.innerHeight / 2;\n      } else {\n        this.viewHalfX = this.domElement.offsetWidth / 2;\n        this.viewHalfY = this.domElement.offsetHeight / 2;\n      }\n    });\n\n    _defineProperty(this, \"onMouseDown\", event => {\n      if (this.domElement instanceof HTMLElement) {\n        this.domElement.focus();\n      }\n\n      event.preventDefault();\n\n      if (this.activeLook) {\n        switch (event.button) {\n          case 0:\n            this.moveForward = true;\n            break;\n\n          case 2:\n            this.moveBackward = true;\n            break;\n        }\n      }\n\n      this.mouseDragOn = true;\n    });\n\n    _defineProperty(this, \"onMouseUp\", event => {\n      event.preventDefault();\n\n      if (this.activeLook) {\n        switch (event.button) {\n          case 0:\n            this.moveForward = false;\n            break;\n\n          case 2:\n            this.moveBackward = false;\n            break;\n        }\n      }\n\n      this.mouseDragOn = false;\n    });\n\n    _defineProperty(this, \"onMouseMove\", event => {\n      if (this.domElement instanceof Document) {\n        this.mouseX = event.pageX - this.viewHalfX;\n        this.mouseY = event.pageY - this.viewHalfY;\n      } else {\n        this.mouseX = event.pageX - this.domElement.offsetLeft - this.viewHalfX;\n        this.mouseY = event.pageY - this.domElement.offsetTop - this.viewHalfY;\n      }\n    });\n\n    _defineProperty(this, \"onKeyDown\", event => {\n      //event.preventDefault();\n      switch (event.code) {\n        case 'ArrowUp':\n        case 'KeyW':\n          this.moveForward = true;\n          break;\n\n        case 'ArrowLeft':\n        case 'KeyA':\n          this.moveLeft = true;\n          break;\n\n        case 'ArrowDown':\n        case 'KeyS':\n          this.moveBackward = true;\n          break;\n\n        case 'ArrowRight':\n        case 'KeyD':\n          this.moveRight = true;\n          break;\n\n        case 'KeyR':\n          this.moveUp = true;\n          break;\n\n        case 'KeyF':\n          this.moveDown = true;\n          break;\n      }\n    });\n\n    _defineProperty(this, \"onKeyUp\", event => {\n      switch (event.code) {\n        case 'ArrowUp':\n        case 'KeyW':\n          this.moveForward = false;\n          break;\n\n        case 'ArrowLeft':\n        case 'KeyA':\n          this.moveLeft = false;\n          break;\n\n        case 'ArrowDown':\n        case 'KeyS':\n          this.moveBackward = false;\n          break;\n\n        case 'ArrowRight':\n        case 'KeyD':\n          this.moveRight = false;\n          break;\n\n        case 'KeyR':\n          this.moveUp = false;\n          break;\n\n        case 'KeyF':\n          this.moveDown = false;\n          break;\n      }\n    });\n\n    _defineProperty(this, \"lookAt\", (x, y, z) => {\n      if (x instanceof Vector3) {\n        this.target.copy(x);\n      } else if (y && z) {\n        this.target.set(x, y, z);\n      }\n\n      this.object.lookAt(this.target);\n      this.setOrientation(this);\n      return this;\n    });\n\n    _defineProperty(this, \"targetPosition\", new Vector3());\n\n    _defineProperty(this, \"update\", delta => {\n      if (this.enabled === false) return;\n\n      if (this.heightSpeed) {\n        const y = MathUtils.clamp(this.object.position.y, this.heightMin, this.heightMax);\n        const heightDelta = y - this.heightMin;\n        this.autoSpeedFactor = delta * (heightDelta * this.heightCoef);\n      } else {\n        this.autoSpeedFactor = 0.0;\n      }\n\n      const actualMoveSpeed = delta * this.movementSpeed;\n\n      if (this.moveForward || this.autoForward && !this.moveBackward) {\n        this.object.translateZ(-(actualMoveSpeed + this.autoSpeedFactor));\n      }\n\n      if (this.moveBackward) this.object.translateZ(actualMoveSpeed);\n      if (this.moveLeft) this.object.translateX(-actualMoveSpeed);\n      if (this.moveRight) this.object.translateX(actualMoveSpeed);\n      if (this.moveUp) this.object.translateY(actualMoveSpeed);\n      if (this.moveDown) this.object.translateY(-actualMoveSpeed);\n      let actualLookSpeed = delta * this.lookSpeed;\n\n      if (!this.activeLook) {\n        actualLookSpeed = 0;\n      }\n\n      let verticalLookRatio = 1;\n\n      if (this.constrainVertical) {\n        verticalLookRatio = Math.PI / (this.verticalMax - this.verticalMin);\n      }\n\n      this.lon -= this.mouseX * actualLookSpeed;\n      if (this.lookVertical) this.lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\n      this.lat = Math.max(-85, Math.min(85, this.lat));\n      let phi = MathUtils.degToRad(90 - this.lat);\n      const theta = MathUtils.degToRad(this.lon);\n\n      if (this.constrainVertical) {\n        phi = MathUtils.mapLinear(phi, 0, Math.PI, this.verticalMin, this.verticalMax);\n      }\n\n      const position = this.object.position;\n      this.targetPosition.setFromSphericalCoords(1, phi, theta).add(position);\n      this.object.lookAt(this.targetPosition);\n    });\n\n    _defineProperty(this, \"contextmenu\", event => event.preventDefault());\n\n    _defineProperty(this, \"setOrientation\", controls => {\n      const quaternion = controls.object.quaternion;\n      this.lookDirection.set(0, 0, -1).applyQuaternion(quaternion);\n      this.spherical.setFromVector3(this.lookDirection);\n      this.lat = 90 - MathUtils.radToDeg(this.spherical.phi);\n      this.lon = MathUtils.radToDeg(this.spherical.theta);\n    });\n\n    if (domElement === undefined) {\n      console.warn('THREE.FirstPersonControls: The second parameter \"domElement\" is now mandatory.');\n      domElement = document;\n    }\n\n    this.object = object;\n    this.domElement = domElement;\n\n    if (this.domElement instanceof HTMLElement) {\n      this.domElement.setAttribute('tabindex', '-1');\n    }\n\n    this.handleResize();\n    this.setOrientation(this);\n    this.domElement.addEventListener('contextmenu', this.contextmenu);\n    this.domElement.addEventListener('mousemove', this.onMouseMove);\n    this.domElement.addEventListener('mousedown', this.onMouseDown);\n    this.domElement.addEventListener('mouseup', this.onMouseUp);\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n  }\n\n}\n\nexport { FirstPersonControls };\n"]},"metadata":{},"sourceType":"module"}