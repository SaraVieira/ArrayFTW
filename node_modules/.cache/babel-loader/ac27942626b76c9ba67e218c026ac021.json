{"ast":null,"code":"import { PerspectiveCamera, Vector3, Quaternion } from 'three';\n/**\n * peppers ghost effect based on http://www.instructables.com/id/Reflective-Prism/?ALLSTEPS\n */\n\nvar PeppersGhostEffect = function PeppersGhostEffect(renderer) {\n  var scope = this;\n  scope.cameraDistance = 15;\n  scope.reflectFromAbove = false; // Internals\n\n  var _halfWidth, _width, _height;\n\n  var _cameraF = new PerspectiveCamera(); //front\n\n\n  var _cameraB = new PerspectiveCamera(); //back\n\n\n  var _cameraL = new PerspectiveCamera(); //left\n\n\n  var _cameraR = new PerspectiveCamera(); //right\n\n\n  var _position = new Vector3();\n\n  var _quaternion = new Quaternion();\n\n  var _scale = new Vector3(); // Initialization\n\n\n  renderer.autoClear = false;\n\n  this.setSize = function (width, height) {\n    _halfWidth = width / 2;\n\n    if (width < height) {\n      _width = width / 3;\n      _height = width / 3;\n    } else {\n      _width = height / 3;\n      _height = height / 3;\n    }\n\n    renderer.setSize(width, height);\n  };\n\n  this.render = function (scene, camera) {\n    scene.updateMatrixWorld();\n    if (camera.parent === null) camera.updateMatrixWorld();\n    camera.matrixWorld.decompose(_position, _quaternion, _scale); // front\n\n    _cameraF.position.copy(_position);\n\n    _cameraF.quaternion.copy(_quaternion);\n\n    _cameraF.translateZ(scope.cameraDistance);\n\n    _cameraF.lookAt(scene.position); // back\n\n\n    _cameraB.position.copy(_position);\n\n    _cameraB.quaternion.copy(_quaternion);\n\n    _cameraB.translateZ(-scope.cameraDistance);\n\n    _cameraB.lookAt(scene.position);\n\n    _cameraB.rotation.z += 180 * (Math.PI / 180); // left\n\n    _cameraL.position.copy(_position);\n\n    _cameraL.quaternion.copy(_quaternion);\n\n    _cameraL.translateX(-scope.cameraDistance);\n\n    _cameraL.lookAt(scene.position);\n\n    _cameraL.rotation.x += 90 * (Math.PI / 180); // right\n\n    _cameraR.position.copy(_position);\n\n    _cameraR.quaternion.copy(_quaternion);\n\n    _cameraR.translateX(scope.cameraDistance);\n\n    _cameraR.lookAt(scene.position);\n\n    _cameraR.rotation.x += 90 * (Math.PI / 180);\n    renderer.clear();\n    renderer.setScissorTest(true);\n    renderer.setScissor(_halfWidth - _width / 2, _height * 2, _width, _height);\n    renderer.setViewport(_halfWidth - _width / 2, _height * 2, _width, _height);\n\n    if (scope.reflectFromAbove) {\n      renderer.render(scene, _cameraB);\n    } else {\n      renderer.render(scene, _cameraF);\n    }\n\n    renderer.setScissor(_halfWidth - _width / 2, 0, _width, _height);\n    renderer.setViewport(_halfWidth - _width / 2, 0, _width, _height);\n\n    if (scope.reflectFromAbove) {\n      renderer.render(scene, _cameraF);\n    } else {\n      renderer.render(scene, _cameraB);\n    }\n\n    renderer.setScissor(_halfWidth - _width / 2 - _width, _height, _width, _height);\n    renderer.setViewport(_halfWidth - _width / 2 - _width, _height, _width, _height);\n\n    if (scope.reflectFromAbove) {\n      renderer.render(scene, _cameraR);\n    } else {\n      renderer.render(scene, _cameraL);\n    }\n\n    renderer.setScissor(_halfWidth + _width / 2, _height, _width, _height);\n    renderer.setViewport(_halfWidth + _width / 2, _height, _width, _height);\n\n    if (scope.reflectFromAbove) {\n      renderer.render(scene, _cameraL);\n    } else {\n      renderer.render(scene, _cameraR);\n    }\n\n    renderer.setScissorTest(false);\n  };\n};\n\nexport { PeppersGhostEffect };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/effects/PeppersGhostEffect.js"],"names":["PerspectiveCamera","Vector3","Quaternion","PeppersGhostEffect","renderer","scope","cameraDistance","reflectFromAbove","_halfWidth","_width","_height","_cameraF","_cameraB","_cameraL","_cameraR","_position","_quaternion","_scale","autoClear","setSize","width","height","render","scene","camera","updateMatrixWorld","parent","matrixWorld","decompose","position","copy","quaternion","translateZ","lookAt","rotation","z","Math","PI","translateX","x","clear","setScissorTest","setScissor","setViewport"],"mappings":"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","sourcesContent":["import { PerspectiveCamera, Vector3, Quaternion } from 'three';\n\n/**\n * peppers ghost effect based on http://www.instructables.com/id/Reflective-Prism/?ALLSTEPS\n */\n\nconst PeppersGhostEffect = function (renderer) {\n  const scope = this;\n  scope.cameraDistance = 15;\n  scope.reflectFromAbove = false; // Internals\n\n  let _halfWidth, _width, _height;\n\n  const _cameraF = new PerspectiveCamera(); //front\n\n\n  const _cameraB = new PerspectiveCamera(); //back\n\n\n  const _cameraL = new PerspectiveCamera(); //left\n\n\n  const _cameraR = new PerspectiveCamera(); //right\n\n\n  const _position = new Vector3();\n\n  const _quaternion = new Quaternion();\n\n  const _scale = new Vector3(); // Initialization\n\n\n  renderer.autoClear = false;\n\n  this.setSize = (width, height) => {\n    _halfWidth = width / 2;\n\n    if (width < height) {\n      _width = width / 3;\n      _height = width / 3;\n    } else {\n      _width = height / 3;\n      _height = height / 3;\n    }\n\n    renderer.setSize(width, height);\n  };\n\n  this.render = (scene, camera) => {\n    scene.updateMatrixWorld();\n    if (camera.parent === null) camera.updateMatrixWorld();\n    camera.matrixWorld.decompose(_position, _quaternion, _scale); // front\n\n    _cameraF.position.copy(_position);\n\n    _cameraF.quaternion.copy(_quaternion);\n\n    _cameraF.translateZ(scope.cameraDistance);\n\n    _cameraF.lookAt(scene.position); // back\n\n\n    _cameraB.position.copy(_position);\n\n    _cameraB.quaternion.copy(_quaternion);\n\n    _cameraB.translateZ(-scope.cameraDistance);\n\n    _cameraB.lookAt(scene.position);\n\n    _cameraB.rotation.z += 180 * (Math.PI / 180); // left\n\n    _cameraL.position.copy(_position);\n\n    _cameraL.quaternion.copy(_quaternion);\n\n    _cameraL.translateX(-scope.cameraDistance);\n\n    _cameraL.lookAt(scene.position);\n\n    _cameraL.rotation.x += 90 * (Math.PI / 180); // right\n\n    _cameraR.position.copy(_position);\n\n    _cameraR.quaternion.copy(_quaternion);\n\n    _cameraR.translateX(scope.cameraDistance);\n\n    _cameraR.lookAt(scene.position);\n\n    _cameraR.rotation.x += 90 * (Math.PI / 180);\n    renderer.clear();\n    renderer.setScissorTest(true);\n    renderer.setScissor(_halfWidth - _width / 2, _height * 2, _width, _height);\n    renderer.setViewport(_halfWidth - _width / 2, _height * 2, _width, _height);\n\n    if (scope.reflectFromAbove) {\n      renderer.render(scene, _cameraB);\n    } else {\n      renderer.render(scene, _cameraF);\n    }\n\n    renderer.setScissor(_halfWidth - _width / 2, 0, _width, _height);\n    renderer.setViewport(_halfWidth - _width / 2, 0, _width, _height);\n\n    if (scope.reflectFromAbove) {\n      renderer.render(scene, _cameraF);\n    } else {\n      renderer.render(scene, _cameraB);\n    }\n\n    renderer.setScissor(_halfWidth - _width / 2 - _width, _height, _width, _height);\n    renderer.setViewport(_halfWidth - _width / 2 - _width, _height, _width, _height);\n\n    if (scope.reflectFromAbove) {\n      renderer.render(scene, _cameraR);\n    } else {\n      renderer.render(scene, _cameraL);\n    }\n\n    renderer.setScissor(_halfWidth + _width / 2, _height, _width, _height);\n    renderer.setViewport(_halfWidth + _width / 2, _height, _width, _height);\n\n    if (scope.reflectFromAbove) {\n      renderer.render(scene, _cameraL);\n    } else {\n      renderer.render(scene, _cameraR);\n    }\n\n    renderer.setScissorTest(false);\n  };\n};\n\nexport { PeppersGhostEffect };\n"]},"metadata":{},"sourceType":"module"}