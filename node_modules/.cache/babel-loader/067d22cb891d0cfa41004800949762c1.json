{"ast":null,"code":"import { Node } from './Node.js';\n\nfunction VarNode(type, value) {\n  Node.call(this, type);\n  this.value = value;\n}\n\nVarNode.prototype = Object.create(Node.prototype);\nVarNode.prototype.constructor = VarNode;\nVarNode.prototype.nodeType = 'Var';\n\nVarNode.prototype.getType = function (builder) {\n  return builder.getTypeByFormat(this.type);\n};\n\nVarNode.prototype.generate = function (builder, output) {\n  var varying = builder.getVar(this.uuid, this.type);\n\n  if (this.value && builder.isShader('vertex')) {\n    builder.addNodeCode(varying.name + ' = ' + this.value.build(builder, this.getType(builder)) + ';');\n  }\n\n  return builder.format(varying.name, this.getType(builder), output);\n};\n\nVarNode.prototype.copy = function (source) {\n  Node.prototype.copy.call(this, source);\n  this.type = source.type;\n  this.value = source.value;\n  return this;\n};\n\nVarNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.type = this.type;\n    if (this.value) data.value = this.value.toJSON(meta).uuid;\n  }\n\n  return data;\n};\n\nexport { VarNode };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/nodes/core/VarNode.js"],"names":["Node","VarNode","type","value","call","prototype","Object","create","constructor","nodeType","getType","builder","getTypeByFormat","generate","output","varying","getVar","uuid","isShader","addNodeCode","name","build","format","copy","source","toJSON","meta","data","getJSONNode","createJSONNode"],"mappings":"AAAA,SAASA,IAAT,QAAqB,WAArB;;AAEA,SAASC,OAAT,CAAiBC,IAAjB,EAAuBC,KAAvB,EAA8B;AAC5BH,EAAAA,IAAI,CAACI,IAAL,CAAU,IAAV,EAAgBF,IAAhB;AACA,OAAKC,KAAL,GAAaA,KAAb;AACD;;AAEDF,OAAO,CAACI,SAAR,GAAoBC,MAAM,CAACC,MAAP,CAAcP,IAAI,CAACK,SAAnB,CAApB;AACAJ,OAAO,CAACI,SAAR,CAAkBG,WAAlB,GAAgCP,OAAhC;AACAA,OAAO,CAACI,SAAR,CAAkBI,QAAlB,GAA6B,KAA7B;;AAEAR,OAAO,CAACI,SAAR,CAAkBK,OAAlB,GAA4B,UAAUC,OAAV,EAAmB;AAC7C,SAAOA,OAAO,CAACC,eAAR,CAAwB,KAAKV,IAA7B,CAAP;AACD,CAFD;;AAIAD,OAAO,CAACI,SAAR,CAAkBQ,QAAlB,GAA6B,UAAUF,OAAV,EAAmBG,MAAnB,EAA2B;AACtD,MAAIC,OAAO,GAAGJ,OAAO,CAACK,MAAR,CAAe,KAAKC,IAApB,EAA0B,KAAKf,IAA/B,CAAd;;AAEA,MAAI,KAAKC,KAAL,IAAcQ,OAAO,CAACO,QAAR,CAAiB,QAAjB,CAAlB,EAA8C;AAC5CP,IAAAA,OAAO,CAACQ,WAAR,CAAoBJ,OAAO,CAACK,IAAR,GAAe,KAAf,GAAuB,KAAKjB,KAAL,CAAWkB,KAAX,CAAiBV,OAAjB,EAA0B,KAAKD,OAAL,CAAaC,OAAb,CAA1B,CAAvB,GAA0E,GAA9F;AACD;;AAED,SAAOA,OAAO,CAACW,MAAR,CAAeP,OAAO,CAACK,IAAvB,EAA6B,KAAKV,OAAL,CAAaC,OAAb,CAA7B,EAAoDG,MAApD,CAAP;AACD,CARD;;AAUAb,OAAO,CAACI,SAAR,CAAkBkB,IAAlB,GAAyB,UAAUC,MAAV,EAAkB;AACzCxB,EAAAA,IAAI,CAACK,SAAL,CAAekB,IAAf,CAAoBnB,IAApB,CAAyB,IAAzB,EAA+BoB,MAA/B;AACA,OAAKtB,IAAL,GAAYsB,MAAM,CAACtB,IAAnB;AACA,OAAKC,KAAL,GAAaqB,MAAM,CAACrB,KAApB;AACA,SAAO,IAAP;AACD,CALD;;AAOAF,OAAO,CAACI,SAAR,CAAkBoB,MAAlB,GAA2B,UAAUC,IAAV,EAAgB;AACzC,MAAIC,IAAI,GAAG,KAAKC,WAAL,CAAiBF,IAAjB,CAAX;;AAEA,MAAI,CAACC,IAAL,EAAW;AACTA,IAAAA,IAAI,GAAG,KAAKE,cAAL,CAAoBH,IAApB,CAAP;AACAC,IAAAA,IAAI,CAACzB,IAAL,GAAY,KAAKA,IAAjB;AACA,QAAI,KAAKC,KAAT,EAAgBwB,IAAI,CAACxB,KAAL,GAAa,KAAKA,KAAL,CAAWsB,MAAX,CAAkBC,IAAlB,EAAwBT,IAArC;AACjB;;AAED,SAAOU,IAAP;AACD,CAVD;;AAYA,SAAS1B,OAAT","sourcesContent":["import { Node } from './Node.js';\n\nfunction VarNode(type, value) {\n  Node.call(this, type);\n  this.value = value;\n}\n\nVarNode.prototype = Object.create(Node.prototype);\nVarNode.prototype.constructor = VarNode;\nVarNode.prototype.nodeType = 'Var';\n\nVarNode.prototype.getType = function (builder) {\n  return builder.getTypeByFormat(this.type);\n};\n\nVarNode.prototype.generate = function (builder, output) {\n  var varying = builder.getVar(this.uuid, this.type);\n\n  if (this.value && builder.isShader('vertex')) {\n    builder.addNodeCode(varying.name + ' = ' + this.value.build(builder, this.getType(builder)) + ';');\n  }\n\n  return builder.format(varying.name, this.getType(builder), output);\n};\n\nVarNode.prototype.copy = function (source) {\n  Node.prototype.copy.call(this, source);\n  this.type = source.type;\n  this.value = source.value;\n  return this;\n};\n\nVarNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.type = this.type;\n    if (this.value) data.value = this.value.toJSON(meta).uuid;\n  }\n\n  return data;\n};\n\nexport { VarNode };\n"]},"metadata":{},"sourceType":"module"}