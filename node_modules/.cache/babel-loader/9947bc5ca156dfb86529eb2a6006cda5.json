{"ast":null,"code":"import { Node } from '../core/Node.js';\n\nfunction SwitchNode(node, components) {\n  Node.call(this);\n  this.node = node;\n  this.components = components || 'x';\n}\n\nSwitchNode.prototype = Object.create(Node.prototype);\nSwitchNode.prototype.constructor = SwitchNode;\nSwitchNode.prototype.nodeType = 'Switch';\n\nSwitchNode.prototype.getType = function (builder) {\n  return builder.getTypeFromLength(this.components.length);\n};\n\nSwitchNode.prototype.generate = function (builder, output) {\n  var type = this.node.getType(builder),\n      node = this.node.build(builder, type),\n      inputLength = builder.getTypeLength(type) - 1;\n\n  if (inputLength > 0) {\n    // get max length\n    var outputLength = 0,\n        components = builder.colorToVectorProperties(this.components);\n    var i,\n        len = components.length;\n\n    for (i = 0; i < len; i++) {\n      outputLength = Math.max(outputLength, builder.getIndexByElement(components.charAt(i)));\n    }\n\n    if (outputLength > inputLength) outputLength = inputLength; // split\n\n    node += '.';\n\n    for (i = 0; i < len; i++) {\n      var idx = builder.getIndexByElement(components.charAt(i));\n      if (idx > outputLength) idx = outputLength;\n      node += builder.getElementByIndex(idx);\n    }\n\n    return builder.format(node, this.getType(builder), output);\n  } else {\n    // join\n    return builder.format(node, type, output);\n  }\n};\n\nSwitchNode.prototype.copy = function (source) {\n  Node.prototype.copy.call(this, source);\n  this.node = source.node;\n  this.components = source.components;\n  return this;\n};\n\nSwitchNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.node = this.node.toJSON(meta).uuid;\n    data.components = this.components;\n  }\n\n  return data;\n};\n\nexport { SwitchNode };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/nodes/utils/SwitchNode.js"],"names":["Node","SwitchNode","node","components","call","prototype","Object","create","constructor","nodeType","getType","builder","getTypeFromLength","length","generate","output","type","build","inputLength","getTypeLength","outputLength","colorToVectorProperties","i","len","Math","max","getIndexByElement","charAt","idx","getElementByIndex","format","copy","source","toJSON","meta","data","getJSONNode","createJSONNode","uuid"],"mappings":"AAAA,SAASA,IAAT,QAAqB,iBAArB;;AAEA,SAASC,UAAT,CAAoBC,IAApB,EAA0BC,UAA1B,EAAsC;AACpCH,EAAAA,IAAI,CAACI,IAAL,CAAU,IAAV;AACA,OAAKF,IAAL,GAAYA,IAAZ;AACA,OAAKC,UAAL,GAAkBA,UAAU,IAAI,GAAhC;AACD;;AAEDF,UAAU,CAACI,SAAX,GAAuBC,MAAM,CAACC,MAAP,CAAcP,IAAI,CAACK,SAAnB,CAAvB;AACAJ,UAAU,CAACI,SAAX,CAAqBG,WAArB,GAAmCP,UAAnC;AACAA,UAAU,CAACI,SAAX,CAAqBI,QAArB,GAAgC,QAAhC;;AAEAR,UAAU,CAACI,SAAX,CAAqBK,OAArB,GAA+B,UAAUC,OAAV,EAAmB;AAChD,SAAOA,OAAO,CAACC,iBAAR,CAA0B,KAAKT,UAAL,CAAgBU,MAA1C,CAAP;AACD,CAFD;;AAIAZ,UAAU,CAACI,SAAX,CAAqBS,QAArB,GAAgC,UAAUH,OAAV,EAAmBI,MAAnB,EAA2B;AACzD,MAAIC,IAAI,GAAG,KAAKd,IAAL,CAAUQ,OAAV,CAAkBC,OAAlB,CAAX;AAAA,MACIT,IAAI,GAAG,KAAKA,IAAL,CAAUe,KAAV,CAAgBN,OAAhB,EAAyBK,IAAzB,CADX;AAAA,MAEIE,WAAW,GAAGP,OAAO,CAACQ,aAAR,CAAsBH,IAAtB,IAA8B,CAFhD;;AAIA,MAAIE,WAAW,GAAG,CAAlB,EAAqB;AACnB;AACA,QAAIE,YAAY,GAAG,CAAnB;AAAA,QACIjB,UAAU,GAAGQ,OAAO,CAACU,uBAAR,CAAgC,KAAKlB,UAArC,CADjB;AAEA,QAAImB,CAAJ;AAAA,QACIC,GAAG,GAAGpB,UAAU,CAACU,MADrB;;AAGA,SAAKS,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,GAAhB,EAAqBD,CAAC,EAAtB,EAA0B;AACxBF,MAAAA,YAAY,GAAGI,IAAI,CAACC,GAAL,CAASL,YAAT,EAAuBT,OAAO,CAACe,iBAAR,CAA0BvB,UAAU,CAACwB,MAAX,CAAkBL,CAAlB,CAA1B,CAAvB,CAAf;AACD;;AAED,QAAIF,YAAY,GAAGF,WAAnB,EAAgCE,YAAY,GAAGF,WAAf,CAXb,CAWyC;;AAE5DhB,IAAAA,IAAI,IAAI,GAAR;;AAEA,SAAKoB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGC,GAAhB,EAAqBD,CAAC,EAAtB,EAA0B;AACxB,UAAIM,GAAG,GAAGjB,OAAO,CAACe,iBAAR,CAA0BvB,UAAU,CAACwB,MAAX,CAAkBL,CAAlB,CAA1B,CAAV;AACA,UAAIM,GAAG,GAAGR,YAAV,EAAwBQ,GAAG,GAAGR,YAAN;AACxBlB,MAAAA,IAAI,IAAIS,OAAO,CAACkB,iBAAR,CAA0BD,GAA1B,CAAR;AACD;;AAED,WAAOjB,OAAO,CAACmB,MAAR,CAAe5B,IAAf,EAAqB,KAAKQ,OAAL,CAAaC,OAAb,CAArB,EAA4CI,MAA5C,CAAP;AACD,GAtBD,MAsBO;AACL;AACA,WAAOJ,OAAO,CAACmB,MAAR,CAAe5B,IAAf,EAAqBc,IAArB,EAA2BD,MAA3B,CAAP;AACD;AACF,CA/BD;;AAiCAd,UAAU,CAACI,SAAX,CAAqB0B,IAArB,GAA4B,UAAUC,MAAV,EAAkB;AAC5ChC,EAAAA,IAAI,CAACK,SAAL,CAAe0B,IAAf,CAAoB3B,IAApB,CAAyB,IAAzB,EAA+B4B,MAA/B;AACA,OAAK9B,IAAL,GAAY8B,MAAM,CAAC9B,IAAnB;AACA,OAAKC,UAAL,GAAkB6B,MAAM,CAAC7B,UAAzB;AACA,SAAO,IAAP;AACD,CALD;;AAOAF,UAAU,CAACI,SAAX,CAAqB4B,MAArB,GAA8B,UAAUC,IAAV,EAAgB;AAC5C,MAAIC,IAAI,GAAG,KAAKC,WAAL,CAAiBF,IAAjB,CAAX;;AAEA,MAAI,CAACC,IAAL,EAAW;AACTA,IAAAA,IAAI,GAAG,KAAKE,cAAL,CAAoBH,IAApB,CAAP;AACAC,IAAAA,IAAI,CAACjC,IAAL,GAAY,KAAKA,IAAL,CAAU+B,MAAV,CAAiBC,IAAjB,EAAuBI,IAAnC;AACAH,IAAAA,IAAI,CAAChC,UAAL,GAAkB,KAAKA,UAAvB;AACD;;AAED,SAAOgC,IAAP;AACD,CAVD;;AAYA,SAASlC,UAAT","sourcesContent":["import { Node } from '../core/Node.js';\n\nfunction SwitchNode(node, components) {\n  Node.call(this);\n  this.node = node;\n  this.components = components || 'x';\n}\n\nSwitchNode.prototype = Object.create(Node.prototype);\nSwitchNode.prototype.constructor = SwitchNode;\nSwitchNode.prototype.nodeType = 'Switch';\n\nSwitchNode.prototype.getType = function (builder) {\n  return builder.getTypeFromLength(this.components.length);\n};\n\nSwitchNode.prototype.generate = function (builder, output) {\n  var type = this.node.getType(builder),\n      node = this.node.build(builder, type),\n      inputLength = builder.getTypeLength(type) - 1;\n\n  if (inputLength > 0) {\n    // get max length\n    var outputLength = 0,\n        components = builder.colorToVectorProperties(this.components);\n    var i,\n        len = components.length;\n\n    for (i = 0; i < len; i++) {\n      outputLength = Math.max(outputLength, builder.getIndexByElement(components.charAt(i)));\n    }\n\n    if (outputLength > inputLength) outputLength = inputLength; // split\n\n    node += '.';\n\n    for (i = 0; i < len; i++) {\n      var idx = builder.getIndexByElement(components.charAt(i));\n      if (idx > outputLength) idx = outputLength;\n      node += builder.getElementByIndex(idx);\n    }\n\n    return builder.format(node, this.getType(builder), output);\n  } else {\n    // join\n    return builder.format(node, type, output);\n  }\n};\n\nSwitchNode.prototype.copy = function (source) {\n  Node.prototype.copy.call(this, source);\n  this.node = source.node;\n  this.components = source.components;\n  return this;\n};\n\nSwitchNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.node = this.node.toJSON(meta).uuid;\n    data.components = this.components;\n  }\n\n  return data;\n};\n\nexport { SwitchNode };\n"]},"metadata":{},"sourceType":"module"}