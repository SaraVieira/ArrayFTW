{"ast":null,"code":"import _classCallCheck from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { DataTextureLoader, CubeTexture, RGBM7Encoding, RGBAFormat, LinearFilter, UnsignedByteType } from 'three';\n\nvar RGBMLoader = /*#__PURE__*/function (_DataTextureLoader) {\n  _inherits(RGBMLoader, _DataTextureLoader);\n\n  var _super = _createSuper(RGBMLoader);\n\n  function RGBMLoader() {\n    _classCallCheck(this, RGBMLoader);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(RGBMLoader, [{\n    key: \"loadCubemap\",\n    value: function loadCubemap(urls, onLoad, onProgress, onError) {\n      var texture = new CubeTexture();\n      var loaded = 0;\n      var scope = this;\n\n      function loadTexture(i) {\n        scope.load(urls[i], function (image) {\n          texture.images[i] = image;\n          loaded++;\n\n          if (loaded === 6) {\n            texture.needsUpdate = true;\n            if (onLoad) onLoad(texture);\n          }\n        }, undefined, onError);\n      }\n\n      for (var _i = 0; _i < urls.length; ++_i) {\n        loadTexture(_i);\n      }\n\n      texture.encoding = RGBM7Encoding;\n      texture.format = RGBAFormat;\n      texture.minFilter = LinearFilter;\n      texture.generateMipmaps = false;\n      return texture;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(buffer) {\n      var img = UPNG.decode(buffer);\n      var rgba = UPNG.toRGBA8(img)[0];\n      return {\n        width: img.width,\n        height: img.height,\n        data: new Uint8Array(rgba),\n        format: RGBAFormat,\n        type: UnsignedByteType,\n        flipY: true,\n        encoding: RGBM7Encoding\n      };\n    }\n  }]);\n\n  return RGBMLoader;\n}(DataTextureLoader); // from https://github.com/photopea/UPNG.js (MIT License)\n\n\nvar UPNG = {};\n\nUPNG.toRGBA8 = function (out) {\n  var w = out.width,\n      h = out.height;\n  if (out.tabs.acTL == null) return [UPNG.toRGBA8.decodeImage(out.data, w, h, out).buffer];\n  var frms = [];\n  if (out.frames[0].data == null) out.frames[0].data = out.data;\n  var len = w * h * 4,\n      img = new Uint8Array(len),\n      empty = new Uint8Array(len),\n      prev = new Uint8Array(len);\n\n  for (var _i2 = 0; _i2 < out.frames.length; _i2++) {\n    var frm = out.frames[_i2];\n    var fx = frm.rect.x,\n        fy = frm.rect.y,\n        fw = frm.rect.width,\n        fh = frm.rect.height;\n    var fdata = UPNG.toRGBA8.decodeImage(frm.data, fw, fh, out);\n    if (_i2 != 0) for (var j = 0; j < len; j++) {\n      prev[j] = img[j];\n    }\n    if (frm.blend == 0) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 0);else if (frm.blend == 1) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 1);\n    frms.push(img.buffer.slice(0));\n    if (frm.dispose == 0) ;else if (frm.dispose == 1) UPNG._copyTile(empty, fw, fh, img, w, h, fx, fy, 0);else if (frm.dispose == 2) for (var _j = 0; _j < len; _j++) {\n      img[_j] = prev[_j];\n    }\n  }\n\n  return frms;\n};\n\nUPNG.toRGBA8.decodeImage = function (data, w, h, out) {\n  var area = w * h,\n      bpp = UPNG.decode._getBPP(out);\n\n  var bpl = Math.ceil(w * bpp / 8); // bytes per line\n\n  var bf = new Uint8Array(area * 4),\n      bf32 = new Uint32Array(bf.buffer);\n  var ctype = out.ctype,\n      depth = out.depth;\n  var rs = UPNG._bin.readUshort;\n\n  if (ctype == 6) {\n    // RGB + alpha\n    var qarea = area << 2;\n    if (depth == 8) for (var _i3 = 0; _i3 < qarea; _i3 += 4) {\n      bf[_i3] = data[_i3];\n      bf[_i3 + 1] = data[_i3 + 1];\n      bf[_i3 + 2] = data[_i3 + 2];\n      bf[_i3 + 3] = data[_i3 + 3];\n    }\n    if (depth == 16) for (var _i4 = 0; _i4 < qarea; _i4++) {\n      bf[_i4] = data[_i4 << 1];\n    }\n  } else if (ctype == 2) {\n    // RGB\n    var ts = out.tabs['tRNS'];\n\n    if (ts == null) {\n      if (depth == 8) for (var _i5 = 0; _i5 < area; _i5++) {\n        var ti = _i5 * 3;\n        bf32[_i5] = 255 << 24 | data[ti + 2] << 16 | data[ti + 1] << 8 | data[ti];\n      }\n      if (depth == 16) for (var _i6 = 0; _i6 < area; _i6++) {\n        var ti = _i6 * 6;\n        bf32[_i6] = 255 << 24 | data[ti + 4] << 16 | data[ti + 2] << 8 | data[ti];\n      }\n    } else {\n      var tr = ts[0],\n          tg = ts[1],\n          tb = ts[2];\n      if (depth == 8) for (var _i7 = 0; _i7 < area; _i7++) {\n        var qi = _i7 << 2,\n            ti = _i7 * 3;\n        bf32[_i7] = 255 << 24 | data[ti + 2] << 16 | data[ti + 1] << 8 | data[ti];\n        if (data[ti] == tr && data[ti + 1] == tg && data[ti + 2] == tb) bf[qi + 3] = 0;\n      }\n      if (depth == 16) for (var _i8 = 0; _i8 < area; _i8++) {\n        var qi = _i8 << 2,\n            ti = _i8 * 6;\n        bf32[_i8] = 255 << 24 | data[ti + 4] << 16 | data[ti + 2] << 8 | data[ti];\n        if (rs(data, ti) == tr && rs(data, ti + 2) == tg && rs(data, ti + 4) == tb) bf[qi + 3] = 0;\n      }\n    }\n  } else if (ctype == 3) {\n    // palette\n    var p = out.tabs['PLTE'],\n        ap = out.tabs['tRNS'],\n        tl = ap ? ap.length : 0; //console.log(p, ap);\n\n    if (depth == 1) for (var y = 0; y < h; y++) {\n      var s0 = y * bpl,\n          t0 = y * w;\n\n      for (var _i9 = 0; _i9 < w; _i9++) {\n        var qi = t0 + _i9 << 2,\n            j = data[s0 + (_i9 >> 3)] >> 7 - ((_i9 & 7) << 0) & 1,\n            cj = 3 * j;\n        bf[qi] = p[cj];\n        bf[qi + 1] = p[cj + 1];\n        bf[qi + 2] = p[cj + 2];\n        bf[qi + 3] = j < tl ? ap[j] : 255;\n      }\n    }\n    if (depth == 2) for (var _y = 0; _y < h; _y++) {\n      var s0 = _y * bpl,\n          t0 = _y * w;\n\n      for (var _i10 = 0; _i10 < w; _i10++) {\n        var qi = t0 + _i10 << 2,\n            j = data[s0 + (_i10 >> 2)] >> 6 - ((_i10 & 3) << 1) & 3,\n            cj = 3 * j;\n        bf[qi] = p[cj];\n        bf[qi + 1] = p[cj + 1];\n        bf[qi + 2] = p[cj + 2];\n        bf[qi + 3] = j < tl ? ap[j] : 255;\n      }\n    }\n    if (depth == 4) for (var _y2 = 0; _y2 < h; _y2++) {\n      var s0 = _y2 * bpl,\n          t0 = _y2 * w;\n\n      for (var _i11 = 0; _i11 < w; _i11++) {\n        var qi = t0 + _i11 << 2,\n            j = data[s0 + (_i11 >> 1)] >> 4 - ((_i11 & 1) << 2) & 15,\n            cj = 3 * j;\n        bf[qi] = p[cj];\n        bf[qi + 1] = p[cj + 1];\n        bf[qi + 2] = p[cj + 2];\n        bf[qi + 3] = j < tl ? ap[j] : 255;\n      }\n    }\n    if (depth == 8) for (var _i12 = 0; _i12 < area; _i12++) {\n      var qi = _i12 << 2,\n          j = data[_i12],\n          cj = 3 * j;\n      bf[qi] = p[cj];\n      bf[qi + 1] = p[cj + 1];\n      bf[qi + 2] = p[cj + 2];\n      bf[qi + 3] = j < tl ? ap[j] : 255;\n    }\n  } else if (ctype == 4) {\n    // gray + alpha\n    if (depth == 8) for (var _i13 = 0; _i13 < area; _i13++) {\n      var qi = _i13 << 2,\n          di = _i13 << 1,\n          gr = data[di];\n      bf[qi] = gr;\n      bf[qi + 1] = gr;\n      bf[qi + 2] = gr;\n      bf[qi + 3] = data[di + 1];\n    }\n    if (depth == 16) for (var _i14 = 0; _i14 < area; _i14++) {\n      var qi = _i14 << 2,\n          di = _i14 << 2,\n          gr = data[di];\n      bf[qi] = gr;\n      bf[qi + 1] = gr;\n      bf[qi + 2] = gr;\n      bf[qi + 3] = data[di + 2];\n    }\n  } else if (ctype == 0) {\n    // gray\n    var tr = out.tabs['tRNS'] ? out.tabs['tRNS'] : -1;\n\n    for (var _y3 = 0; _y3 < h; _y3++) {\n      var off = _y3 * bpl,\n          to = _y3 * w;\n      if (depth == 1) for (var x = 0; x < w; x++) {\n        var gr = 255 * (data[off + (x >>> 3)] >>> 7 - (x & 7) & 1),\n            al = gr == tr * 255 ? 0 : 255;\n        bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n      } else if (depth == 2) for (var _x = 0; _x < w; _x++) {\n        var gr = 85 * (data[off + (_x >>> 2)] >>> 6 - ((_x & 3) << 1) & 3),\n            al = gr == tr * 85 ? 0 : 255;\n        bf32[to + _x] = al << 24 | gr << 16 | gr << 8 | gr;\n      } else if (depth == 4) for (var _x2 = 0; _x2 < w; _x2++) {\n        var gr = 17 * (data[off + (_x2 >>> 1)] >>> 4 - ((_x2 & 1) << 2) & 15),\n            al = gr == tr * 17 ? 0 : 255;\n        bf32[to + _x2] = al << 24 | gr << 16 | gr << 8 | gr;\n      } else if (depth == 8) for (var _x3 = 0; _x3 < w; _x3++) {\n        var gr = data[off + _x3],\n            al = gr == tr ? 0 : 255;\n        bf32[to + _x3] = al << 24 | gr << 16 | gr << 8 | gr;\n      } else if (depth == 16) for (var _x4 = 0; _x4 < w; _x4++) {\n        var gr = data[off + (_x4 << 1)],\n            al = rs(data, off + (_x4 << i)) == tr ? 0 : 255;\n        bf32[to + _x4] = al << 24 | gr << 16 | gr << 8 | gr;\n      }\n    }\n  } //console.log(Date.now()-time);\n\n\n  return bf;\n};\n\nUPNG.decode = function (buff) {\n  var data = new Uint8Array(buff),\n      offset = 8,\n      bin = UPNG._bin,\n      rUs = bin.readUshort,\n      rUi = bin.readUint;\n  var out = {\n    tabs: {},\n    frames: []\n  };\n  var dd = new Uint8Array(data.length),\n      doff = 0; // put all IDAT data into it\n\n  var fd,\n      foff = 0; // frames\n\n  var mgck = [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a];\n\n  for (var _i15 = 0; _i15 < 8; _i15++) {\n    if (data[_i15] != mgck[_i15]) throw 'The input is not a PNG file!';\n  }\n\n  while (offset < data.length) {\n    var len = bin.readUint(data, offset);\n    offset += 4;\n    var type = bin.readASCII(data, offset, 4);\n    offset += 4; //console.log(type,len);\n\n    if (type == 'IHDR') {\n      UPNG.decode._IHDR(data, offset, out);\n    } else if (type == 'CgBI') {\n      out.tabs[type] = data.slice(offset, offset + 4);\n    } else if (type == 'IDAT') {\n      for (var _i16 = 0; _i16 < len; _i16++) {\n        dd[doff + _i16] = data[offset + _i16];\n      }\n\n      doff += len;\n    } else if (type == 'acTL') {\n      out.tabs[type] = {\n        num_frames: rUi(data, offset),\n        num_plays: rUi(data, offset + 4)\n      };\n      fd = new Uint8Array(data.length);\n    } else if (type == 'fcTL') {\n      if (foff != 0) {\n        var fr = out.frames[out.frames.length - 1];\n        fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n        foff = 0;\n      }\n\n      var rct = {\n        x: rUi(data, offset + 12),\n        y: rUi(data, offset + 16),\n        width: rUi(data, offset + 4),\n        height: rUi(data, offset + 8)\n      };\n      var del = rUs(data, offset + 22);\n      del = rUs(data, offset + 20) / (del == 0 ? 100 : del);\n      var frm = {\n        rect: rct,\n        delay: Math.round(del * 1000),\n        dispose: data[offset + 24],\n        blend: data[offset + 25]\n      }; //console.log(frm);\n\n      out.frames.push(frm);\n    } else if (type == 'fdAT') {\n      for (var _i17 = 0; _i17 < len - 4; _i17++) {\n        fd[foff + _i17] = data[offset + _i17 + 4];\n      }\n\n      foff += len - 4;\n    } else if (type == 'pHYs') {\n      out.tabs[type] = [bin.readUint(data, offset), bin.readUint(data, offset + 4), data[offset + 8]];\n    } else if (type == 'cHRM') {\n      out.tabs[type] = [];\n\n      for (var _i18 = 0; _i18 < 8; _i18++) {\n        out.tabs[type].push(bin.readUint(data, offset + _i18 * 4));\n      }\n    } else if (type == 'tEXt' || type == 'zTXt') {\n      if (out.tabs[type] == null) out.tabs[type] = {};\n      var nz = bin.nextZero(data, offset);\n      var keyw = bin.readASCII(data, offset, nz - offset);\n      var text,\n          tl = offset + len - nz - 1;\n      if (type == 'tEXt') text = bin.readASCII(data, nz + 1, tl);else {\n        var bfr = UPNG.decode._inflate(data.slice(nz + 2, nz + 2 + tl));\n\n        text = bin.readUTF8(bfr, 0, bfr.length);\n      }\n      out.tabs[type][keyw] = text;\n    } else if (type == 'iTXt') {\n      if (out.tabs[type] == null) out.tabs[type] = {};\n      var nz = 0,\n          off = offset;\n      nz = bin.nextZero(data, off);\n      var keyw = bin.readASCII(data, off, nz - off);\n      off = nz + 1;\n      var cflag = data[off];\n      off += 2;\n      nz = bin.nextZero(data, off);\n      bin.readASCII(data, off, nz - off);\n      off = nz + 1;\n      nz = bin.nextZero(data, off);\n      bin.readUTF8(data, off, nz - off);\n      off = nz + 1;\n      var text,\n          tl = len - (off - offset);\n      if (cflag == 0) text = bin.readUTF8(data, off, tl);else {\n        var bfr = UPNG.decode._inflate(data.slice(off, off + tl));\n\n        text = bin.readUTF8(bfr, 0, bfr.length);\n      }\n      out.tabs[type][keyw] = text;\n    } else if (type == 'PLTE') {\n      out.tabs[type] = bin.readBytes(data, offset, len);\n    } else if (type == 'hIST') {\n      var pl = out.tabs['PLTE'].length / 3;\n      out.tabs[type] = [];\n\n      for (var _i19 = 0; _i19 < pl; _i19++) {\n        out.tabs[type].push(rUs(data, offset + _i19 * 2));\n      }\n    } else if (type == 'tRNS') {\n      if (out.ctype == 3) out.tabs[type] = bin.readBytes(data, offset, len);else if (out.ctype == 0) out.tabs[type] = rUs(data, offset);else if (out.ctype == 2) out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)]; //else console.log(\"tRNS for unsupported color type\",out.ctype, len);\n    } else if (type == 'gAMA') out.tabs[type] = bin.readUint(data, offset) / 100000;else if (type == 'sRGB') out.tabs[type] = data[offset];else if (type == 'bKGD') {\n      if (out.ctype == 0 || out.ctype == 4) out.tabs[type] = [rUs(data, offset)];else if (out.ctype == 2 || out.ctype == 6) out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)];else if (out.ctype == 3) out.tabs[type] = data[offset];\n    } else if (type == 'IEND') {\n      break;\n    } //else {  log(\"unknown chunk type\", type, len);  }\n\n\n    offset += len;\n    bin.readUint(data, offset);\n    offset += 4;\n  }\n\n  if (foff != 0) {\n    var fr = out.frames[out.frames.length - 1];\n    fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n    foff = 0;\n  }\n\n  out.data = UPNG.decode._decompress(out, dd, out.width, out.height);\n  delete out.compress;\n  delete out.interlace;\n  delete out.filter;\n  return out;\n};\n\nUPNG.decode._decompress = function (out, dd, w, h) {\n  var bpp = UPNG.decode._getBPP(out),\n      bpl = Math.ceil(w * bpp / 8),\n      buff = new Uint8Array((bpl + 1 + out.interlace) * h);\n\n  if (out.tabs['CgBI']) dd = UPNG.inflateRaw(dd, buff);else dd = UPNG.decode._inflate(dd, buff);\n  if (out.interlace == 0) dd = UPNG.decode._filterZero(dd, out, 0, w, h);else if (out.interlace == 1) dd = UPNG.decode._readInterlace(dd, out);\n  return dd;\n};\n\nUPNG.decode._inflate = function (data, buff) {\n  var out = UPNG['inflateRaw'](new Uint8Array(data.buffer, 2, data.length - 6), buff);\n  return out;\n};\n\nUPNG.inflateRaw = function () {\n  var H = {};\n  H.H = {};\n\n  H.H.N = function (N, W) {\n    var R = Uint8Array,\n        i = 0,\n        m = 0,\n        J = 0,\n        h = 0,\n        Q = 0,\n        X = 0,\n        u = 0,\n        w = 0,\n        d = 0,\n        v,\n        C;\n    if (N[0] == 3 && N[1] == 0) return W ? W : new R(0);\n    var V = H.H,\n        n = V.b,\n        A = V.e,\n        l = V.R,\n        M = V.n,\n        I = V.A,\n        e = V.Z,\n        b = V.m,\n        Z = W == null;\n    if (Z) W = new R(N.length >>> 2 << 5);\n\n    while (i == 0) {\n      i = n(N, d, 1);\n      m = n(N, d + 1, 2);\n      d += 3;\n\n      if (m == 0) {\n        if ((d & 7) != 0) d += 8 - (d & 7);\n        var D = (d >>> 3) + 4,\n            q = N[D - 4] | N[D - 3] << 8;\n        if (Z) W = H.H.W(W, w + q);\n        W.set(new R(N.buffer, N.byteOffset + D, q), w);\n        d = D + q << 3;\n        w += q;\n        continue;\n      }\n\n      if (Z) W = H.H.W(W, w + (1 << 17));\n\n      if (m == 1) {\n        v = b.J;\n        C = b.h;\n        X = (1 << 9) - 1;\n        u = (1 << 5) - 1;\n      }\n\n      if (m == 2) {\n        J = A(N, d, 5) + 257;\n        h = A(N, d + 5, 5) + 1;\n        Q = A(N, d + 10, 4) + 4;\n        d += 14;\n        var j = 1;\n\n        for (var c = 0; c < 38; c += 2) {\n          b.Q[c] = 0;\n          b.Q[c + 1] = 0;\n        }\n\n        for (var _c = 0; _c < Q; _c++) {\n          var K = A(N, d + _c * 3, 3);\n          b.Q[(b.X[_c] << 1) + 1] = K;\n          if (K > j) j = K;\n        }\n\n        d += 3 * Q;\n        M(b.Q, j);\n        I(b.Q, j, b.u);\n        v = b.w;\n        C = b.d;\n        d = l(b.u, (1 << j) - 1, J + h, N, d, b.v);\n        var r = V.V(b.v, 0, J, b.C);\n        X = (1 << r) - 1;\n        var S = V.V(b.v, J, h, b.D);\n        u = (1 << S) - 1;\n        M(b.C, r);\n        I(b.C, r, v);\n        M(b.D, S);\n        I(b.D, S, C);\n      }\n\n      while (!0) {\n        var T = v[e(N, d) & X];\n        d += T & 15;\n        var p = T >>> 4;\n\n        if (p >>> 8 == 0) {\n          W[w++] = p;\n        } else if (p == 256) {\n          break;\n        } else {\n          var z = w + p - 254;\n\n          if (p > 264) {\n            var _ = b.q[p - 257];\n            z = w + (_ >>> 3) + A(N, d, _ & 7);\n            d += _ & 7;\n          }\n\n          var $ = C[e(N, d) & u];\n          d += $ & 15;\n          var s = $ >>> 4,\n              Y = b.c[s],\n              a = (Y >>> 4) + n(N, d, Y & 15);\n          d += Y & 15;\n\n          while (w < z) {\n            W[w] = W[w++ - a];\n            W[w] = W[w++ - a];\n            W[w] = W[w++ - a];\n            W[w] = W[w++ - a];\n          }\n\n          w = z;\n        }\n      }\n    }\n\n    return W.length == w ? W : W.slice(0, w);\n  };\n\n  H.H.W = function (N, W) {\n    var R = N.length;\n    if (W <= R) return N;\n    var V = new Uint8Array(R << 1);\n    V.set(N, 0);\n    return V;\n  };\n\n  H.H.R = function (N, W, R, V, n, A) {\n    var l = H.H.e,\n        M = H.H.Z,\n        I = 0;\n\n    while (I < R) {\n      var e = N[M(V, n) & W];\n      n += e & 15;\n      var b = e >>> 4;\n\n      if (b <= 15) {\n        A[I] = b;\n        I++;\n      } else {\n        var Z = 0,\n            m = 0;\n\n        if (b == 16) {\n          m = 3 + l(V, n, 2);\n          n += 2;\n          Z = A[I - 1];\n        } else if (b == 17) {\n          m = 3 + l(V, n, 3);\n          n += 3;\n        } else if (b == 18) {\n          m = 11 + l(V, n, 7);\n          n += 7;\n        }\n\n        var J = I + m;\n\n        while (I < J) {\n          A[I] = Z;\n          I++;\n        }\n      }\n    }\n\n    return n;\n  };\n\n  H.H.V = function (N, W, R, V) {\n    var n = 0,\n        A = 0,\n        l = V.length >>> 1;\n\n    while (A < R) {\n      var M = N[A + W];\n      V[A << 1] = 0;\n      V[(A << 1) + 1] = M;\n      if (M > n) n = M;\n      A++;\n    }\n\n    while (A < l) {\n      V[A << 1] = 0;\n      V[(A << 1) + 1] = 0;\n      A++;\n    }\n\n    return n;\n  };\n\n  H.H.n = function (N, W) {\n    var R = H.H.m,\n        V = N.length,\n        n,\n        A,\n        l,\n        M,\n        I,\n        e = R.j;\n\n    for (var _M = 0; _M <= W; _M++) {\n      e[_M] = 0;\n    }\n\n    for (M = 1; M < V; M += 2) {\n      e[N[M]]++;\n    }\n\n    var b = R.K;\n    n = 0;\n    e[0] = 0;\n\n    for (A = 1; A <= W; A++) {\n      n = n + e[A - 1] << 1;\n      b[A] = n;\n    }\n\n    for (l = 0; l < V; l += 2) {\n      I = N[l + 1];\n\n      if (I != 0) {\n        N[l] = b[I];\n        b[I]++;\n      }\n    }\n  };\n\n  H.H.A = function (N, W, R) {\n    var V = N.length,\n        n = H.H.m,\n        A = n.r;\n\n    for (var l = 0; l < V; l += 2) {\n      if (N[l + 1] != 0) {\n        var M = l >> 1,\n            I = N[l + 1],\n            e = M << 4 | I,\n            b = W - I,\n            Z = N[l] << b,\n            m = Z + (1 << b);\n\n        while (Z != m) {\n          var J = A[Z] >>> 15 - W;\n          R[J] = e;\n          Z++;\n        }\n      }\n    }\n  };\n\n  H.H.l = function (N, W) {\n    var R = H.H.m.r,\n        V = 15 - W;\n\n    for (var n = 0; n < N.length; n += 2) {\n      var A = N[n] << W - N[n + 1];\n      N[n] = R[A] >>> V;\n    }\n  };\n\n  H.H.M = function (N, W, R) {\n    R = R << (W & 7);\n    var V = W >>> 3;\n    N[V] |= R;\n    N[V + 1] |= R >>> 8;\n  };\n\n  H.H.I = function (N, W, R) {\n    R = R << (W & 7);\n    var V = W >>> 3;\n    N[V] |= R;\n    N[V + 1] |= R >>> 8;\n    N[V + 2] |= R >>> 16;\n  };\n\n  H.H.e = function (N, W, R) {\n    return (N[W >>> 3] | N[(W >>> 3) + 1] << 8) >>> (W & 7) & (1 << R) - 1;\n  };\n\n  H.H.b = function (N, W, R) {\n    return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16) >>> (W & 7) & (1 << R) - 1;\n  };\n\n  H.H.Z = function (N, W) {\n    return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16) >>> (W & 7);\n  };\n\n  H.H.i = function (N, W) {\n    return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16 | N[(W >>> 3) + 3] << 24) >>> (W & 7);\n  };\n\n  H.H.m = function () {\n    var N = Uint16Array,\n        W = Uint32Array;\n    return {\n      K: new N(16),\n      j: new N(16),\n      X: [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],\n      S: [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 999, 999, 999],\n      T: [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0],\n      q: new N(32),\n      p: [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 65535, 65535],\n      z: [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0],\n      c: new W(32),\n      J: new N(512),\n      _: [],\n      h: new N(32),\n      $: [],\n      w: new N(32768),\n      C: [],\n      v: [],\n      d: new N(32768),\n      D: [],\n      u: new N(512),\n      Q: [],\n      r: new N(1 << 15),\n      s: new W(286),\n      Y: new W(30),\n      a: new W(19),\n      t: new W(15e3),\n      k: new N(1 << 16),\n      g: new N(1 << 15)\n    };\n  }();\n\n  (function () {\n    var N = H.H.m,\n        W = 1 << 15;\n\n    for (var R = 0; R < W; R++) {\n      var V = R;\n      V = (V & 2863311530) >>> 1 | (V & 1431655765) << 1;\n      V = (V & 3435973836) >>> 2 | (V & 858993459) << 2;\n      V = (V & 4042322160) >>> 4 | (V & 252645135) << 4;\n      V = (V & 4278255360) >>> 8 | (V & 16711935) << 8;\n      N.r[R] = (V >>> 16 | V << 16) >>> 17;\n    }\n\n    function n(A, l, M) {\n      while (l-- != 0) {\n        A.push(0, M);\n      }\n    }\n\n    for (var _R = 0; _R < 32; _R++) {\n      N.q[_R] = N.S[_R] << 3 | N.T[_R];\n      N.c[_R] = N.p[_R] << 4 | N.z[_R];\n    }\n\n    n(N._, 144, 8);\n    n(N._, 255 - 143, 9);\n    n(N._, 279 - 255, 7);\n    n(N._, 287 - 279, 8);\n    H.H.n(N._, 9);\n    H.H.A(N._, 9, N.J);\n    H.H.l(N._, 9);\n    n(N.$, 32, 5);\n    H.H.n(N.$, 5);\n    H.H.A(N.$, 5, N.h);\n    H.H.l(N.$, 5);\n    n(N.Q, 19, 0);\n    n(N.C, 286, 0);\n    n(N.D, 30, 0);\n    n(N.v, 320, 0);\n  })();\n\n  return H.H.N;\n}();\n\nUPNG.decode._readInterlace = function (data, out) {\n  var w = out.width,\n      h = out.height;\n\n  var bpp = UPNG.decode._getBPP(out),\n      cbpp = bpp >> 3,\n      bpl = Math.ceil(w * bpp / 8);\n\n  var img = new Uint8Array(h * bpl);\n  var di = 0;\n  var starting_row = [0, 0, 4, 0, 2, 0, 1];\n  var starting_col = [0, 4, 0, 2, 0, 1, 0];\n  var row_increment = [8, 8, 8, 4, 4, 2, 2];\n  var col_increment = [8, 8, 4, 4, 2, 2, 1];\n  var pass = 0;\n\n  while (pass < 7) {\n    var ri = row_increment[pass],\n        ci = col_increment[pass];\n    var sw = 0,\n        sh = 0;\n    var cr = starting_row[pass];\n\n    while (cr < h) {\n      cr += ri;\n      sh++;\n    }\n\n    var cc = starting_col[pass];\n\n    while (cc < w) {\n      cc += ci;\n      sw++;\n    }\n\n    var bpll = Math.ceil(sw * bpp / 8);\n\n    UPNG.decode._filterZero(data, out, di, sw, sh);\n\n    var y = 0,\n        row = starting_row[pass];\n\n    while (row < h) {\n      var col = starting_col[pass];\n      var cdi = di + y * bpll << 3;\n\n      while (col < w) {\n        if (bpp == 1) {\n          var val = data[cdi >> 3];\n          val = val >> 7 - (cdi & 7) & 1;\n          img[row * bpl + (col >> 3)] |= val << 7 - ((col & 7) << 0);\n        }\n\n        if (bpp == 2) {\n          var val = data[cdi >> 3];\n          val = val >> 6 - (cdi & 7) & 3;\n          img[row * bpl + (col >> 2)] |= val << 6 - ((col & 3) << 1);\n        }\n\n        if (bpp == 4) {\n          var val = data[cdi >> 3];\n          val = val >> 4 - (cdi & 7) & 15;\n          img[row * bpl + (col >> 1)] |= val << 4 - ((col & 1) << 2);\n        }\n\n        if (bpp >= 8) {\n          var ii = row * bpl + col * cbpp;\n\n          for (var j = 0; j < cbpp; j++) {\n            img[ii + j] = data[(cdi >> 3) + j];\n          }\n        }\n\n        cdi += bpp;\n        col += ci;\n      }\n\n      y++;\n      row += ri;\n    }\n\n    if (sw * sh != 0) di += sh * (1 + bpll);\n    pass = pass + 1;\n  }\n\n  return img;\n};\n\nUPNG.decode._getBPP = function (out) {\n  var noc = [1, null, 3, 1, 2, null, 4][out.ctype];\n  return noc * out.depth;\n};\n\nUPNG.decode._filterZero = function (data, out, off, w, h) {\n  var bpp = UPNG.decode._getBPP(out),\n      bpl = Math.ceil(w * bpp / 8),\n      paeth = UPNG.decode._paeth;\n\n  bpp = Math.ceil(bpp / 8);\n  var i = 0,\n      di = 1,\n      type = data[off],\n      x = 0;\n  if (type > 1) data[off] = [0, 0, 1][type - 2];\n  if (type == 3) for (x = bpp; x < bpl; x++) {\n    data[x + 1] = data[x + 1] + (data[x + 1 - bpp] >>> 1) & 255;\n  }\n\n  for (var y = 0; y < h; y++) {\n    i = off + y * bpl;\n    di = i + y + 1;\n    type = data[di - 1];\n    x = 0;\n    if (type == 0) for (; x < bpl; x++) {\n      data[i + x] = data[di + x];\n    } else if (type == 1) {\n      for (; x < bpp; x++) {\n        data[i + x] = data[di + x];\n      }\n\n      for (; x < bpl; x++) {\n        data[i + x] = data[di + x] + data[i + x - bpp];\n      }\n    } else if (type == 2) {\n      for (; x < bpl; x++) {\n        data[i + x] = data[di + x] + data[i + x - bpl];\n      }\n    } else if (type == 3) {\n      for (; x < bpp; x++) {\n        data[i + x] = data[di + x] + (data[i + x - bpl] >>> 1);\n      }\n\n      for (; x < bpl; x++) {\n        data[i + x] = data[di + x] + (data[i + x - bpl] + data[i + x - bpp] >>> 1);\n      }\n    } else {\n      for (; x < bpp; x++) {\n        data[i + x] = data[di + x] + paeth(0, data[i + x - bpl], 0);\n      }\n\n      for (; x < bpl; x++) {\n        data[i + x] = data[di + x] + paeth(data[i + x - bpp], data[i + x - bpl], data[i + x - bpp - bpl]);\n      }\n    }\n  }\n\n  return data;\n};\n\nUPNG.decode._paeth = function (a, b, c) {\n  var p = a + b - c,\n      pa = p - a,\n      pb = p - b,\n      pc = p - c;\n  if (pa * pa <= pb * pb && pa * pa <= pc * pc) return a;else if (pb * pb <= pc * pc) return b;\n  return c;\n};\n\nUPNG.decode._IHDR = function (data, offset, out) {\n  var bin = UPNG._bin;\n  out.width = bin.readUint(data, offset);\n  offset += 4;\n  out.height = bin.readUint(data, offset);\n  offset += 4;\n  out.depth = data[offset];\n  offset++;\n  out.ctype = data[offset];\n  offset++;\n  out.compress = data[offset];\n  offset++;\n  out.filter = data[offset];\n  offset++;\n  out.interlace = data[offset];\n  offset++;\n};\n\nUPNG._bin = {\n  nextZero: function nextZero(data, p) {\n    while (data[p] != 0) {\n      p++;\n    }\n\n    return p;\n  },\n  readUshort: function readUshort(buff, p) {\n    return buff[p] << 8 | buff[p + 1];\n  },\n  writeUshort: function writeUshort(buff, p, n) {\n    buff[p] = n >> 8 & 255;\n    buff[p + 1] = n & 255;\n  },\n  readUint: function readUint(buff, p) {\n    return buff[p] * (256 * 256 * 256) + (buff[p + 1] << 16 | buff[p + 2] << 8 | buff[p + 3]);\n  },\n  writeUint: function writeUint(buff, p, n) {\n    buff[p] = n >> 24 & 255;\n    buff[p + 1] = n >> 16 & 255;\n    buff[p + 2] = n >> 8 & 255;\n    buff[p + 3] = n & 255;\n  },\n  readASCII: function readASCII(buff, p, l) {\n    var s = '';\n\n    for (var _i20 = 0; _i20 < l; _i20++) {\n      s += String.fromCharCode(buff[p + _i20]);\n    }\n\n    return s;\n  },\n  writeASCII: function writeASCII(data, p, s) {\n    for (var _i21 = 0; _i21 < s.length; _i21++) {\n      data[p + _i21] = s.charCodeAt(_i21);\n    }\n  },\n  readBytes: function readBytes(buff, p, l) {\n    var arr = [];\n\n    for (var _i22 = 0; _i22 < l; _i22++) {\n      arr.push(buff[p + _i22]);\n    }\n\n    return arr;\n  },\n  pad: function pad(n) {\n    return n.length < 2 ? '0' + n : n;\n  },\n  readUTF8: function readUTF8(buff, p, l) {\n    var s = '',\n        ns;\n\n    for (var _i23 = 0; _i23 < l; _i23++) {\n      s += '%' + UPNG._bin.pad(buff[p + _i23].toString(16));\n    }\n\n    try {\n      ns = decodeURIComponent(s);\n    } catch (e) {\n      return UPNG._bin.readASCII(buff, p, l);\n    }\n\n    return ns;\n  }\n};\n\nUPNG._copyTile = function (sb, sw, sh, tb, tw, th, xoff, yoff, mode) {\n  var w = Math.min(sw, tw),\n      h = Math.min(sh, th);\n  var si = 0,\n      ti = 0;\n\n  for (var y = 0; y < h; y++) {\n    for (var x = 0; x < w; x++) {\n      if (xoff >= 0 && yoff >= 0) {\n        si = y * sw + x << 2;\n        ti = (yoff + y) * tw + xoff + x << 2;\n      } else {\n        si = (-yoff + y) * sw - xoff + x << 2;\n        ti = y * tw + x << 2;\n      }\n\n      if (mode == 0) {\n        tb[ti] = sb[si];\n        tb[ti + 1] = sb[si + 1];\n        tb[ti + 2] = sb[si + 2];\n        tb[ti + 3] = sb[si + 3];\n      } else if (mode == 1) {\n        var fa = sb[si + 3] * (1 / 255),\n            fr = sb[si] * fa,\n            fg = sb[si + 1] * fa,\n            fb = sb[si + 2] * fa;\n        var ba = tb[ti + 3] * (1 / 255),\n            br = tb[ti] * ba,\n            bg = tb[ti + 1] * ba,\n            bb = tb[ti + 2] * ba;\n        var ifa = 1 - fa,\n            oa = fa + ba * ifa,\n            ioa = oa == 0 ? 0 : 1 / oa;\n        tb[ti + 3] = 255 * oa;\n        tb[ti + 0] = (fr + br * ifa) * ioa;\n        tb[ti + 1] = (fg + bg * ifa) * ioa;\n        tb[ti + 2] = (fb + bb * ifa) * ioa;\n      } else if (mode == 2) {\n        // copy only differences, otherwise zero\n        var fa = sb[si + 3],\n            fr = sb[si],\n            fg = sb[si + 1],\n            fb = sb[si + 2];\n        var ba = tb[ti + 3],\n            br = tb[ti],\n            bg = tb[ti + 1],\n            bb = tb[ti + 2];\n\n        if (fa == ba && fr == br && fg == bg && fb == bb) {\n          tb[ti] = 0;\n          tb[ti + 1] = 0;\n          tb[ti + 2] = 0;\n          tb[ti + 3] = 0;\n        } else {\n          tb[ti] = fr;\n          tb[ti + 1] = fg;\n          tb[ti + 2] = fb;\n          tb[ti + 3] = fa;\n        }\n      } else if (mode == 3) {\n        // check if can be blended\n        var fa = sb[si + 3],\n            fr = sb[si],\n            fg = sb[si + 1],\n            fb = sb[si + 2];\n        var ba = tb[ti + 3],\n            br = tb[ti],\n            bg = tb[ti + 1],\n            bb = tb[ti + 2];\n        if (fa == ba && fr == br && fg == bg && fb == bb) continue; //if(fa!=255 && ba!=0) return false;\n\n        if (fa < 220 && ba > 20) return false;\n      }\n    }\n  }\n\n  return true;\n};\n\nexport { RGBMLoader };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/loaders/RGBMLoader.js"],"names":["DataTextureLoader","CubeTexture","RGBM7Encoding","RGBAFormat","LinearFilter","UnsignedByteType","RGBMLoader","urls","onLoad","onProgress","onError","texture","loaded","scope","loadTexture","i","load","image","images","needsUpdate","undefined","length","encoding","format","minFilter","generateMipmaps","buffer","img","UPNG","decode","rgba","toRGBA8","width","height","data","Uint8Array","type","flipY","out","w","h","tabs","acTL","decodeImage","frms","frames","len","empty","prev","frm","fx","rect","x","fy","y","fw","fh","fdata","j","blend","_copyTile","push","slice","dispose","area","bpp","_getBPP","bpl","Math","ceil","bf","bf32","Uint32Array","ctype","depth","rs","_bin","readUshort","qarea","ts","ti","tr","tg","tb","qi","p","ap","tl","s0","t0","cj","di","gr","off","to","al","buff","offset","bin","rUs","rUi","readUint","dd","doff","fd","foff","mgck","readASCII","_IHDR","num_frames","num_plays","fr","_decompress","rct","del","delay","round","nz","nextZero","keyw","text","bfr","_inflate","readUTF8","cflag","readBytes","pl","compress","interlace","filter","inflateRaw","_filterZero","_readInterlace","H","N","W","R","m","J","Q","X","u","d","v","C","V","n","b","A","e","l","M","I","Z","D","q","set","byteOffset","c","K","r","S","T","z","_","$","s","Y","a","Uint16Array","t","k","g","cbpp","starting_row","starting_col","row_increment","col_increment","pass","ri","ci","sw","sh","cr","cc","bpll","row","col","cdi","val","ii","noc","paeth","_paeth","pa","pb","pc","writeUshort","writeUint","String","fromCharCode","writeASCII","charCodeAt","arr","pad","ns","toString","decodeURIComponent","sb","tw","th","xoff","yoff","mode","min","si","fa","fg","fb","ba","br","bg","bb","ifa","oa","ioa"],"mappings":"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","sourcesContent":["import { DataTextureLoader, CubeTexture, RGBM7Encoding, RGBAFormat, LinearFilter, UnsignedByteType } from 'three';\n\nclass RGBMLoader extends DataTextureLoader {\n  loadCubemap(urls, onLoad, onProgress, onError) {\n    const texture = new CubeTexture();\n    let loaded = 0;\n    const scope = this;\n\n    function loadTexture(i) {\n      scope.load(urls[i], function (image) {\n        texture.images[i] = image;\n        loaded++;\n\n        if (loaded === 6) {\n          texture.needsUpdate = true;\n          if (onLoad) onLoad(texture);\n        }\n      }, undefined, onError);\n    }\n\n    for (let i = 0; i < urls.length; ++i) {\n      loadTexture(i);\n    }\n\n    texture.encoding = RGBM7Encoding;\n    texture.format = RGBAFormat;\n    texture.minFilter = LinearFilter;\n    texture.generateMipmaps = false;\n    return texture;\n  }\n\n  parse(buffer) {\n    const img = UPNG.decode(buffer);\n    const rgba = UPNG.toRGBA8(img)[0];\n    return {\n      width: img.width,\n      height: img.height,\n      data: new Uint8Array(rgba),\n      format: RGBAFormat,\n      type: UnsignedByteType,\n      flipY: true,\n      encoding: RGBM7Encoding\n    };\n  }\n\n} // from https://github.com/photopea/UPNG.js (MIT License)\n\n\nvar UPNG = {};\n\nUPNG.toRGBA8 = function (out) {\n  var w = out.width,\n      h = out.height;\n  if (out.tabs.acTL == null) return [UPNG.toRGBA8.decodeImage(out.data, w, h, out).buffer];\n  var frms = [];\n  if (out.frames[0].data == null) out.frames[0].data = out.data;\n  var len = w * h * 4,\n      img = new Uint8Array(len),\n      empty = new Uint8Array(len),\n      prev = new Uint8Array(len);\n\n  for (let i = 0; i < out.frames.length; i++) {\n    var frm = out.frames[i];\n    var fx = frm.rect.x,\n        fy = frm.rect.y,\n        fw = frm.rect.width,\n        fh = frm.rect.height;\n    var fdata = UPNG.toRGBA8.decodeImage(frm.data, fw, fh, out);\n    if (i != 0) for (let j = 0; j < len; j++) prev[j] = img[j];\n    if (frm.blend == 0) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 0);else if (frm.blend == 1) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 1);\n    frms.push(img.buffer.slice(0));\n\n    if (frm.dispose == 0) ; else if (frm.dispose == 1) UPNG._copyTile(empty, fw, fh, img, w, h, fx, fy, 0);else if (frm.dispose == 2) for (let j = 0; j < len; j++) img[j] = prev[j];\n  }\n\n  return frms;\n};\n\nUPNG.toRGBA8.decodeImage = function (data, w, h, out) {\n  var area = w * h,\n      bpp = UPNG.decode._getBPP(out);\n\n  var bpl = Math.ceil(w * bpp / 8); // bytes per line\n\n  var bf = new Uint8Array(area * 4),\n      bf32 = new Uint32Array(bf.buffer);\n  var ctype = out.ctype,\n      depth = out.depth;\n  var rs = UPNG._bin.readUshort;\n\n  if (ctype == 6) {\n    // RGB + alpha\n    var qarea = area << 2;\n    if (depth == 8) for (let i = 0; i < qarea; i += 4) {\n      bf[i] = data[i];\n      bf[i + 1] = data[i + 1];\n      bf[i + 2] = data[i + 2];\n      bf[i + 3] = data[i + 3];\n    }\n    if (depth == 16) for (let i = 0; i < qarea; i++) {\n      bf[i] = data[i << 1];\n    }\n  } else if (ctype == 2) {\n    // RGB\n    var ts = out.tabs['tRNS'];\n\n    if (ts == null) {\n      if (depth == 8) for (let i = 0; i < area; i++) {\n        var ti = i * 3;\n        bf32[i] = 255 << 24 | data[ti + 2] << 16 | data[ti + 1] << 8 | data[ti];\n      }\n      if (depth == 16) for (let i = 0; i < area; i++) {\n        var ti = i * 6;\n        bf32[i] = 255 << 24 | data[ti + 4] << 16 | data[ti + 2] << 8 | data[ti];\n      }\n    } else {\n      var tr = ts[0],\n          tg = ts[1],\n          tb = ts[2];\n      if (depth == 8) for (let i = 0; i < area; i++) {\n        var qi = i << 2,\n            ti = i * 3;\n        bf32[i] = 255 << 24 | data[ti + 2] << 16 | data[ti + 1] << 8 | data[ti];\n        if (data[ti] == tr && data[ti + 1] == tg && data[ti + 2] == tb) bf[qi + 3] = 0;\n      }\n      if (depth == 16) for (let i = 0; i < area; i++) {\n        var qi = i << 2,\n            ti = i * 6;\n        bf32[i] = 255 << 24 | data[ti + 4] << 16 | data[ti + 2] << 8 | data[ti];\n        if (rs(data, ti) == tr && rs(data, ti + 2) == tg && rs(data, ti + 4) == tb) bf[qi + 3] = 0;\n      }\n    }\n  } else if (ctype == 3) {\n    // palette\n    var p = out.tabs['PLTE'],\n        ap = out.tabs['tRNS'],\n        tl = ap ? ap.length : 0; //console.log(p, ap);\n\n    if (depth == 1) for (let y = 0; y < h; y++) {\n      var s0 = y * bpl,\n          t0 = y * w;\n\n      for (let i = 0; i < w; i++) {\n        var qi = t0 + i << 2,\n            j = data[s0 + (i >> 3)] >> 7 - ((i & 7) << 0) & 1,\n            cj = 3 * j;\n        bf[qi] = p[cj];\n        bf[qi + 1] = p[cj + 1];\n        bf[qi + 2] = p[cj + 2];\n        bf[qi + 3] = j < tl ? ap[j] : 255;\n      }\n    }\n    if (depth == 2) for (let y = 0; y < h; y++) {\n      var s0 = y * bpl,\n          t0 = y * w;\n\n      for (let i = 0; i < w; i++) {\n        var qi = t0 + i << 2,\n            j = data[s0 + (i >> 2)] >> 6 - ((i & 3) << 1) & 3,\n            cj = 3 * j;\n        bf[qi] = p[cj];\n        bf[qi + 1] = p[cj + 1];\n        bf[qi + 2] = p[cj + 2];\n        bf[qi + 3] = j < tl ? ap[j] : 255;\n      }\n    }\n    if (depth == 4) for (let y = 0; y < h; y++) {\n      var s0 = y * bpl,\n          t0 = y * w;\n\n      for (let i = 0; i < w; i++) {\n        var qi = t0 + i << 2,\n            j = data[s0 + (i >> 1)] >> 4 - ((i & 1) << 2) & 15,\n            cj = 3 * j;\n        bf[qi] = p[cj];\n        bf[qi + 1] = p[cj + 1];\n        bf[qi + 2] = p[cj + 2];\n        bf[qi + 3] = j < tl ? ap[j] : 255;\n      }\n    }\n    if (depth == 8) for (let i = 0; i < area; i++) {\n      var qi = i << 2,\n          j = data[i],\n          cj = 3 * j;\n      bf[qi] = p[cj];\n      bf[qi + 1] = p[cj + 1];\n      bf[qi + 2] = p[cj + 2];\n      bf[qi + 3] = j < tl ? ap[j] : 255;\n    }\n  } else if (ctype == 4) {\n    // gray + alpha\n    if (depth == 8) for (let i = 0; i < area; i++) {\n      var qi = i << 2,\n          di = i << 1,\n          gr = data[di];\n      bf[qi] = gr;\n      bf[qi + 1] = gr;\n      bf[qi + 2] = gr;\n      bf[qi + 3] = data[di + 1];\n    }\n    if (depth == 16) for (let i = 0; i < area; i++) {\n      var qi = i << 2,\n          di = i << 2,\n          gr = data[di];\n      bf[qi] = gr;\n      bf[qi + 1] = gr;\n      bf[qi + 2] = gr;\n      bf[qi + 3] = data[di + 2];\n    }\n  } else if (ctype == 0) {\n    // gray\n    var tr = out.tabs['tRNS'] ? out.tabs['tRNS'] : -1;\n\n    for (let y = 0; y < h; y++) {\n      var off = y * bpl,\n          to = y * w;\n      if (depth == 1) for (let x = 0; x < w; x++) {\n        var gr = 255 * (data[off + (x >>> 3)] >>> 7 - (x & 7) & 1),\n            al = gr == tr * 255 ? 0 : 255;\n        bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n      } else if (depth == 2) for (let x = 0; x < w; x++) {\n        var gr = 85 * (data[off + (x >>> 2)] >>> 6 - ((x & 3) << 1) & 3),\n            al = gr == tr * 85 ? 0 : 255;\n        bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n      } else if (depth == 4) for (let x = 0; x < w; x++) {\n        var gr = 17 * (data[off + (x >>> 1)] >>> 4 - ((x & 1) << 2) & 15),\n            al = gr == tr * 17 ? 0 : 255;\n        bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n      } else if (depth == 8) for (let x = 0; x < w; x++) {\n        var gr = data[off + x],\n            al = gr == tr ? 0 : 255;\n        bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n      } else if (depth == 16) for (let x = 0; x < w; x++) {\n        var gr = data[off + (x << 1)],\n            al = rs(data, off + (x << i)) == tr ? 0 : 255;\n        bf32[to + x] = al << 24 | gr << 16 | gr << 8 | gr;\n      }\n    }\n  } //console.log(Date.now()-time);\n\n\n  return bf;\n};\n\nUPNG.decode = function (buff) {\n  var data = new Uint8Array(buff),\n      offset = 8,\n      bin = UPNG._bin,\n      rUs = bin.readUshort,\n      rUi = bin.readUint;\n  var out = {\n    tabs: {},\n    frames: []\n  };\n  var dd = new Uint8Array(data.length),\n      doff = 0; // put all IDAT data into it\n\n  var fd,\n      foff = 0; // frames\n\n  var mgck = [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a];\n\n  for (let i = 0; i < 8; i++) if (data[i] != mgck[i]) throw 'The input is not a PNG file!';\n\n  while (offset < data.length) {\n    var len = bin.readUint(data, offset);\n    offset += 4;\n    var type = bin.readASCII(data, offset, 4);\n    offset += 4; //console.log(type,len);\n\n    if (type == 'IHDR') {\n      UPNG.decode._IHDR(data, offset, out);\n    } else if (type == 'CgBI') {\n      out.tabs[type] = data.slice(offset, offset + 4);\n    } else if (type == 'IDAT') {\n      for (let i = 0; i < len; i++) dd[doff + i] = data[offset + i];\n\n      doff += len;\n    } else if (type == 'acTL') {\n      out.tabs[type] = {\n        num_frames: rUi(data, offset),\n        num_plays: rUi(data, offset + 4)\n      };\n      fd = new Uint8Array(data.length);\n    } else if (type == 'fcTL') {\n      if (foff != 0) {\n        var fr = out.frames[out.frames.length - 1];\n        fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n        foff = 0;\n      }\n\n      var rct = {\n        x: rUi(data, offset + 12),\n        y: rUi(data, offset + 16),\n        width: rUi(data, offset + 4),\n        height: rUi(data, offset + 8)\n      };\n      var del = rUs(data, offset + 22);\n      del = rUs(data, offset + 20) / (del == 0 ? 100 : del);\n      var frm = {\n        rect: rct,\n        delay: Math.round(del * 1000),\n        dispose: data[offset + 24],\n        blend: data[offset + 25]\n      }; //console.log(frm);\n\n      out.frames.push(frm);\n    } else if (type == 'fdAT') {\n      for (let i = 0; i < len - 4; i++) fd[foff + i] = data[offset + i + 4];\n\n      foff += len - 4;\n    } else if (type == 'pHYs') {\n      out.tabs[type] = [bin.readUint(data, offset), bin.readUint(data, offset + 4), data[offset + 8]];\n    } else if (type == 'cHRM') {\n      out.tabs[type] = [];\n\n      for (let i = 0; i < 8; i++) out.tabs[type].push(bin.readUint(data, offset + i * 4));\n    } else if (type == 'tEXt' || type == 'zTXt') {\n      if (out.tabs[type] == null) out.tabs[type] = {};\n      var nz = bin.nextZero(data, offset);\n      var keyw = bin.readASCII(data, offset, nz - offset);\n      var text,\n          tl = offset + len - nz - 1;\n      if (type == 'tEXt') text = bin.readASCII(data, nz + 1, tl);else {\n        var bfr = UPNG.decode._inflate(data.slice(nz + 2, nz + 2 + tl));\n\n        text = bin.readUTF8(bfr, 0, bfr.length);\n      }\n      out.tabs[type][keyw] = text;\n    } else if (type == 'iTXt') {\n      if (out.tabs[type] == null) out.tabs[type] = {};\n      var nz = 0,\n          off = offset;\n      nz = bin.nextZero(data, off);\n      var keyw = bin.readASCII(data, off, nz - off);\n      off = nz + 1;\n      var cflag = data[off];\n      off += 2;\n      nz = bin.nextZero(data, off);\n      bin.readASCII(data, off, nz - off);\n      off = nz + 1;\n      nz = bin.nextZero(data, off);\n      bin.readUTF8(data, off, nz - off);\n      off = nz + 1;\n      var text,\n          tl = len - (off - offset);\n      if (cflag == 0) text = bin.readUTF8(data, off, tl);else {\n        var bfr = UPNG.decode._inflate(data.slice(off, off + tl));\n\n        text = bin.readUTF8(bfr, 0, bfr.length);\n      }\n      out.tabs[type][keyw] = text;\n    } else if (type == 'PLTE') {\n      out.tabs[type] = bin.readBytes(data, offset, len);\n    } else if (type == 'hIST') {\n      var pl = out.tabs['PLTE'].length / 3;\n      out.tabs[type] = [];\n\n      for (let i = 0; i < pl; i++) out.tabs[type].push(rUs(data, offset + i * 2));\n    } else if (type == 'tRNS') {\n      if (out.ctype == 3) out.tabs[type] = bin.readBytes(data, offset, len);else if (out.ctype == 0) out.tabs[type] = rUs(data, offset);else if (out.ctype == 2) out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)]; //else console.log(\"tRNS for unsupported color type\",out.ctype, len);\n    } else if (type == 'gAMA') out.tabs[type] = bin.readUint(data, offset) / 100000;else if (type == 'sRGB') out.tabs[type] = data[offset];else if (type == 'bKGD') {\n      if (out.ctype == 0 || out.ctype == 4) out.tabs[type] = [rUs(data, offset)];else if (out.ctype == 2 || out.ctype == 6) out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)];else if (out.ctype == 3) out.tabs[type] = data[offset];\n    } else if (type == 'IEND') {\n      break;\n    } //else {  log(\"unknown chunk type\", type, len);  }\n\n\n    offset += len;\n    bin.readUint(data, offset);\n    offset += 4;\n  }\n\n  if (foff != 0) {\n    var fr = out.frames[out.frames.length - 1];\n    fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n    foff = 0;\n  }\n\n  out.data = UPNG.decode._decompress(out, dd, out.width, out.height);\n  delete out.compress;\n  delete out.interlace;\n  delete out.filter;\n  return out;\n};\n\nUPNG.decode._decompress = function (out, dd, w, h) {\n  var bpp = UPNG.decode._getBPP(out),\n      bpl = Math.ceil(w * bpp / 8),\n      buff = new Uint8Array((bpl + 1 + out.interlace) * h);\n\n  if (out.tabs['CgBI']) dd = UPNG.inflateRaw(dd, buff);else dd = UPNG.decode._inflate(dd, buff);\n  if (out.interlace == 0) dd = UPNG.decode._filterZero(dd, out, 0, w, h);else if (out.interlace == 1) dd = UPNG.decode._readInterlace(dd, out);\n  return dd;\n};\n\nUPNG.decode._inflate = function (data, buff) {\n  var out = UPNG['inflateRaw'](new Uint8Array(data.buffer, 2, data.length - 6), buff);\n  return out;\n};\n\nUPNG.inflateRaw = function () {\n  var H = {};\n  H.H = {};\n\n  H.H.N = function (N, W) {\n    var R = Uint8Array,\n        i = 0,\n        m = 0,\n        J = 0,\n        h = 0,\n        Q = 0,\n        X = 0,\n        u = 0,\n        w = 0,\n        d = 0,\n        v,\n        C;\n    if (N[0] == 3 && N[1] == 0) return W ? W : new R(0);\n    var V = H.H,\n        n = V.b,\n        A = V.e,\n        l = V.R,\n        M = V.n,\n        I = V.A,\n        e = V.Z,\n        b = V.m,\n        Z = W == null;\n    if (Z) W = new R(N.length >>> 2 << 5);\n\n    while (i == 0) {\n      i = n(N, d, 1);\n      m = n(N, d + 1, 2);\n      d += 3;\n\n      if (m == 0) {\n        if ((d & 7) != 0) d += 8 - (d & 7);\n        var D = (d >>> 3) + 4,\n            q = N[D - 4] | N[D - 3] << 8;\n        if (Z) W = H.H.W(W, w + q);\n        W.set(new R(N.buffer, N.byteOffset + D, q), w);\n        d = D + q << 3;\n        w += q;\n        continue;\n      }\n\n      if (Z) W = H.H.W(W, w + (1 << 17));\n\n      if (m == 1) {\n        v = b.J;\n        C = b.h;\n        X = (1 << 9) - 1;\n        u = (1 << 5) - 1;\n      }\n\n      if (m == 2) {\n        J = A(N, d, 5) + 257;\n        h = A(N, d + 5, 5) + 1;\n        Q = A(N, d + 10, 4) + 4;\n        d += 14;\n        var j = 1;\n\n        for (let c = 0; c < 38; c += 2) {\n          b.Q[c] = 0;\n          b.Q[c + 1] = 0;\n        }\n\n        for (let c = 0; c < Q; c++) {\n          var K = A(N, d + c * 3, 3);\n          b.Q[(b.X[c] << 1) + 1] = K;\n          if (K > j) j = K;\n        }\n\n        d += 3 * Q;\n        M(b.Q, j);\n        I(b.Q, j, b.u);\n        v = b.w;\n        C = b.d;\n        d = l(b.u, (1 << j) - 1, J + h, N, d, b.v);\n        var r = V.V(b.v, 0, J, b.C);\n        X = (1 << r) - 1;\n        var S = V.V(b.v, J, h, b.D);\n        u = (1 << S) - 1;\n        M(b.C, r);\n        I(b.C, r, v);\n        M(b.D, S);\n        I(b.D, S, C);\n      }\n\n      while (!0) {\n        var T = v[e(N, d) & X];\n        d += T & 15;\n        var p = T >>> 4;\n\n        if (p >>> 8 == 0) {\n          W[w++] = p;\n        } else if (p == 256) {\n          break;\n        } else {\n          var z = w + p - 254;\n\n          if (p > 264) {\n            var _ = b.q[p - 257];\n            z = w + (_ >>> 3) + A(N, d, _ & 7);\n            d += _ & 7;\n          }\n\n          var $ = C[e(N, d) & u];\n          d += $ & 15;\n          var s = $ >>> 4,\n              Y = b.c[s],\n              a = (Y >>> 4) + n(N, d, Y & 15);\n          d += Y & 15;\n\n          while (w < z) {\n            W[w] = W[w++ - a];\n            W[w] = W[w++ - a];\n            W[w] = W[w++ - a];\n            W[w] = W[w++ - a];\n          }\n\n          w = z;\n        }\n      }\n    }\n\n    return W.length == w ? W : W.slice(0, w);\n  };\n\n  H.H.W = function (N, W) {\n    var R = N.length;\n    if (W <= R) return N;\n    var V = new Uint8Array(R << 1);\n    V.set(N, 0);\n    return V;\n  };\n\n  H.H.R = function (N, W, R, V, n, A) {\n    var l = H.H.e,\n        M = H.H.Z,\n        I = 0;\n\n    while (I < R) {\n      var e = N[M(V, n) & W];\n      n += e & 15;\n      var b = e >>> 4;\n\n      if (b <= 15) {\n        A[I] = b;\n        I++;\n      } else {\n        var Z = 0,\n            m = 0;\n\n        if (b == 16) {\n          m = 3 + l(V, n, 2);\n          n += 2;\n          Z = A[I - 1];\n        } else if (b == 17) {\n          m = 3 + l(V, n, 3);\n          n += 3;\n        } else if (b == 18) {\n          m = 11 + l(V, n, 7);\n          n += 7;\n        }\n\n        var J = I + m;\n\n        while (I < J) {\n          A[I] = Z;\n          I++;\n        }\n      }\n    }\n\n    return n;\n  };\n\n  H.H.V = function (N, W, R, V) {\n    var n = 0,\n        A = 0,\n        l = V.length >>> 1;\n\n    while (A < R) {\n      var M = N[A + W];\n      V[A << 1] = 0;\n      V[(A << 1) + 1] = M;\n      if (M > n) n = M;\n      A++;\n    }\n\n    while (A < l) {\n      V[A << 1] = 0;\n      V[(A << 1) + 1] = 0;\n      A++;\n    }\n\n    return n;\n  };\n\n  H.H.n = function (N, W) {\n    var R = H.H.m,\n        V = N.length,\n        n,\n        A,\n        l,\n        M,\n        I,\n        e = R.j;\n\n    for (let M = 0; M <= W; M++) e[M] = 0;\n\n    for (M = 1; M < V; M += 2) e[N[M]]++;\n\n    var b = R.K;\n    n = 0;\n    e[0] = 0;\n\n    for (A = 1; A <= W; A++) {\n      n = n + e[A - 1] << 1;\n      b[A] = n;\n    }\n\n    for (l = 0; l < V; l += 2) {\n      I = N[l + 1];\n\n      if (I != 0) {\n        N[l] = b[I];\n        b[I]++;\n      }\n    }\n  };\n\n  H.H.A = function (N, W, R) {\n    var V = N.length,\n        n = H.H.m,\n        A = n.r;\n\n    for (let l = 0; l < V; l += 2) if (N[l + 1] != 0) {\n      var M = l >> 1,\n          I = N[l + 1],\n          e = M << 4 | I,\n          b = W - I,\n          Z = N[l] << b,\n          m = Z + (1 << b);\n\n      while (Z != m) {\n        var J = A[Z] >>> 15 - W;\n        R[J] = e;\n        Z++;\n      }\n    }\n  };\n\n  H.H.l = function (N, W) {\n    var R = H.H.m.r,\n        V = 15 - W;\n\n    for (let n = 0; n < N.length; n += 2) {\n      var A = N[n] << W - N[n + 1];\n      N[n] = R[A] >>> V;\n    }\n  };\n\n  H.H.M = function (N, W, R) {\n    R = R << (W & 7);\n    var V = W >>> 3;\n    N[V] |= R;\n    N[V + 1] |= R >>> 8;\n  };\n\n  H.H.I = function (N, W, R) {\n    R = R << (W & 7);\n    var V = W >>> 3;\n    N[V] |= R;\n    N[V + 1] |= R >>> 8;\n    N[V + 2] |= R >>> 16;\n  };\n\n  H.H.e = function (N, W, R) {\n    return (N[W >>> 3] | N[(W >>> 3) + 1] << 8) >>> (W & 7) & (1 << R) - 1;\n  };\n\n  H.H.b = function (N, W, R) {\n    return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16) >>> (W & 7) & (1 << R) - 1;\n  };\n\n  H.H.Z = function (N, W) {\n    return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16) >>> (W & 7);\n  };\n\n  H.H.i = function (N, W) {\n    return (N[W >>> 3] | N[(W >>> 3) + 1] << 8 | N[(W >>> 3) + 2] << 16 | N[(W >>> 3) + 3] << 24) >>> (W & 7);\n  };\n\n  H.H.m = function () {\n    var N = Uint16Array,\n        W = Uint32Array;\n    return {\n      K: new N(16),\n      j: new N(16),\n      X: [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],\n      S: [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 999, 999, 999],\n      T: [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0],\n      q: new N(32),\n      p: [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 65535, 65535],\n      z: [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0],\n      c: new W(32),\n      J: new N(512),\n      _: [],\n      h: new N(32),\n      $: [],\n      w: new N(32768),\n      C: [],\n      v: [],\n      d: new N(32768),\n      D: [],\n      u: new N(512),\n      Q: [],\n      r: new N(1 << 15),\n      s: new W(286),\n      Y: new W(30),\n      a: new W(19),\n      t: new W(15e3),\n      k: new N(1 << 16),\n      g: new N(1 << 15)\n    };\n  }();\n\n  (function () {\n    var N = H.H.m,\n        W = 1 << 15;\n\n    for (let R = 0; R < W; R++) {\n      var V = R;\n      V = (V & 2863311530) >>> 1 | (V & 1431655765) << 1;\n      V = (V & 3435973836) >>> 2 | (V & 858993459) << 2;\n      V = (V & 4042322160) >>> 4 | (V & 252645135) << 4;\n      V = (V & 4278255360) >>> 8 | (V & 16711935) << 8;\n      N.r[R] = (V >>> 16 | V << 16) >>> 17;\n    }\n\n    function n(A, l, M) {\n      while (l-- != 0) A.push(0, M);\n    }\n\n    for (let R = 0; R < 32; R++) {\n      N.q[R] = N.S[R] << 3 | N.T[R];\n      N.c[R] = N.p[R] << 4 | N.z[R];\n    }\n\n    n(N._, 144, 8);\n    n(N._, 255 - 143, 9);\n    n(N._, 279 - 255, 7);\n    n(N._, 287 - 279, 8);\n    H.H.n(N._, 9);\n    H.H.A(N._, 9, N.J);\n    H.H.l(N._, 9);\n    n(N.$, 32, 5);\n    H.H.n(N.$, 5);\n    H.H.A(N.$, 5, N.h);\n    H.H.l(N.$, 5);\n    n(N.Q, 19, 0);\n    n(N.C, 286, 0);\n    n(N.D, 30, 0);\n    n(N.v, 320, 0);\n  })();\n\n  return H.H.N;\n}();\n\nUPNG.decode._readInterlace = function (data, out) {\n  var w = out.width,\n      h = out.height;\n\n  var bpp = UPNG.decode._getBPP(out),\n      cbpp = bpp >> 3,\n      bpl = Math.ceil(w * bpp / 8);\n\n  var img = new Uint8Array(h * bpl);\n  var di = 0;\n  var starting_row = [0, 0, 4, 0, 2, 0, 1];\n  var starting_col = [0, 4, 0, 2, 0, 1, 0];\n  var row_increment = [8, 8, 8, 4, 4, 2, 2];\n  var col_increment = [8, 8, 4, 4, 2, 2, 1];\n  var pass = 0;\n\n  while (pass < 7) {\n    var ri = row_increment[pass],\n        ci = col_increment[pass];\n    var sw = 0,\n        sh = 0;\n    var cr = starting_row[pass];\n\n    while (cr < h) {\n      cr += ri;\n      sh++;\n    }\n\n    var cc = starting_col[pass];\n\n    while (cc < w) {\n      cc += ci;\n      sw++;\n    }\n\n    var bpll = Math.ceil(sw * bpp / 8);\n\n    UPNG.decode._filterZero(data, out, di, sw, sh);\n\n    var y = 0,\n        row = starting_row[pass];\n\n    while (row < h) {\n      var col = starting_col[pass];\n      var cdi = di + y * bpll << 3;\n\n      while (col < w) {\n        if (bpp == 1) {\n          var val = data[cdi >> 3];\n          val = val >> 7 - (cdi & 7) & 1;\n          img[row * bpl + (col >> 3)] |= val << 7 - ((col & 7) << 0);\n        }\n\n        if (bpp == 2) {\n          var val = data[cdi >> 3];\n          val = val >> 6 - (cdi & 7) & 3;\n          img[row * bpl + (col >> 2)] |= val << 6 - ((col & 3) << 1);\n        }\n\n        if (bpp == 4) {\n          var val = data[cdi >> 3];\n          val = val >> 4 - (cdi & 7) & 15;\n          img[row * bpl + (col >> 1)] |= val << 4 - ((col & 1) << 2);\n        }\n\n        if (bpp >= 8) {\n          var ii = row * bpl + col * cbpp;\n\n          for (let j = 0; j < cbpp; j++) img[ii + j] = data[(cdi >> 3) + j];\n        }\n\n        cdi += bpp;\n        col += ci;\n      }\n\n      y++;\n      row += ri;\n    }\n\n    if (sw * sh != 0) di += sh * (1 + bpll);\n    pass = pass + 1;\n  }\n\n  return img;\n};\n\nUPNG.decode._getBPP = function (out) {\n  var noc = [1, null, 3, 1, 2, null, 4][out.ctype];\n  return noc * out.depth;\n};\n\nUPNG.decode._filterZero = function (data, out, off, w, h) {\n  var bpp = UPNG.decode._getBPP(out),\n      bpl = Math.ceil(w * bpp / 8),\n      paeth = UPNG.decode._paeth;\n\n  bpp = Math.ceil(bpp / 8);\n  var i = 0,\n      di = 1,\n      type = data[off],\n      x = 0;\n  if (type > 1) data[off] = [0, 0, 1][type - 2];\n  if (type == 3) for (x = bpp; x < bpl; x++) data[x + 1] = data[x + 1] + (data[x + 1 - bpp] >>> 1) & 255;\n\n  for (let y = 0; y < h; y++) {\n    i = off + y * bpl;\n    di = i + y + 1;\n    type = data[di - 1];\n    x = 0;\n    if (type == 0) for (; x < bpl; x++) data[i + x] = data[di + x];else if (type == 1) {\n      for (; x < bpp; x++) data[i + x] = data[di + x];\n\n      for (; x < bpl; x++) data[i + x] = data[di + x] + data[i + x - bpp];\n    } else if (type == 2) {\n      for (; x < bpl; x++) data[i + x] = data[di + x] + data[i + x - bpl];\n    } else if (type == 3) {\n      for (; x < bpp; x++) data[i + x] = data[di + x] + (data[i + x - bpl] >>> 1);\n\n      for (; x < bpl; x++) data[i + x] = data[di + x] + (data[i + x - bpl] + data[i + x - bpp] >>> 1);\n    } else {\n      for (; x < bpp; x++) data[i + x] = data[di + x] + paeth(0, data[i + x - bpl], 0);\n\n      for (; x < bpl; x++) data[i + x] = data[di + x] + paeth(data[i + x - bpp], data[i + x - bpl], data[i + x - bpp - bpl]);\n    }\n  }\n\n  return data;\n};\n\nUPNG.decode._paeth = function (a, b, c) {\n  var p = a + b - c,\n      pa = p - a,\n      pb = p - b,\n      pc = p - c;\n  if (pa * pa <= pb * pb && pa * pa <= pc * pc) return a;else if (pb * pb <= pc * pc) return b;\n  return c;\n};\n\nUPNG.decode._IHDR = function (data, offset, out) {\n  var bin = UPNG._bin;\n  out.width = bin.readUint(data, offset);\n  offset += 4;\n  out.height = bin.readUint(data, offset);\n  offset += 4;\n  out.depth = data[offset];\n  offset++;\n  out.ctype = data[offset];\n  offset++;\n  out.compress = data[offset];\n  offset++;\n  out.filter = data[offset];\n  offset++;\n  out.interlace = data[offset];\n  offset++;\n};\n\nUPNG._bin = {\n  nextZero: function (data, p) {\n    while (data[p] != 0) p++;\n\n    return p;\n  },\n  readUshort: function (buff, p) {\n    return buff[p] << 8 | buff[p + 1];\n  },\n  writeUshort: function (buff, p, n) {\n    buff[p] = n >> 8 & 255;\n    buff[p + 1] = n & 255;\n  },\n  readUint: function (buff, p) {\n    return buff[p] * (256 * 256 * 256) + (buff[p + 1] << 16 | buff[p + 2] << 8 | buff[p + 3]);\n  },\n  writeUint: function (buff, p, n) {\n    buff[p] = n >> 24 & 255;\n    buff[p + 1] = n >> 16 & 255;\n    buff[p + 2] = n >> 8 & 255;\n    buff[p + 3] = n & 255;\n  },\n  readASCII: function (buff, p, l) {\n    var s = '';\n\n    for (let i = 0; i < l; i++) s += String.fromCharCode(buff[p + i]);\n\n    return s;\n  },\n  writeASCII: function (data, p, s) {\n    for (let i = 0; i < s.length; i++) data[p + i] = s.charCodeAt(i);\n  },\n  readBytes: function (buff, p, l) {\n    var arr = [];\n\n    for (let i = 0; i < l; i++) arr.push(buff[p + i]);\n\n    return arr;\n  },\n  pad: function (n) {\n    return n.length < 2 ? '0' + n : n;\n  },\n  readUTF8: function (buff, p, l) {\n    var s = '',\n        ns;\n\n    for (let i = 0; i < l; i++) s += '%' + UPNG._bin.pad(buff[p + i].toString(16));\n\n    try {\n      ns = decodeURIComponent(s);\n    } catch (e) {\n      return UPNG._bin.readASCII(buff, p, l);\n    }\n\n    return ns;\n  }\n};\n\nUPNG._copyTile = function (sb, sw, sh, tb, tw, th, xoff, yoff, mode) {\n  var w = Math.min(sw, tw),\n      h = Math.min(sh, th);\n  var si = 0,\n      ti = 0;\n\n  for (let y = 0; y < h; y++) for (let x = 0; x < w; x++) {\n    if (xoff >= 0 && yoff >= 0) {\n      si = y * sw + x << 2;\n      ti = (yoff + y) * tw + xoff + x << 2;\n    } else {\n      si = (-yoff + y) * sw - xoff + x << 2;\n      ti = y * tw + x << 2;\n    }\n\n    if (mode == 0) {\n      tb[ti] = sb[si];\n      tb[ti + 1] = sb[si + 1];\n      tb[ti + 2] = sb[si + 2];\n      tb[ti + 3] = sb[si + 3];\n    } else if (mode == 1) {\n      var fa = sb[si + 3] * (1 / 255),\n          fr = sb[si] * fa,\n          fg = sb[si + 1] * fa,\n          fb = sb[si + 2] * fa;\n      var ba = tb[ti + 3] * (1 / 255),\n          br = tb[ti] * ba,\n          bg = tb[ti + 1] * ba,\n          bb = tb[ti + 2] * ba;\n      var ifa = 1 - fa,\n          oa = fa + ba * ifa,\n          ioa = oa == 0 ? 0 : 1 / oa;\n      tb[ti + 3] = 255 * oa;\n      tb[ti + 0] = (fr + br * ifa) * ioa;\n      tb[ti + 1] = (fg + bg * ifa) * ioa;\n      tb[ti + 2] = (fb + bb * ifa) * ioa;\n    } else if (mode == 2) {\n      // copy only differences, otherwise zero\n      var fa = sb[si + 3],\n          fr = sb[si],\n          fg = sb[si + 1],\n          fb = sb[si + 2];\n      var ba = tb[ti + 3],\n          br = tb[ti],\n          bg = tb[ti + 1],\n          bb = tb[ti + 2];\n\n      if (fa == ba && fr == br && fg == bg && fb == bb) {\n        tb[ti] = 0;\n        tb[ti + 1] = 0;\n        tb[ti + 2] = 0;\n        tb[ti + 3] = 0;\n      } else {\n        tb[ti] = fr;\n        tb[ti + 1] = fg;\n        tb[ti + 2] = fb;\n        tb[ti + 3] = fa;\n      }\n    } else if (mode == 3) {\n      // check if can be blended\n      var fa = sb[si + 3],\n          fr = sb[si],\n          fg = sb[si + 1],\n          fb = sb[si + 2];\n      var ba = tb[ti + 3],\n          br = tb[ti],\n          bg = tb[ti + 1],\n          bb = tb[ti + 2];\n      if (fa == ba && fr == br && fg == bg && fb == bb) continue; //if(fa!=255 && ba!=0) return false;\n\n      if (fa < 220 && ba > 20) return false;\n    }\n  }\n\n  return true;\n};\n\nexport { RGBMLoader };\n"]},"metadata":{},"sourceType":"module"}