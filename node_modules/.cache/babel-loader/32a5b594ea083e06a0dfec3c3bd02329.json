{"ast":null,"code":"import _classCallCheck from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { EventDispatcher, Quaternion, Vector3 } from 'three';\n\nfunction contextmenu(event) {\n  event.preventDefault();\n}\n\nvar FlyControls = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(FlyControls, _EventDispatcher);\n\n  var _super = _createSuper(FlyControls);\n\n  function FlyControls(object, domElement) {\n    var _this;\n\n    _classCallCheck(this, FlyControls);\n\n    _this = _super.call(this);\n\n    _defineProperty(_assertThisInitialized(_this), \"object\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"domElement\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"movementSpeed\", 1.0);\n\n    _defineProperty(_assertThisInitialized(_this), \"rollSpeed\", 0.005);\n\n    _defineProperty(_assertThisInitialized(_this), \"dragToLook\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"autoForward\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"changeEvent\", {\n      type: 'change'\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"EPS\", 0.000001);\n\n    _defineProperty(_assertThisInitialized(_this), \"tmpQuaternion\", new Quaternion());\n\n    _defineProperty(_assertThisInitialized(_this), \"mouseStatus\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"movementSpeedMultiplier\", 1);\n\n    _defineProperty(_assertThisInitialized(_this), \"moveState\", {\n      up: 0,\n      down: 0,\n      left: 0,\n      right: 0,\n      forward: 0,\n      back: 0,\n      pitchUp: 0,\n      pitchDown: 0,\n      yawLeft: 0,\n      yawRight: 0,\n      rollLeft: 0,\n      rollRight: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"moveVector\", new Vector3(0, 0, 0));\n\n    _defineProperty(_assertThisInitialized(_this), \"rotationVector\", new Vector3(0, 0, 0));\n\n    _defineProperty(_assertThisInitialized(_this), \"keydown\", function (event) {\n      if (event.altKey) {\n        return;\n      } //event.preventDefault();\n\n\n      switch (event.code) {\n        case 'ShiftLeft':\n        case 'ShiftRight':\n          _this.movementSpeedMultiplier = 0.1;\n          break;\n\n        case 'KeyW':\n          _this.moveState.forward = 1;\n          break;\n\n        case 'KeyS':\n          _this.moveState.back = 1;\n          break;\n\n        case 'KeyA':\n          _this.moveState.left = 1;\n          break;\n\n        case 'KeyD':\n          _this.moveState.right = 1;\n          break;\n\n        case 'KeyR':\n          _this.moveState.up = 1;\n          break;\n\n        case 'KeyF':\n          _this.moveState.down = 1;\n          break;\n\n        case 'ArrowUp':\n          _this.moveState.pitchUp = 1;\n          break;\n\n        case 'ArrowDown':\n          _this.moveState.pitchDown = 1;\n          break;\n\n        case 'ArrowLeft':\n          _this.moveState.yawLeft = 1;\n          break;\n\n        case 'ArrowRight':\n          _this.moveState.yawRight = 1;\n          break;\n\n        case 'KeyQ':\n          _this.moveState.rollLeft = 1;\n          break;\n\n        case 'KeyE':\n          _this.moveState.rollRight = 1;\n          break;\n      }\n\n      _this.updateMovementVector();\n\n      _this.updateRotationVector();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"keyup\", function (event) {\n      switch (event.code) {\n        case 'ShiftLeft':\n        case 'ShiftRight':\n          _this.movementSpeedMultiplier = 1;\n          break;\n\n        case 'KeyW':\n          _this.moveState.forward = 0;\n          break;\n\n        case 'KeyS':\n          _this.moveState.back = 0;\n          break;\n\n        case 'KeyA':\n          _this.moveState.left = 0;\n          break;\n\n        case 'KeyD':\n          _this.moveState.right = 0;\n          break;\n\n        case 'KeyR':\n          _this.moveState.up = 0;\n          break;\n\n        case 'KeyF':\n          _this.moveState.down = 0;\n          break;\n\n        case 'ArrowUp':\n          _this.moveState.pitchUp = 0;\n          break;\n\n        case 'ArrowDown':\n          _this.moveState.pitchDown = 0;\n          break;\n\n        case 'ArrowLeft':\n          _this.moveState.yawLeft = 0;\n          break;\n\n        case 'ArrowRight':\n          _this.moveState.yawRight = 0;\n          break;\n\n        case 'KeyQ':\n          _this.moveState.rollLeft = 0;\n          break;\n\n        case 'KeyE':\n          _this.moveState.rollRight = 0;\n          break;\n      }\n\n      _this.updateMovementVector();\n\n      _this.updateRotationVector();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mousedown\", function (event) {\n      if (_this.domElement !== document && !(_this.domElement instanceof Document)) {\n        _this.domElement.focus();\n      }\n\n      event.preventDefault();\n\n      if (_this.dragToLook) {\n        _this.mouseStatus++;\n      } else {\n        switch (event.button) {\n          case 0:\n            _this.moveState.forward = 1;\n            break;\n\n          case 2:\n            _this.moveState.back = 1;\n            break;\n        }\n\n        _this.updateMovementVector();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mousemove\", function (event) {\n      if (!_this.dragToLook || _this.mouseStatus > 0) {\n        var container = _this.getContainerDimensions();\n\n        var halfWidth = container.size[0] / 2;\n        var halfHeight = container.size[1] / 2;\n        _this.moveState.yawLeft = -(event.pageX - container.offset[0] - halfWidth) / halfWidth;\n        _this.moveState.pitchDown = (event.pageY - container.offset[1] - halfHeight) / halfHeight;\n\n        _this.updateRotationVector();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"mouseup\", function (event) {\n      event.preventDefault();\n\n      if (_this.dragToLook) {\n        _this.mouseStatus--;\n        _this.moveState.yawLeft = _this.moveState.pitchDown = 0;\n      } else {\n        switch (event.button) {\n          case 0:\n            _this.moveState.forward = 0;\n            break;\n\n          case 2:\n            _this.moveState.back = 0;\n            break;\n        }\n\n        _this.updateMovementVector();\n      }\n\n      _this.updateRotationVector();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"lastQuaternion\", new Quaternion());\n\n    _defineProperty(_assertThisInitialized(_this), \"lastPosition\", new Vector3());\n\n    _defineProperty(_assertThisInitialized(_this), \"update\", function (delta) {\n      var moveMult = delta * _this.movementSpeed;\n      var rotMult = delta * _this.rollSpeed;\n\n      _this.object.translateX(_this.moveVector.x * moveMult);\n\n      _this.object.translateY(_this.moveVector.y * moveMult);\n\n      _this.object.translateZ(_this.moveVector.z * moveMult);\n\n      _this.tmpQuaternion.set(_this.rotationVector.x * rotMult, _this.rotationVector.y * rotMult, _this.rotationVector.z * rotMult, 1).normalize();\n\n      _this.object.quaternion.multiply(_this.tmpQuaternion);\n\n      if (_this.lastPosition.distanceToSquared(_this.object.position) > _this.EPS || 8 * (1 - _this.lastQuaternion.dot(_this.object.quaternion)) > _this.EPS) {\n        _this.dispatchEvent(_this.changeEvent);\n\n        _this.lastQuaternion.copy(_this.object.quaternion);\n\n        _this.lastPosition.copy(_this.object.position);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateMovementVector\", function () {\n      var forward = _this.moveState.forward || _this.autoForward && !_this.moveState.back ? 1 : 0;\n      _this.moveVector.x = -_this.moveState.left + _this.moveState.right;\n      _this.moveVector.y = -_this.moveState.down + _this.moveState.up;\n      _this.moveVector.z = -forward + _this.moveState.back;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateRotationVector\", function () {\n      _this.rotationVector.x = -_this.moveState.pitchDown + _this.moveState.pitchUp;\n      _this.rotationVector.y = -_this.moveState.yawRight + _this.moveState.yawLeft;\n      _this.rotationVector.z = -_this.moveState.rollRight + _this.moveState.rollLeft;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getContainerDimensions\", function () {\n      if (_this.domElement != document && !(_this.domElement instanceof Document)) {\n        return {\n          size: [_this.domElement.offsetWidth, _this.domElement.offsetHeight],\n          offset: [_this.domElement.offsetLeft, _this.domElement.offsetTop]\n        };\n      } else {\n        return {\n          size: [window.innerWidth, window.innerHeight],\n          offset: [0, 0]\n        };\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"dispose\", function () {\n      _this.domElement.removeEventListener('contextmenu', contextmenu);\n\n      _this.domElement.removeEventListener('mousemove', _this.mousemove);\n\n      _this.domElement.removeEventListener('mousedown', _this.mousedown);\n\n      _this.domElement.removeEventListener('mouseup', _this.mouseup);\n\n      window.removeEventListener('keydown', _this.keydown);\n      window.removeEventListener('keyup', _this.keyup);\n    });\n\n    if (domElement === undefined) {\n      console.warn('THREE.FlyControls: The second parameter \"domElement\" is now mandatory.');\n      domElement = document;\n    }\n\n    _this.object = object;\n    _this.domElement = domElement;\n\n    if (domElement && !(domElement instanceof Document)) {\n      domElement.setAttribute('tabindex', -1);\n    }\n\n    _this.domElement.addEventListener('contextmenu', contextmenu);\n\n    _this.domElement.addEventListener('mousemove', _this.mousemove);\n\n    _this.domElement.addEventListener('mousedown', _this.mousedown);\n\n    _this.domElement.addEventListener('mouseup', _this.mouseup);\n\n    window.addEventListener('keydown', _this.keydown);\n    window.addEventListener('keyup', _this.keyup);\n\n    _this.updateMovementVector();\n\n    _this.updateRotationVector();\n\n    return _this;\n  }\n\n  return FlyControls;\n}(EventDispatcher);\n\nexport { FlyControls };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/controls/FlyControls.js"],"names":["_defineProperty","EventDispatcher","Quaternion","Vector3","contextmenu","event","preventDefault","FlyControls","object","domElement","type","up","down","left","right","forward","back","pitchUp","pitchDown","yawLeft","yawRight","rollLeft","rollRight","altKey","code","movementSpeedMultiplier","moveState","updateMovementVector","updateRotationVector","document","Document","focus","dragToLook","mouseStatus","button","container","getContainerDimensions","halfWidth","size","halfHeight","pageX","offset","pageY","delta","moveMult","movementSpeed","rotMult","rollSpeed","translateX","moveVector","x","translateY","y","translateZ","z","tmpQuaternion","set","rotationVector","normalize","quaternion","multiply","lastPosition","distanceToSquared","position","EPS","lastQuaternion","dot","dispatchEvent","changeEvent","copy","autoForward","offsetWidth","offsetHeight","offsetLeft","offsetTop","window","innerWidth","innerHeight","removeEventListener","mousemove","mousedown","mouseup","keydown","keyup","undefined","console","warn","setAttribute","addEventListener"],"mappings":"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","sourcesContent":["import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { EventDispatcher, Quaternion, Vector3 } from 'three';\n\nfunction contextmenu(event) {\n  event.preventDefault();\n}\n\nclass FlyControls extends EventDispatcher {\n  constructor(object, domElement) {\n    super();\n\n    _defineProperty(this, \"object\", void 0);\n\n    _defineProperty(this, \"domElement\", void 0);\n\n    _defineProperty(this, \"movementSpeed\", 1.0);\n\n    _defineProperty(this, \"rollSpeed\", 0.005);\n\n    _defineProperty(this, \"dragToLook\", false);\n\n    _defineProperty(this, \"autoForward\", false);\n\n    _defineProperty(this, \"changeEvent\", {\n      type: 'change'\n    });\n\n    _defineProperty(this, \"EPS\", 0.000001);\n\n    _defineProperty(this, \"tmpQuaternion\", new Quaternion());\n\n    _defineProperty(this, \"mouseStatus\", 0);\n\n    _defineProperty(this, \"movementSpeedMultiplier\", 1);\n\n    _defineProperty(this, \"moveState\", {\n      up: 0,\n      down: 0,\n      left: 0,\n      right: 0,\n      forward: 0,\n      back: 0,\n      pitchUp: 0,\n      pitchDown: 0,\n      yawLeft: 0,\n      yawRight: 0,\n      rollLeft: 0,\n      rollRight: 0\n    });\n\n    _defineProperty(this, \"moveVector\", new Vector3(0, 0, 0));\n\n    _defineProperty(this, \"rotationVector\", new Vector3(0, 0, 0));\n\n    _defineProperty(this, \"keydown\", event => {\n      if (event.altKey) {\n        return;\n      } //event.preventDefault();\n\n\n      switch (event.code) {\n        case 'ShiftLeft':\n        case 'ShiftRight':\n          this.movementSpeedMultiplier = 0.1;\n          break;\n\n        case 'KeyW':\n          this.moveState.forward = 1;\n          break;\n\n        case 'KeyS':\n          this.moveState.back = 1;\n          break;\n\n        case 'KeyA':\n          this.moveState.left = 1;\n          break;\n\n        case 'KeyD':\n          this.moveState.right = 1;\n          break;\n\n        case 'KeyR':\n          this.moveState.up = 1;\n          break;\n\n        case 'KeyF':\n          this.moveState.down = 1;\n          break;\n\n        case 'ArrowUp':\n          this.moveState.pitchUp = 1;\n          break;\n\n        case 'ArrowDown':\n          this.moveState.pitchDown = 1;\n          break;\n\n        case 'ArrowLeft':\n          this.moveState.yawLeft = 1;\n          break;\n\n        case 'ArrowRight':\n          this.moveState.yawRight = 1;\n          break;\n\n        case 'KeyQ':\n          this.moveState.rollLeft = 1;\n          break;\n\n        case 'KeyE':\n          this.moveState.rollRight = 1;\n          break;\n      }\n\n      this.updateMovementVector();\n      this.updateRotationVector();\n    });\n\n    _defineProperty(this, \"keyup\", event => {\n      switch (event.code) {\n        case 'ShiftLeft':\n        case 'ShiftRight':\n          this.movementSpeedMultiplier = 1;\n          break;\n\n        case 'KeyW':\n          this.moveState.forward = 0;\n          break;\n\n        case 'KeyS':\n          this.moveState.back = 0;\n          break;\n\n        case 'KeyA':\n          this.moveState.left = 0;\n          break;\n\n        case 'KeyD':\n          this.moveState.right = 0;\n          break;\n\n        case 'KeyR':\n          this.moveState.up = 0;\n          break;\n\n        case 'KeyF':\n          this.moveState.down = 0;\n          break;\n\n        case 'ArrowUp':\n          this.moveState.pitchUp = 0;\n          break;\n\n        case 'ArrowDown':\n          this.moveState.pitchDown = 0;\n          break;\n\n        case 'ArrowLeft':\n          this.moveState.yawLeft = 0;\n          break;\n\n        case 'ArrowRight':\n          this.moveState.yawRight = 0;\n          break;\n\n        case 'KeyQ':\n          this.moveState.rollLeft = 0;\n          break;\n\n        case 'KeyE':\n          this.moveState.rollRight = 0;\n          break;\n      }\n\n      this.updateMovementVector();\n      this.updateRotationVector();\n    });\n\n    _defineProperty(this, \"mousedown\", event => {\n      if (this.domElement !== document && !(this.domElement instanceof Document)) {\n        this.domElement.focus();\n      }\n\n      event.preventDefault();\n\n      if (this.dragToLook) {\n        this.mouseStatus++;\n      } else {\n        switch (event.button) {\n          case 0:\n            this.moveState.forward = 1;\n            break;\n\n          case 2:\n            this.moveState.back = 1;\n            break;\n        }\n\n        this.updateMovementVector();\n      }\n    });\n\n    _defineProperty(this, \"mousemove\", event => {\n      if (!this.dragToLook || this.mouseStatus > 0) {\n        const container = this.getContainerDimensions();\n        const halfWidth = container.size[0] / 2;\n        const halfHeight = container.size[1] / 2;\n        this.moveState.yawLeft = -(event.pageX - container.offset[0] - halfWidth) / halfWidth;\n        this.moveState.pitchDown = (event.pageY - container.offset[1] - halfHeight) / halfHeight;\n        this.updateRotationVector();\n      }\n    });\n\n    _defineProperty(this, \"mouseup\", event => {\n      event.preventDefault();\n\n      if (this.dragToLook) {\n        this.mouseStatus--;\n        this.moveState.yawLeft = this.moveState.pitchDown = 0;\n      } else {\n        switch (event.button) {\n          case 0:\n            this.moveState.forward = 0;\n            break;\n\n          case 2:\n            this.moveState.back = 0;\n            break;\n        }\n\n        this.updateMovementVector();\n      }\n\n      this.updateRotationVector();\n    });\n\n    _defineProperty(this, \"lastQuaternion\", new Quaternion());\n\n    _defineProperty(this, \"lastPosition\", new Vector3());\n\n    _defineProperty(this, \"update\", delta => {\n      const moveMult = delta * this.movementSpeed;\n      const rotMult = delta * this.rollSpeed;\n      this.object.translateX(this.moveVector.x * moveMult);\n      this.object.translateY(this.moveVector.y * moveMult);\n      this.object.translateZ(this.moveVector.z * moveMult);\n      this.tmpQuaternion.set(this.rotationVector.x * rotMult, this.rotationVector.y * rotMult, this.rotationVector.z * rotMult, 1).normalize();\n      this.object.quaternion.multiply(this.tmpQuaternion);\n\n      if (this.lastPosition.distanceToSquared(this.object.position) > this.EPS || 8 * (1 - this.lastQuaternion.dot(this.object.quaternion)) > this.EPS) {\n        this.dispatchEvent(this.changeEvent);\n        this.lastQuaternion.copy(this.object.quaternion);\n        this.lastPosition.copy(this.object.position);\n      }\n    });\n\n    _defineProperty(this, \"updateMovementVector\", () => {\n      const forward = this.moveState.forward || this.autoForward && !this.moveState.back ? 1 : 0;\n      this.moveVector.x = -this.moveState.left + this.moveState.right;\n      this.moveVector.y = -this.moveState.down + this.moveState.up;\n      this.moveVector.z = -forward + this.moveState.back;\n    });\n\n    _defineProperty(this, \"updateRotationVector\", () => {\n      this.rotationVector.x = -this.moveState.pitchDown + this.moveState.pitchUp;\n      this.rotationVector.y = -this.moveState.yawRight + this.moveState.yawLeft;\n      this.rotationVector.z = -this.moveState.rollRight + this.moveState.rollLeft;\n    });\n\n    _defineProperty(this, \"getContainerDimensions\", () => {\n      if (this.domElement != document && !(this.domElement instanceof Document)) {\n        return {\n          size: [this.domElement.offsetWidth, this.domElement.offsetHeight],\n          offset: [this.domElement.offsetLeft, this.domElement.offsetTop]\n        };\n      } else {\n        return {\n          size: [window.innerWidth, window.innerHeight],\n          offset: [0, 0]\n        };\n      }\n    });\n\n    _defineProperty(this, \"dispose\", () => {\n      this.domElement.removeEventListener('contextmenu', contextmenu);\n      this.domElement.removeEventListener('mousemove', this.mousemove);\n      this.domElement.removeEventListener('mousedown', this.mousedown);\n      this.domElement.removeEventListener('mouseup', this.mouseup);\n      window.removeEventListener('keydown', this.keydown);\n      window.removeEventListener('keyup', this.keyup);\n    });\n\n    if (domElement === undefined) {\n      console.warn('THREE.FlyControls: The second parameter \"domElement\" is now mandatory.');\n      domElement = document;\n    }\n\n    this.object = object;\n    this.domElement = domElement;\n\n    if (domElement && !(domElement instanceof Document)) {\n      domElement.setAttribute('tabindex', -1);\n    }\n\n    this.domElement.addEventListener('contextmenu', contextmenu);\n    this.domElement.addEventListener('mousemove', this.mousemove);\n    this.domElement.addEventListener('mousedown', this.mousedown);\n    this.domElement.addEventListener('mouseup', this.mouseup);\n    window.addEventListener('keydown', this.keydown);\n    window.addEventListener('keyup', this.keyup);\n    this.updateMovementVector();\n    this.updateRotationVector();\n  }\n\n}\n\nexport { FlyControls };\n"]},"metadata":{},"sourceType":"module"}