{"ast":null,"code":"import { Vector3 } from 'three';\n\nvar Capsule = function () {\n  var _v1 = new Vector3();\n\n  var _v2 = new Vector3();\n\n  var _v3 = new Vector3();\n\n  var EPS = 1e-10;\n\n  function Capsule(start, end, radius) {\n    this.start = start == undefined ? new Vector3(0, 0, 0) : start;\n    this.end = end == undefined ? new Vector3(0, 1, 0) : end;\n    this.radius = radius == undefined ? 1 : radius;\n  }\n\n  Object.assign(Capsule.prototype, {\n    clone: function clone() {\n      return new Capsule(this.start.clone(), this.end.clone(), this.radius);\n    },\n    set: function set(start, end, radius) {\n      this.start.copy(start);\n      this.end.copy(end);\n      this.radius = radius;\n    },\n    copy: function copy(capsule) {\n      this.start.copy(capsule.start);\n      this.end.copy(capsule.end);\n      this.radius = capsule.radius;\n    },\n    getCenter: function getCenter(target) {\n      return target.copy(this.end).add(this.start).multiplyScalar(0.5);\n    },\n    translate: function translate(v) {\n      this.start.add(v);\n      this.end.add(v);\n    },\n    checkAABBAxis: function checkAABBAxis(p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius) {\n      return (minx - p1x < radius || minx - p2x < radius) && (p1x - maxx < radius || p2x - maxx < radius) && (miny - p1y < radius || miny - p2y < radius) && (p1y - maxy < radius || p2y - maxy < radius);\n    },\n    intersectsBox: function intersectsBox(box) {\n      return this.checkAABBAxis(this.start.x, this.start.y, this.end.x, this.end.y, box.min.x, box.max.x, box.min.y, box.max.y, this.radius) && this.checkAABBAxis(this.start.x, this.start.z, this.end.x, this.end.z, box.min.x, box.max.x, box.min.z, box.max.z, this.radius) && this.checkAABBAxis(this.start.y, this.start.z, this.end.y, this.end.z, box.min.y, box.max.y, box.min.z, box.max.z, this.radius);\n    },\n    lineLineMinimumPoints: function lineLineMinimumPoints(line1, line2) {\n      var r = _v1.copy(line1.end).sub(line1.start);\n\n      var s = _v2.copy(line2.end).sub(line2.start);\n\n      var w = _v3.copy(line2.start).sub(line1.start);\n\n      var a = r.dot(s),\n          b = r.dot(r),\n          c = s.dot(s),\n          d = s.dot(w),\n          e = r.dot(w);\n      var t1,\n          t2,\n          divisor = b * c - a * a;\n\n      if (Math.abs(divisor) < EPS) {\n        var d1 = -d / c;\n        var d2 = (a - d) / c;\n\n        if (Math.abs(d1 - 0.5) < Math.abs(d2 - 0.5)) {\n          t1 = 0;\n          t2 = d1;\n        } else {\n          t1 = 1;\n          t2 = d2;\n        }\n      } else {\n        t1 = (d * a + e * c) / divisor;\n        t2 = (t1 * a - d) / c;\n      }\n\n      t2 = Math.max(0, Math.min(1, t2));\n      t1 = Math.max(0, Math.min(1, t1));\n      var point1 = r.multiplyScalar(t1).add(line1.start);\n      var point2 = s.multiplyScalar(t2).add(line2.start);\n      return [point1, point2];\n    }\n  });\n  return Capsule;\n}();\n\nexport { Capsule };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/math/Capsule.js"],"names":["Vector3","Capsule","_v1","_v2","_v3","EPS","start","end","radius","undefined","Object","assign","prototype","clone","set","copy","capsule","getCenter","target","add","multiplyScalar","translate","v","checkAABBAxis","p1x","p1y","p2x","p2y","minx","maxx","miny","maxy","intersectsBox","box","x","y","min","max","z","lineLineMinimumPoints","line1","line2","r","sub","s","w","a","dot","b","c","d","e","t1","t2","divisor","Math","abs","d1","d2","point1","point2"],"mappings":"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","sourcesContent":["import { Vector3 } from 'three';\n\nvar Capsule = function () {\n  var _v1 = new Vector3();\n\n  var _v2 = new Vector3();\n\n  var _v3 = new Vector3();\n\n  var EPS = 1e-10;\n\n  function Capsule(start, end, radius) {\n    this.start = start == undefined ? new Vector3(0, 0, 0) : start;\n    this.end = end == undefined ? new Vector3(0, 1, 0) : end;\n    this.radius = radius == undefined ? 1 : radius;\n  }\n\n  Object.assign(Capsule.prototype, {\n    clone: function () {\n      return new Capsule(this.start.clone(), this.end.clone(), this.radius);\n    },\n    set: function (start, end, radius) {\n      this.start.copy(start);\n      this.end.copy(end);\n      this.radius = radius;\n    },\n    copy: function (capsule) {\n      this.start.copy(capsule.start);\n      this.end.copy(capsule.end);\n      this.radius = capsule.radius;\n    },\n    getCenter: function (target) {\n      return target.copy(this.end).add(this.start).multiplyScalar(0.5);\n    },\n    translate: function (v) {\n      this.start.add(v);\n      this.end.add(v);\n    },\n    checkAABBAxis: function (p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius) {\n      return (minx - p1x < radius || minx - p2x < radius) && (p1x - maxx < radius || p2x - maxx < radius) && (miny - p1y < radius || miny - p2y < radius) && (p1y - maxy < radius || p2y - maxy < radius);\n    },\n    intersectsBox: function (box) {\n      return this.checkAABBAxis(this.start.x, this.start.y, this.end.x, this.end.y, box.min.x, box.max.x, box.min.y, box.max.y, this.radius) && this.checkAABBAxis(this.start.x, this.start.z, this.end.x, this.end.z, box.min.x, box.max.x, box.min.z, box.max.z, this.radius) && this.checkAABBAxis(this.start.y, this.start.z, this.end.y, this.end.z, box.min.y, box.max.y, box.min.z, box.max.z, this.radius);\n    },\n    lineLineMinimumPoints: function (line1, line2) {\n      var r = _v1.copy(line1.end).sub(line1.start);\n\n      var s = _v2.copy(line2.end).sub(line2.start);\n\n      var w = _v3.copy(line2.start).sub(line1.start);\n\n      var a = r.dot(s),\n          b = r.dot(r),\n          c = s.dot(s),\n          d = s.dot(w),\n          e = r.dot(w);\n      var t1,\n          t2,\n          divisor = b * c - a * a;\n\n      if (Math.abs(divisor) < EPS) {\n        var d1 = -d / c;\n        var d2 = (a - d) / c;\n\n        if (Math.abs(d1 - 0.5) < Math.abs(d2 - 0.5)) {\n          t1 = 0;\n          t2 = d1;\n        } else {\n          t1 = 1;\n          t2 = d2;\n        }\n      } else {\n        t1 = (d * a + e * c) / divisor;\n        t2 = (t1 * a - d) / c;\n      }\n\n      t2 = Math.max(0, Math.min(1, t2));\n      t1 = Math.max(0, Math.min(1, t1));\n      var point1 = r.multiplyScalar(t1).add(line1.start);\n      var point2 = s.multiplyScalar(t2).add(line2.start);\n      return [point1, point2];\n    }\n  });\n  return Capsule;\n}();\n\nexport { Capsule };\n"]},"metadata":{},"sourceType":"module"}