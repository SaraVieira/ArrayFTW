{"ast":null,"code":"import _classCallCheck from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _inherits from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Projects/arrayftw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Vector3, LineSegments, BufferGeometry, Float32BufferAttribute, LineBasicMaterial } from 'three';\n\nvar _v1 = new Vector3();\n\nvar _v2 = new Vector3();\n\nvar VertexTangentsHelper = /*#__PURE__*/function (_LineSegments) {\n  _inherits(VertexTangentsHelper, _LineSegments);\n\n  var _super = _createSuper(VertexTangentsHelper);\n\n  function VertexTangentsHelper(object, size, hex) {\n    var _this;\n\n    _classCallCheck(this, VertexTangentsHelper);\n\n    _this.object = object;\n    _this.size = size !== undefined ? size : 1;\n    var color = hex !== undefined ? hex : 0x00ffff; //\n\n    var objGeometry = _this.object.geometry;\n\n    if (!(objGeometry && objGeometry.isBufferGeometry)) {\n      console.error('THREE.VertexTangentsHelper: geometry not an instance of THREE.BufferGeometry.', objGeometry);\n      return _possibleConstructorReturn(_this);\n    }\n\n    var nTangents = objGeometry.attributes.tangent.count; //\n\n    var geometry = new BufferGeometry();\n    var positions = new Float32BufferAttribute(nTangents * 2 * 3, 3);\n    geometry.setAttribute('position', positions);\n    _this = _super.call(this, geometry, new LineBasicMaterial({\n      color: color,\n      toneMapped: false\n    }));\n    _this.type = 'VertexTangentsHelper'; //\n\n    _this.matrixAutoUpdate = false;\n\n    _this.update();\n\n    return _this;\n  }\n\n  _createClass(VertexTangentsHelper, [{\n    key: \"update\",\n    value: function update() {\n      this.object.updateMatrixWorld(true);\n      var matrixWorld = this.object.matrixWorld;\n      var position = this.geometry.attributes.position; //\n\n      var objGeometry = this.object.geometry;\n      var objPos = objGeometry.attributes.position;\n      var objTan = objGeometry.attributes.tangent;\n      var idx = 0; // for simplicity, ignore index and drawcalls, and render every tangent\n\n      for (var j = 0, jl = objPos.count; j < jl; j++) {\n        _v1.set(objPos.getX(j), objPos.getY(j), objPos.getZ(j)).applyMatrix4(matrixWorld);\n\n        _v2.set(objTan.getX(j), objTan.getY(j), objTan.getZ(j));\n\n        _v2.transformDirection(matrixWorld).multiplyScalar(this.size).add(_v1);\n\n        position.setXYZ(idx, _v1.x, _v1.y, _v1.z);\n        idx = idx + 1;\n        position.setXYZ(idx, _v2.x, _v2.y, _v2.z);\n        idx = idx + 1;\n      }\n\n      position.needsUpdate = true;\n    }\n  }]);\n\n  return VertexTangentsHelper;\n}(LineSegments);\n\nexport { VertexTangentsHelper };","map":{"version":3,"sources":["/Projects/arrayftw/node_modules/three-stdlib/helpers/VertexTangentsHelper.js"],"names":["Vector3","LineSegments","BufferGeometry","Float32BufferAttribute","LineBasicMaterial","_v1","_v2","VertexTangentsHelper","object","size","hex","undefined","color","objGeometry","geometry","isBufferGeometry","console","error","nTangents","attributes","tangent","count","positions","setAttribute","toneMapped","type","matrixAutoUpdate","update","updateMatrixWorld","matrixWorld","position","objPos","objTan","idx","j","jl","set","getX","getY","getZ","applyMatrix4","transformDirection","multiplyScalar","add","setXYZ","x","y","z","needsUpdate"],"mappings":"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","sourcesContent":["import { Vector3, LineSegments, BufferGeometry, Float32BufferAttribute, LineBasicMaterial } from 'three';\n\nconst _v1 = new Vector3();\n\nconst _v2 = new Vector3();\n\nclass VertexTangentsHelper extends LineSegments {\n  constructor(object, size, hex) {\n    this.object = object;\n    this.size = size !== undefined ? size : 1;\n    const color = hex !== undefined ? hex : 0x00ffff; //\n\n    const objGeometry = this.object.geometry;\n\n    if (!(objGeometry && objGeometry.isBufferGeometry)) {\n      console.error('THREE.VertexTangentsHelper: geometry not an instance of THREE.BufferGeometry.', objGeometry);\n      return;\n    }\n\n    const nTangents = objGeometry.attributes.tangent.count; //\n\n    const geometry = new BufferGeometry();\n    const positions = new Float32BufferAttribute(nTangents * 2 * 3, 3);\n    geometry.setAttribute('position', positions);\n    super(geometry, new LineBasicMaterial({\n      color,\n      toneMapped: false\n    }));\n    this.type = 'VertexTangentsHelper'; //\n\n    this.matrixAutoUpdate = false;\n    this.update();\n  }\n\n  update() {\n    this.object.updateMatrixWorld(true);\n    const matrixWorld = this.object.matrixWorld;\n    const position = this.geometry.attributes.position; //\n\n    const objGeometry = this.object.geometry;\n    const objPos = objGeometry.attributes.position;\n    const objTan = objGeometry.attributes.tangent;\n    let idx = 0; // for simplicity, ignore index and drawcalls, and render every tangent\n\n    for (let j = 0, jl = objPos.count; j < jl; j++) {\n      _v1.set(objPos.getX(j), objPos.getY(j), objPos.getZ(j)).applyMatrix4(matrixWorld);\n\n      _v2.set(objTan.getX(j), objTan.getY(j), objTan.getZ(j));\n\n      _v2.transformDirection(matrixWorld).multiplyScalar(this.size).add(_v1);\n\n      position.setXYZ(idx, _v1.x, _v1.y, _v1.z);\n      idx = idx + 1;\n      position.setXYZ(idx, _v2.x, _v2.y, _v2.z);\n      idx = idx + 1;\n    }\n\n    position.needsUpdate = true;\n  }\n\n}\n\nexport { VertexTangentsHelper };\n"]},"metadata":{},"sourceType":"module"}