"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("three");exports.PeppersGhostEffect=function(t){var r,o,s,i=this;i.cameraDistance=15,i.reflectFromAbove=!1;var a=new e.PerspectiveCamera,n=new e.PerspectiveCamera,c=new e.PerspectiveCamera,p=new e.PerspectiveCamera,l=new e.Vector3,d=new e.Quaternion,m=new e.Vector3;t.autoClear=!1,this.setSize=function(e,i){r=e/2,e<i?(o=e/3,s=e/3):(o=i/3,s=i/3),t.setSize(e,i)},this.render=function(e,u){e.updateMatrixWorld(),null===u.parent&&u.updateMatrixWorld(),u.matrixWorld.decompose(l,d,m),a.position.copy(l),a.quaternion.copy(d),a.translateZ(i.cameraDistance),a.lookAt(e.position),n.position.copy(l),n.quaternion.copy(d),n.translateZ(-i.cameraDistance),n.lookAt(e.position),n.rotation.z+=Math.PI/180*180,c.position.copy(l),c.quaternion.copy(d),c.translateX(-i.cameraDistance),c.lookAt(e.position),c.rotation.x+=Math.PI/180*90,p.position.copy(l),p.quaternion.copy(d),p.translateX(i.cameraDistance),p.lookAt(e.position),p.rotation.x+=Math.PI/180*90,t.clear(),t.setScissorTest(!0),t.setScissor(r-o/2,2*s,o,s),t.setViewport(r-o/2,2*s,o,s),i.reflectFromAbove?t.render(e,n):t.render(e,a),t.setScissor(r-o/2,0,o,s),t.setViewport(r-o/2,0,o,s),i.reflectFromAbove?t.render(e,a):t.render(e,n),t.setScissor(r-o/2-o,s,o,s),t.setViewport(r-o/2-o,s,o,s),i.reflectFromAbove?t.render(e,p):t.render(e,c),t.setScissor(r+o/2,s,o,s),t.setViewport(r+o/2,s,o,s),i.reflectFromAbove?t.render(e,c):t.render(e,p),t.setScissorTest(!1)}};
