"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.AsciiEffect=function(e,t,o){t=void 0===t?" .:-=+*#%@":t,o||(o={});var r,a,n=o.resolution?o.resolution:.15,l=o.scale?o.scale:1,i=!!o.color&&o.color,c=!!o.alpha&&o.alpha,s=!!o.block&&o.block,d=!!o.invert&&o.invert,p=document.createElement("div");p.style.cursor="default";var g,u,h,v=document.createElement("table");p.appendChild(v),this.setSize=function(t,o){r=t,a=o,e.setSize(t,o),function(){g=Math.round(r*C),u=Math.round(a*C),y.width=g,y.height=u,(h=e.domElement).style.backgroundColor&&(v.rows[0].cells[0].style.backgroundColor=h.style.backgroundColor,v.rows[0].cells[0].style.color=h.style.color);v.cellSpacing=0,v.cellPadding=0;var t=v.style;t.display="inline",t.width=Math.round(g/C*l)+"px",t.height=Math.round(u/C*l)+"px",t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=S+"px",t.fontFamily=b,t.fontSize=E+"px",t.lineHeight=M+"px",t.textAlign="left",t.textDecoration="none"}()},this.render=function(t,o){e.render(t,o),function(e,t){k.clearRect(0,0,g,u),k.drawImage(x,0,0,g,u);for(var o=k.getImageData(0,0,g,u).data,r="",a=0;a<u;a+=2){for(var n=0;n<g;n++){var l=4*(a*g+n),p=o[l],h=o[l+1],v=o[l+2],f=o[l+3],m=void 0,b=void 0;b=(.3*p+.59*h+.11*v)/255,0==f&&(b=1),m=Math.floor((1-b)*(w.length-1)),d&&(m=w.length-m-1);var y=w[m];void 0!==y&&" "!=y||(y="&nbsp;"),r+=i?"<span style='color:rgb("+p+","+h+","+v+");"+(s?"background-color:rgb("+p+","+h+","+v+");":"")+(c?"opacity:"+f/255+";":"")+"'>"+y+"</span>":y}r+="<br/>"}t.innerHTML="<tr><td>"+r+"</td></tr>"}(0,v)},this.domElement=p;var f=" .,:;i1tfLCG08@".split(""),m=" CGO08@".split(""),b="courier new, monospace",x=e.domElement,y=document.createElement("canvas");if(y.getContext){var k=y.getContext("2d");if(k.getImageData){var w=i?m:f;t&&(w=t);var C=.5;C=.25,n&&(C=n);var E=2/C*l,M=2/C*l,S=0;switch(l){case 1:S=-1;break;case 2:case 3:S=-2.1;break;case 4:S=-3.1;break;case 5:S=-4.15}}}};
