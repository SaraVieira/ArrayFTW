"use strict";var e=require("three"),r=new e.Matrix4,t=function(){function t(r){r=r||{},this.vertices={near:[new e.Vector3,new e.Vector3,new e.Vector3,new e.Vector3],far:[new e.Vector3,new e.Vector3,new e.Vector3,new e.Vector3]},void 0!==r.projectionMatrix&&this.setFromProjectionMatrix(r.projectionMatrix,r.maxFar||1e4)}var i=t.prototype;return i.setFromProjectionMatrix=function(e,t){var i=0===e.elements[11];return r.copy(e).invert(),this.vertices.near[0].set(1,1,-1),this.vertices.near[1].set(1,-1,-1),this.vertices.near[2].set(-1,-1,-1),this.vertices.near[3].set(-1,1,-1),this.vertices.near.forEach((function(e){e.applyMatrix4(r)})),this.vertices.far[0].set(1,1,1),this.vertices.far[1].set(1,-1,1),this.vertices.far[2].set(-1,-1,1),this.vertices.far[3].set(-1,1,1),this.vertices.far.forEach((function(e){e.applyMatrix4(r);var s=Math.abs(e.z);i?e.z*=Math.min(t/s,1):e.multiplyScalar(Math.min(t/s,1))})),this.vertices},i.split=function(e,r){for(;e.length>r.length;)r.push(new t);r.length=e.length;for(var i=0;i<e.length;i++){var s=r[i];if(0===i)for(var a=0;a<4;a++)s.vertices.near[a].copy(this.vertices.near[a]);else for(var c=0;c<4;c++)s.vertices.near[c].lerpVectors(this.vertices.near[c],this.vertices.far[c],e[i-1]);if(i===e-1)for(var n=0;n<4;n++)s.vertices.far[n].copy(this.vertices.far[n]);else for(var o=0;o<4;o++)s.vertices.far[o].lerpVectors(this.vertices.near[o],this.vertices.far[o],e[i])}},i.toSpace=function(e,r){for(var t=0;t<4;t++)r.vertices.near[t].copy(this.vertices.near[t]).applyMatrix4(e),r.vertices.far[t].copy(this.vertices.far[t]).applyMatrix4(e)},t}();module.exports=t;
