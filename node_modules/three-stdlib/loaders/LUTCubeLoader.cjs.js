"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/inheritsLoose"),a=require("three");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=r(e),i=function(e){function r(){return e.apply(this,arguments)||this}t.default(r,e);var i=r.prototype;return i.load=function(e,r,t,i){var n=this,p=new a.FileLoader(this.manager);p.setPath(this.path),p.setResponseType("text"),p.load(e,(function(a){try{r(n.parse(a))}catch(a){i?i(a):console.error(a),n.manager.itemError(e)}}),t,i)},i.parse=function(e){e=e.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim();for(var r=null,t=null,i=new a.Vector3(0,0,0),n=new a.Vector3(1,1,1),p=e.split(/[\n\r]+/g),o=null,l=0,s=0,g=p.length;s<g;s++){var m=p[s].trim(),u=m.split(/\s/g);switch(u[0]){case"TITLE":r=m.substring(7,m.length-1);break;case"LUT_3D_SIZE":var d=u[1];t=parseFloat(d),o=new Uint8Array(t*t*t*3);break;case"DOMAIN_MIN":i.x=parseFloat(u[1]),i.y=parseFloat(u[2]),i.z=parseFloat(u[3]);break;case"DOMAIN_MAX":n.x=parseFloat(u[1]),n.y=parseFloat(u[2]),n.z=parseFloat(u[3]);break;default:var h=parseFloat(u[0]),c=parseFloat(u[1]),F=parseFloat(u[2]);if(h>1||h<0||c>1||c<0||F>1||F<0)throw new Error("LUTCubeLoader : Non normalized values not supported.");o[l+0]=255*h,o[l+1]=255*c,o[l+2]=255*F,l+=3}}var T=new a.DataTexture;T.image.data=o,T.image.width=t,T.image.height=t*t,T.format=a.RGBFormat,T.type=a.UnsignedByteType,T.magFilter=a.LinearFilter,T.minFilter=a.LinearFilter,T.wrapS=a.ClampToEdgeWrapping,T.wrapT=a.ClampToEdgeWrapping,T.generateMipmaps=!1;var f=new a.DataTexture3D;return f.image.data=o,f.image.width=t,f.image.height=t,f.image.depth=t,f.format=a.RGBFormat,f.type=a.UnsignedByteType,f.magFilter=a.LinearFilter,f.minFilter=a.LinearFilter,f.wrapS=a.ClampToEdgeWrapping,f.wrapT=a.ClampToEdgeWrapping,f.wrapR=a.ClampToEdgeWrapping,f.generateMipmaps=!1,{title:r,size:t,domainMin:i,domainMax:n,texture:T,texture3D:f}},r}(a.Loader);exports.LUTCubeLoader=i;
