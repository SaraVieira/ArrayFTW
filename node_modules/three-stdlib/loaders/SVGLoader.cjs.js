"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e,r,a,n,i,o,s,c,u,l,y,h,f,p,v,b,d=require("three"),x=function(t){d.Loader.call(this,t),this.defaultDPI=90,this.defaultUnit="px"};x.prototype=Object.assign(Object.create(d.Loader.prototype),{constructor:x,load:function(t,e,r,a){var n=this,i=new d.FileLoader(n.manager);i.setPath(n.path),i.setRequestHeader(n.requestHeader),i.setWithCredentials(n.withCredentials),i.load(t,(function(r){try{e(n.parse(r))}catch(e){a?a(e):console.error(e),n.manager.itemError(t)}}),r,a)},parse:function(t){var e=this;function r(t,e,r,n,i,o,s,c){if(0!=e&&0!=r){n=n*Math.PI/180,e=Math.abs(e),r=Math.abs(r);var u=(s.x-c.x)/2,l=(s.y-c.y)/2,y=Math.cos(n)*u+Math.sin(n)*l,h=-Math.sin(n)*u+Math.cos(n)*l,f=e*e,p=r*r,v=y*y,b=h*h,d=v/f+b/p;if(d>1){var x=Math.sqrt(d);f=(e*=x)*e,p=(r*=x)*r}var g=f*b+p*v,m=(f*p-g)/g,k=Math.sqrt(Math.max(0,m));i===o&&(k=-k);var A=k*e*h/r,w=-k*r*y/e,M=Math.cos(n)*A-Math.sin(n)*w+(s.x+c.x)/2,T=Math.sin(n)*A+Math.cos(n)*w+(s.y+c.y)/2,P=a(1,0,(y-A)/e,(h-w)/r),V=a((y-A)/e,(h-w)/r,(-y-A)/e,(-h-w)/r)%(2*Math.PI);t.currentPath.absellipse(M,T,e,r,P,P+V,0===o,n)}else t.lineTo(c.x,c.y)}function a(t,e,r,a){var n=t*r+e*a,i=Math.sqrt(t*t+e*e)*Math.sqrt(r*r+a*a),o=Math.acos(Math.max(-1,Math.min(1,n/i)));return t*a-e*r<0&&(o=-o),o}function n(t,e){e=Object.assign({},e);var r={};if(t.hasAttribute("class"))for(var a=t.getAttribute("class").split(/\s/).filter(Boolean).map((function(t){return t.trim()})),n=0;n<a.length;n++)r=Object.assign(r,f["."+a[n]]);function i(a,n,i){void 0===i&&(i=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(a)&&(e[n]=i(t.getAttribute(a))),r[a]&&(e[n]=i(r[a])),t.style&&""!==t.style[a]&&(e[n]=i(t.style[a]))}function o(t){return Math.max(0,Math.min(1,u(t)))}function s(t){return Math.max(0,u(t))}return t.hasAttribute("id")&&(r=Object.assign(r,f["#"+t.getAttribute("id")])),i("fill","fill"),i("fill-opacity","fillOpacity",o),i("opacity","opacity",o),i("stroke","stroke"),i("stroke-opacity","strokeOpacity",o),i("stroke-width","strokeWidth",s),i("stroke-linejoin","strokeLineJoin"),i("stroke-linecap","strokeLineCap"),i("stroke-miterlimit","strokeMiterLimit",s),i("visibility","visibility"),e}function i(t,e){return t-(e-t)}function o(t){if("string"!=typeof t)throw new TypeError("Invalid input: "+typeof t);var e={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i},r=0,a=!0,n=[],i="",o="";function s(t,e,r){var a=new SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw a.partial=r,a}function c(){""!==i&&(""===o?n.push(Number(i)):n.push(Number(i)*Math.pow(10,Number(o)))),i="",o=""}var u,l=0,y=t.length;for(l=0;l<y;l++){if(u=t[l],0===r){if(e.WHITESPACE.test(u))continue;if(e.DIGIT.test(u)||e.SIGN.test(u)){r=1,i=u;continue}if(e.POINT.test(u)){r=2,i=u;continue}e.COMMA.test(u)&&(a&&s(u,l,n),a=!0)}if(1===r){if(e.DIGIT.test(u)){i+=u;continue}if(e.POINT.test(u)){i+=u,r=2;continue}if(e.EXP.test(u)){r=3;continue}e.SIGN.test(u)&&1===i.length&&e.SIGN.test(i[0])&&s(u,l,n)}if(2===r){if(e.DIGIT.test(u)){i+=u;continue}if(e.EXP.test(u)){r=3;continue}e.POINT.test(u)&&"."===i[i.length-1]&&s(u,l,n)}if(3==r){if(e.DIGIT.test(u)){o+=u;continue}if(e.SIGN.test(u)){if(""===o){o+=u;continue}1===o.length&&e.SIGN.test(o)&&s(u,l,n)}}e.WHITESPACE.test(u)?(c(),r=0,a=!1):e.COMMA.test(u)?(c(),r=0,a=!0):e.SIGN.test(u)?(c(),r=1,i=u):e.POINT.test(u)?(c(),r=2,i=u):s(u,l,n)}return c(),n}var s=["mm","cm","in","pt","pc","px"],c={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function u(t){var r="px";if("string"==typeof t||t instanceof String)for(var a=0,n=s.length;a<n;a++){var i=s[a];if(t.endsWith(i)){r=i,t=t.substring(0,t.length-i.length);break}}var o=void 0;return"px"===r&&"px"!==e.defaultUnit?o=c.in[e.defaultUnit]/e.defaultDPI:(o=c[r][e.defaultUnit])<0&&(o=c[r].in*e.defaultDPI),o*parseFloat(t)}function l(t){var e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function y(t){var e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}var h=[],f={},p=[],v=new d.Matrix3,b=new d.Matrix3,x=new d.Matrix3,g=new d.Matrix3,m=new d.Vector2,k=new d.Vector3,A=new d.Matrix3,w=(new DOMParser).parseFromString(t,"image/svg+xml");return function t(e,a){if(1===e.nodeType){var s=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;var e=function(t){var e=new d.Matrix3,r=v;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){var a=u(t.getAttribute("x")),n=u(t.getAttribute("y"));e.translate(a,n)}if(t.hasAttribute("transform"))for(var i=t.getAttribute("transform").split(")"),s=i.length-1;s>=0;s--){var c=i[s].trim();if(""!==c){var l=c.indexOf("("),y=c.length;if(l>0&&l<y){var h=c.substr(0,l),f=o(c.substr(l+1,y-l-1));switch(r.identity(),h){case"translate":if(f.length>=1){n=a=f[0];f.length>=2&&(n=f[1]),r.translate(a,n)}break;case"rotate":if(f.length>=1){var p=0,m=0,k=0;p=-f[0]*Math.PI/180,f.length>=3&&(m=f[1],k=f[2]),b.identity().translate(-m,-k),x.identity().rotate(p),g.multiplyMatrices(x,b),b.identity().translate(m,k),r.multiplyMatrices(b,g)}break;case"scale":if(f.length>=1){var A=f[0],w=A;f.length>=2&&(w=f[1]),r.scale(A,w)}break;case"skewX":1===f.length&&r.set(1,Math.tan(f[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===f.length&&r.set(1,0,0,Math.tan(f[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===f.length&&r.set(f[0],f[2],f[4],f[1],f[3],f[5],0,0,1)}}e.premultiply(r)}}return e}(t);p.length>0&&e.premultiply(p[p.length-1]);return A.copy(e),p.push(e),e}(e),c=!0,w=null;switch(e.nodeName){case"svg":break;case"style":!function(t){if(!t.sheet||!t.sheet.cssRules||!t.sheet.cssRules.length)return;for(var e=0;e<t.sheet.cssRules.length;e++){var r=t.sheet.cssRules[e];if(1===r.type)for(var a=r.selectorText.split(/,/gm).filter(Boolean).map((function(t){return t.trim()})),n=0;n<a.length;n++)f[a[n]]=Object.assign(f[a[n]]||{},r.style)}}(e);break;case"g":a=n(e,a);break;case"path":a=n(e,a),e.hasAttribute("d")&&(w=function(t){for(var e=new d.ShapePath,a=new d.Vector2,n=new d.Vector2,s=new d.Vector2,c=!0,u=!1,l=t.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),y=0,h=l.length;y<h;y++){var f=l[y],p=f.charAt(0),v=f.substr(1).trim();switch(!0===c&&(u=!0,c=!1),p){case"M":for(var b=0,x=(tt=o(v)).length;b<x;b+=2)a.x=tt[b+0],a.y=tt[b+1],n.x=a.x,n.y=a.y,0===b?e.moveTo(a.x,a.y):e.lineTo(a.x,a.y),0===b&&!0===u&&s.copy(a);break;case"H":for(var g=0,m=(tt=o(v)).length;g<m;g++)a.x=tt[g],n.x=a.x,n.y=a.y,e.lineTo(a.x,a.y),0===g&&!0===u&&s.copy(a);break;case"V":for(var k=0,A=(tt=o(v)).length;k<A;k++)a.y=tt[k],n.x=a.x,n.y=a.y,e.lineTo(a.x,a.y),0===k&&!0===u&&s.copy(a);break;case"L":for(var w=0,M=(tt=o(v)).length;w<M;w+=2)a.x=tt[w+0],a.y=tt[w+1],n.x=a.x,n.y=a.y,e.lineTo(a.x,a.y),0===w&&!0===u&&s.copy(a);break;case"C":for(var T=0,P=(tt=o(v)).length;T<P;T+=6)e.bezierCurveTo(tt[T+0],tt[T+1],tt[T+2],tt[T+3],tt[T+4],tt[T+5]),n.x=tt[T+2],n.y=tt[T+3],a.x=tt[T+4],a.y=tt[T+5],0===T&&!0===u&&s.copy(a);break;case"S":for(var V=0,S=(tt=o(v)).length;V<S;V+=4)e.bezierCurveTo(i(a.x,n.x),i(a.y,n.y),tt[V+0],tt[V+1],tt[V+2],tt[V+3]),n.x=tt[V+0],n.y=tt[V+1],a.x=tt[V+2],a.y=tt[V+3],0===V&&!0===u&&s.copy(a);break;case"Q":for(var I=0,C=(tt=o(v)).length;I<C;I+=4)e.quadraticCurveTo(tt[I+0],tt[I+1],tt[I+2],tt[I+3]),n.x=tt[I+0],n.y=tt[I+1],a.x=tt[I+2],a.y=tt[I+3],0===I&&!0===u&&s.copy(a);break;case"T":for(var L=0,O=(tt=o(v)).length;L<O;L+=2){var E=i(a.x,n.x),N=i(a.y,n.y);e.quadraticCurveTo(E,N,tt[L+0],tt[L+1]),n.x=E,n.y=N,a.x=tt[L+0],a.y=tt[L+1],0===L&&!0===u&&s.copy(a)}break;case"A":for(var z=0,G=(tt=o(v)).length;z<G;z+=7)if(tt[z+5]!=a.x||tt[z+6]!=a.y){var q=a.clone();a.x=tt[z+5],a.y=tt[z+6],n.x=a.x,n.y=a.y,r(e,tt[z],tt[z+1],tt[z+2],tt[z+3],tt[z+4],q,a),0===z&&!0===u&&s.copy(a)}break;case"m":for(var W=0,B=(tt=o(v)).length;W<B;W+=2)a.x+=tt[W+0],a.y+=tt[W+1],n.x=a.x,n.y=a.y,0===W?e.moveTo(a.x,a.y):e.lineTo(a.x,a.y),0===W&&!0===u&&s.copy(a);break;case"h":for(var D=0,R=(tt=o(v)).length;D<R;D++)a.x+=tt[D],n.x=a.x,n.y=a.y,e.lineTo(a.x,a.y),0===D&&!0===u&&s.copy(a);break;case"v":for(var j=0,F=(tt=o(v)).length;j<F;j++)a.y+=tt[j],n.x=a.x,n.y=a.y,e.lineTo(a.x,a.y),0===j&&!0===u&&s.copy(a);break;case"l":for(var H=0,X=(tt=o(v)).length;H<X;H+=2)a.x+=tt[H+0],a.y+=tt[H+1],n.x=a.x,n.y=a.y,e.lineTo(a.x,a.y),0===H&&!0===u&&s.copy(a);break;case"c":for(var J=0,U=(tt=o(v)).length;J<U;J+=6)e.bezierCurveTo(a.x+tt[J+0],a.y+tt[J+1],a.x+tt[J+2],a.y+tt[J+3],a.x+tt[J+4],a.y+tt[J+5]),n.x=a.x+tt[J+2],n.y=a.y+tt[J+3],a.x+=tt[J+4],a.y+=tt[J+5],0===J&&!0===u&&s.copy(a);break;case"s":for(var Y=0,Q=(tt=o(v)).length;Y<Q;Y+=4)e.bezierCurveTo(i(a.x,n.x),i(a.y,n.y),a.x+tt[Y+0],a.y+tt[Y+1],a.x+tt[Y+2],a.y+tt[Y+3]),n.x=a.x+tt[Y+0],n.y=a.y+tt[Y+1],a.x+=tt[Y+2],a.y+=tt[Y+3],0===Y&&!0===u&&s.copy(a);break;case"q":for(var _=0,Z=(tt=o(v)).length;_<Z;_+=4)e.quadraticCurveTo(a.x+tt[_+0],a.y+tt[_+1],a.x+tt[_+2],a.y+tt[_+3]),n.x=a.x+tt[_+0],n.y=a.y+tt[_+1],a.x+=tt[_+2],a.y+=tt[_+3],0===_&&!0===u&&s.copy(a);break;case"t":for(var K=0,$=(tt=o(v)).length;K<$;K+=2){E=i(a.x,n.x),N=i(a.y,n.y);e.quadraticCurveTo(E,N,a.x+tt[K+0],a.y+tt[K+1]),n.x=E,n.y=N,a.x=a.x+tt[K+0],a.y=a.y+tt[K+1],0===K&&!0===u&&s.copy(a)}break;case"a":for(var tt,et=0,rt=(tt=o(v)).length;et<rt;et+=7)if(0!=tt[et+5]||0!=tt[et+6]){q=a.clone();a.x+=tt[et+5],a.y+=tt[et+6],n.x=a.x,n.y=a.y,r(e,tt[et],tt[et+1],tt[et+2],tt[et+3],tt[et+4],q,a),0===et&&!0===u&&s.copy(a)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(a.copy(s),e.currentPath.currentPoint.copy(a),c=!0);break;default:console.warn(f)}u=!1}return e}(e));break;case"rect":a=n(e,a),w=function(t){var e=u(t.getAttribute("x")||0),r=u(t.getAttribute("y")||0),a=u(t.getAttribute("rx")||0),n=u(t.getAttribute("ry")||0),i=u(t.getAttribute("width")),o=u(t.getAttribute("height")),s=new d.ShapePath;s.moveTo(e+2*a,r),s.lineTo(e+i-2*a,r),(0!==a||0!==n)&&s.bezierCurveTo(e+i,r,e+i,r,e+i,r+2*n);s.lineTo(e+i,r+o-2*n),(0!==a||0!==n)&&s.bezierCurveTo(e+i,r+o,e+i,r+o,e+i-2*a,r+o);s.lineTo(e+2*a,r+o),(0!==a||0!==n)&&s.bezierCurveTo(e,r+o,e,r+o,e,r+o-2*n);s.lineTo(e,r+2*n),(0!==a||0!==n)&&s.bezierCurveTo(e,r,e,r,e+2*a,r);return s}(e);break;case"polygon":a=n(e,a),w=function(t){function e(t,e,r){var i=u(e),o=u(r);0===n?a.moveTo(i,o):a.lineTo(i,o),n++}var r=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,a=new d.ShapePath,n=0;return t.getAttribute("points").replace(r,e),a.currentPath.autoClose=!0,a}(e);break;case"polyline":a=n(e,a),w=function(t){function e(t,e,r){var i=u(e),o=u(r);0===n?a.moveTo(i,o):a.lineTo(i,o),n++}var r=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,a=new d.ShapePath,n=0;return t.getAttribute("points").replace(r,e),a.currentPath.autoClose=!1,a}(e);break;case"circle":a=n(e,a),w=function(t){var e=u(t.getAttribute("cx")),r=u(t.getAttribute("cy")),a=u(t.getAttribute("r")),n=new d.Path;n.absarc(e,r,a,0,2*Math.PI);var i=new d.ShapePath;return i.subPaths.push(n),i}(e);break;case"ellipse":a=n(e,a),w=function(t){var e=u(t.getAttribute("cx")),r=u(t.getAttribute("cy")),a=u(t.getAttribute("rx")),n=u(t.getAttribute("ry")),i=new d.Path;i.absellipse(e,r,a,n,0,2*Math.PI);var o=new d.ShapePath;return o.subPaths.push(i),o}(e);break;case"line":a=n(e,a),w=function(t){var e=u(t.getAttribute("x1")),r=u(t.getAttribute("y1")),a=u(t.getAttribute("x2")),n=u(t.getAttribute("y2")),i=new d.ShapePath;return i.moveTo(e,r),i.lineTo(a,n),i.currentPath.autoClose=!1,i}(e);break;case"defs":c=!1;break;case"use":a=n(e,a);var M=e.href.baseVal.substring(1),T=e.viewportElement.getElementById(M);T?t(T,a):console.warn("SVGLoader: 'use node' references non-existent node id: "+M)}if(w&&(void 0!==a.fill&&"none"!==a.fill&&w.color.setStyle(a.fill),function(t,e){function r(t){k.set(t.x,t.y,1).applyMatrix3(e),t.set(k.x,k.y)}for(var a=function(t){return 0!==t.elements[1]||0!==t.elements[3]}(e),n=t.subPaths,i=0,o=n.length;i<o;i++)for(var s=n[i].curves,c=0;c<s.length;c++){var u=s[c];u.isLineCurve?(r(u.v1),r(u.v2)):u.isCubicBezierCurve?(r(u.v0),r(u.v1),r(u.v2),r(u.v3)):u.isQuadraticBezierCurve?(r(u.v0),r(u.v1),r(u.v2)):u.isEllipseCurve&&(a&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),m.set(u.aX,u.aY),r(m),u.aX=m.x,u.aY=m.y,u.xRadius*=l(e),u.yRadius*=y(e))}}(w,A),h.push(w),w.userData={node:e,style:a}),c)for(var P=e.childNodes,V=0;V<P.length;V++)t(P[V],a);s&&(p.pop(),p.length>0?A.copy(p[p.length-1]):A.identity())}}(w.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:h,xml:w.documentElement}}}),x.getStrokeStyle=function(t,e,r,a,n){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:r=void 0!==r?r:"miter",strokeLineCap:a=void 0!==a?a:"butt",strokeMiterLimit:n=void 0!==n?n:4}},x.pointsToStroke=function(t,e,r,a){var n=[],i=[],o=[];if(0===x.pointsToStrokeWithBuffers(t,e,r,a,n,i,o))return null;var s=new d.BufferGeometry;return s.setAttribute("position",new d.Float32BufferAttribute(n,3)),s.setAttribute("normal",new d.Float32BufferAttribute(i,3)),s.setAttribute("uv",new d.Float32BufferAttribute(o,2)),s},x.pointsToStrokeWithBuffers=(t=new d.Vector2,e=new d.Vector2,r=new d.Vector2,a=new d.Vector2,n=new d.Vector2,i=new d.Vector2,o=new d.Vector2,s=new d.Vector2,c=new d.Vector2,u=new d.Vector2,l=new d.Vector2,y=new d.Vector2,h=new d.Vector2,f=new d.Vector2,p=new d.Vector2,v=new d.Vector2,b=new d.Vector2,function(d,x,g,m,k,A,w,M){g=void 0!==g?g:12,m=void 0!==m?m:.001,M=void 0!==M?M:0;var T=(d=function(t){for(var e=!1,r=1,a=t.length-1;r<a;r++)if(t[r].distanceTo(t[r+1])<m){e=!0;break}if(!e)return t;var n=[];n.push(t[0]);for(var i=1,o=t.length-1;i<o;i++)t[i].distanceTo(t[i+1])>=m&&n.push(t[i]);return n.push(t[t.length-1]),n}(d)).length;if(T<2)return 0;var P,V,S,I,C,L=d[0].equals(d[T-1]),O=d[0],E=x.strokeWidth/2,N=1/(T-1),z=0,G=!1,q=0,W=3*M,B=2*M;Z(d[0],d[1],t).multiplyScalar(E),s.copy(d[0]).sub(t),c.copy(d[0]).add(t),u.copy(s),l.copy(c);for(var D=1;D<T;D++){P=d[D],V=D===T-1?L?d[1]:void 0:d[D+1];var R=t;Z(O,P,R),r.copy(R).multiplyScalar(E),y.copy(P).sub(r),h.copy(P).add(r);var j=z+N;if(S=!1,void 0!==V){Z(P,V,e),r.copy(e).multiplyScalar(E),f.copy(P).sub(r),p.copy(P).add(r),I=!0,r.subVectors(V,O),R.dot(r)<0&&(I=!1),1===D&&(G=I),r.subVectors(V,P),r.normalize();var F=Math.abs(R.dot(r));if(0!==F){var H=E/F;r.multiplyScalar(-H),a.subVectors(P,O),n.copy(a).setLength(H).add(r),v.copy(n).negate();var X=n.length(),J=a.length();a.divideScalar(J),i.subVectors(V,P);var U=i.length();switch(i.divideScalar(U),a.dot(v)<J&&i.dot(v)<U&&(S=!0),b.copy(n).add(P),v.add(P),C=!1,S?I?(p.copy(v),h.copy(v)):(f.copy(v),y.copy(v)):tt(),x.strokeLineJoin){case"bevel":et(I,S,j);break;case"round":rt(I,S),I?$(P,y,f,j,0):$(P,p,h,j,1);break;case"miter":case"miter-clip":default:var Y=E*x.strokeMiterLimit/X;if(Y<1){if("miter-clip"!==x.strokeLineJoin){et(I,S,j);break}rt(I,S),I?(i.subVectors(b,y).multiplyScalar(Y).add(y),o.subVectors(b,f).multiplyScalar(Y).add(f),K(y,j,0),K(i,j,0),K(P,j,.5),K(P,j,.5),K(i,j,0),K(o,j,0),K(P,j,.5),K(o,j,0),K(f,j,0)):(i.subVectors(b,h).multiplyScalar(Y).add(h),o.subVectors(b,p).multiplyScalar(Y).add(p),K(h,j,1),K(i,j,1),K(P,j,.5),K(P,j,.5),K(i,j,1),K(o,j,1),K(P,j,.5),K(o,j,1),K(p,j,1))}else S?(I?(K(c,z,1),K(s,z,0),K(b,j,0),K(c,z,1),K(b,j,0),K(v,j,1)):(K(c,z,1),K(s,z,0),K(b,j,1),K(s,z,0),K(v,j,0),K(b,j,1)),I?f.copy(b):p.copy(b)):I?(K(y,j,0),K(b,j,0),K(P,j,.5),K(P,j,.5),K(b,j,0),K(f,j,0)):(K(h,j,1),K(b,j,1),K(P,j,.5),K(P,j,.5),K(b,j,1),K(p,j,1)),C=!0}}else tt()}else tt();L||D!==T-1||at(d[0],u,l,I,!0,z),z=j,O=P,s.copy(f),c.copy(p)}if(L){if(S&&k){var Q=b,_=v;G!==I&&(Q=v,_=b),I?(C||G)&&(_.toArray(k,0),_.toArray(k,9),C&&Q.toArray(k,3)):!C&&G||(_.toArray(k,3),_.toArray(k,9),C&&Q.toArray(k,0))}}else at(P,y,h,I,!1,j);return q;function Z(t,e,r){return r.subVectors(e,t),r.set(-r.y,r.x).normalize()}function K(t,e,r){k&&(k[W]=t.x,k[W+1]=t.y,k[W+2]=0,A&&(A[W]=0,A[W+1]=0,A[W+2]=1),W+=3,w&&(w[B]=e,w[B+1]=r,B+=2)),q+=3}function $(n,i,o,s,c){t.copy(i).sub(n).normalize(),e.copy(o).sub(n).normalize();var u=Math.PI,l=t.dot(e);Math.abs(l)<1&&(u=Math.abs(Math.acos(l))),u/=g,r.copy(i);for(var y=0,h=g-1;y<h;y++)a.copy(r).rotateAround(n,u),K(r,s,c),K(a,s,c),K(n,s,.5),r.copy(a);K(a,s,c),K(o,s,c),K(n,s,.5)}function tt(){K(c,z,1),K(s,z,0),K(y,j,0),K(c,z,1),K(y,j,1),K(h,j,0)}function et(t,e,r){e?t?(K(c,z,1),K(s,z,0),K(y,j,0),K(c,z,1),K(y,j,0),K(v,j,1),K(y,r,0),K(f,r,0),K(v,r,.5)):(K(c,z,1),K(s,z,0),K(h,j,1),K(s,z,0),K(v,j,0),K(h,j,1),K(h,r,1),K(p,r,0),K(v,r,.5)):t?(K(y,r,0),K(f,r,0),K(P,r,.5)):(K(h,r,1),K(p,r,0),K(P,r,.5))}function rt(t,e){e&&(t?(K(c,z,1),K(s,z,0),K(y,j,0),K(c,z,1),K(y,j,0),K(v,j,1),K(y,z,0),K(P,j,.5),K(v,j,1),K(P,j,.5),K(f,z,0),K(v,j,1)):(K(c,z,1),K(s,z,0),K(h,j,1),K(s,z,0),K(v,j,0),K(h,j,1),K(h,z,1),K(v,j,0),K(P,j,.5),K(P,j,.5),K(v,j,0),K(p,z,1)))}function at(n,i,o,s,c,u){switch(x.strokeLineCap){case"round":c?$(n,o,i,u,.5):$(n,i,o,u,.5);break;case"square":if(c)t.subVectors(i,n),e.set(t.y,-t.x),r.addVectors(t,e).add(n),a.subVectors(e,t).add(n),s?(r.toArray(k,3),a.toArray(k,0),a.toArray(k,9)):(r.toArray(k,3),r.toArray(k,9),a.toArray(k,0));else{t.subVectors(o,n),e.set(t.y,-t.x),r.addVectors(t,e).add(n),a.subVectors(e,t).add(n);var l=k.length;s?(r.toArray(k,l-3),a.toArray(k,l-6),a.toArray(k,l-12)):(r.toArray(k,l-6),a.toArray(k,l-3),a.toArray(k,l-12))}}}}),exports.SVGLoader=x;
