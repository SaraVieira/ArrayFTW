"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/InputNode.cjs.js"),t=require("../accessors/ReflectNode.cjs.js"),o=require("../utils/ColorSpaceNode.cjs.js"),r=require("../core/ExpressionNode.cjs.js");function s(o,r,s){e.InputNode.call(this,"v4",{shared:!0}),this.value=o,this.uv=r||new t.ReflectNode,this.bias=s}require("../core/TempNode.cjs.js"),require("three"),require("../core/Node.cjs.js"),require("../accessors/PositionNode.cjs.js"),require("../core/NodeLib.cjs.js"),require("../accessors/NormalNode.cjs.js"),require("../core/ConstNode.cjs.js"),require("./FloatNode.cjs.js"),require("../core/FunctionNode.cjs.js"),s.prototype=Object.create(e.InputNode.prototype),s.prototype.constructor=s,s.prototype.nodeType="CubeTexture",s.prototype.getTexture=function(t,o){return e.InputNode.prototype.generate.call(this,t,o,this.value.uuid,"tc")},s.prototype.generate=function(e,t){if("samplerCube"===t)return this.getTexture(e,t);var s,i=this.getTexture(e,t),u=this.uv.build(e,"v3"),c=this.bias?this.bias.build(e,"f"):void 0;void 0===c&&e.context.bias&&(c=e.context.bias.setTexture(this).build(e,"f")),s=c?"texCubeBias( "+i+", "+u+", "+c+" )":"texCube( "+i+", "+u+" )";var a={include:e.isShader("vertex"),ignoreCache:!0},p=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace||new o.ColorSpaceNode(new r.ExpressionNode("",p)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,p),e.removeContext(),e.format(s,p,t)},s.prototype.copy=function(t){return e.InputNode.prototype.copy.call(this,t),t.value&&(this.value=t.value),this.uv=t.uv,t.bias&&(this.bias=t.bias),this},s.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.uuid,t.uv=this.uv.toJSON(e).uuid,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},exports.CubeTextureNode=s;
