"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./TempNode.cjs.js");require("three"),require("./Node.cjs.js");var t=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i;function s(t,r){e.TempNode.call(this),this.parse(t||s.PI,r)}s.PI="PI",s.PI2="PI2",s.RECIPROCAL_PI="RECIPROCAL_PI",s.RECIPROCAL_PI2="RECIPROCAL_PI2",s.LOG2="LOG2",s.EPSILON="EPSILON",s.prototype=Object.create(e.TempNode.prototype),s.prototype.constructor=s,s.prototype.nodeType="Const",s.prototype.getType=function(e){return e.getTypeByFormat(this.type)},s.prototype.parse=function(e,s){this.src=e||"";var r,o,i="",p=this.src.match(t);this.useDefine=s||"#"===this.src.charAt(0),p&&p.length>1?(o=p[1],r=p[2],i=p[3]):(r=this.src,o="f"),this.name=r,this.type=o,this.value=i},s.prototype.build=function(e,t){return"source"!==t?(e.include(this),e.format(this.name,this.getType(e),t)):this.value?this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";":this.useDefine?this.src:void 0},s.prototype.generate=function(e,t){return e.format(this.name,this.getType(e),t)},s.prototype.copy=function(t){return e.TempNode.prototype.copy.call(this,t),this.parse(t.src,t.useDefine),this},s.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src,!0===t.useDefine&&(t.useDefine=!0)),t},exports.ConstNode=s;
