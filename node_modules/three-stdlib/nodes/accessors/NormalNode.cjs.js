"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/TempNode.cjs.js"),r=require("../core/NodeLib.cjs.js");function o(r){e.TempNode.call(this,"v3"),this.scope=r||o.VIEW}require("three"),require("../core/Node.cjs.js"),o.LOCAL="local",o.WORLD="world",o.VIEW="view",o.prototype=Object.create(e.TempNode.prototype),o.prototype.constructor=o,o.prototype.nodeType="Normal",o.prototype.getShared=function(){return this.scope===o.WORLD},o.prototype.build=function(r,o,t,i){var s=r.context[this.scope+"Normal"];return s?s.build(r,o,t,i):e.TempNode.prototype.build.call(this,r,o,t)},o.prototype.generate=function(e,r){var t;switch(this.scope){case o.VIEW:t=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case o.LOCAL:e.isShader("vertex")?t="objectNormal":(e.requires.normal=!0,t="vObjectNormal");break;case o.WORLD:e.isShader("vertex")?t="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,t="vWNormal")}return e.format(t,this.getType(e),r)},o.prototype.copy=function(r){return e.TempNode.prototype.copy.call(this,r),this.scope=r.scope,this},o.prototype.toJSON=function(e){var r=this.getJSONNode(e);return r||((r=this.createJSONNode(e)).scope=this.scope),r},r.NodeLib.addKeyword("viewNormal",(function(){return new o(o.VIEW)})),r.NodeLib.addKeyword("localNormal",(function(){return new o(o.NORMAL)})),r.NodeLib.addKeyword("worldNormal",(function(){return new o(o.WORLD)})),exports.NormalNode=o;
