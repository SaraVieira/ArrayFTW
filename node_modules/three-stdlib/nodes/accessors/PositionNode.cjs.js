"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/TempNode.cjs.js"),o=require("../core/NodeLib.cjs.js");function t(o){e.TempNode.call(this,"v3"),this.scope=o||t.LOCAL}require("three"),require("../core/Node.cjs.js"),t.LOCAL="local",t.WORLD="world",t.VIEW="view",t.PROJECTION="projection",t.prototype=Object.create(e.TempNode.prototype),t.prototype.constructor=t,t.prototype.nodeType="Position",t.prototype.getType=function(){switch(this.scope){case t.PROJECTION:return"v4"}return this.type},t.prototype.getShared=function(){switch(this.scope){case t.LOCAL:case t.WORLD:return!1}return!0},t.prototype.generate=function(e,o){var r;switch(this.scope){case t.LOCAL:e.isShader("vertex")?r="transformed":(e.requires.position=!0,r="vPosition");break;case t.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,r="vWPosition";break;case t.VIEW:r=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case t.PROJECTION:r=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(r,this.getType(e),o)},t.prototype.copy=function(o){return e.TempNode.prototype.copy.call(this,o),this.scope=o.scope,this},t.prototype.toJSON=function(e){var o=this.getJSONNode(e);return o||((o=this.createJSONNode(e)).scope=this.scope),o},o.NodeLib.addKeyword("position",(function(){return new t})),o.NodeLib.addKeyword("worldPosition",(function(){return new t(t.WORLD)})),o.NodeLib.addKeyword("viewPosition",(function(){return new t(t.VIEW)})),exports.PositionNode=t;
