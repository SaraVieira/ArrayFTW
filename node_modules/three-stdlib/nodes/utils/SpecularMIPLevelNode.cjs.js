"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../core/TempNode.cjs.js"),t=require("../core/FunctionNode.cjs.js"),r=require("./MaxMIPLevelNode.cjs.js");function o(t,r){e.TempNode.call(this,"f"),this.roughness=t,this.texture=r,this.maxMIPLevel=void 0}require("three"),require("../core/Node.cjs.js"),require("../core/NodeLib.cjs.js"),require("../inputs/FloatNode.cjs.js"),require("../core/InputNode.cjs.js"),o.Nodes={getSpecularMIPLevel:new t.FunctionNode(["float getSpecularMIPLevel( const in float roughness, const in float maxMIPLevelScalar ) {","\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );","\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );","\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );","}"].join("\n"))},o.prototype=Object.create(e.TempNode.prototype),o.prototype.constructor=o,o.prototype.nodeType="SpecularMIPLevel",o.prototype.setTexture=function(e){return this.texture=e,this},o.prototype.generate=function(e,t){if(e.isShader("fragment")){this.maxMIPLevel=this.maxMIPLevel||new r.MaxMIPLevelNode,this.maxMIPLevel.texture=this.texture;var s=e.include(o.Nodes.getSpecularMIPLevel);return e.format(s+"( "+this.roughness.build(e,"f")+", "+this.maxMIPLevel.build(e,"f")+" )",this.type,t)}return console.warn("THREE.SpecularMIPLevelNode is not compatible with "+e.shader+" shader."),e.format("0.0",this.type,t)},o.prototype.copy=function(t){return e.TempNode.prototype.copy.call(this,t),this.texture=t.texture,this.roughness=t.roughness,this},o.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture,t.roughness=this.roughness),t},exports.SpecularMIPLevelNode=o;
