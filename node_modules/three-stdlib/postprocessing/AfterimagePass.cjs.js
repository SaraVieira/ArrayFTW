"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/assertThisInitialized"),r=require("@babel/runtime/helpers/inheritsLoose"),t=require("@babel/runtime/helpers/defineProperty"),a=require("three"),i=require("./Pass.cjs.js"),s=require("../shaders/AfterimageShader.cjs.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("@babel/runtime/helpers/createClass");var u=d(e),n=d(r),l=d(t),o=function(e){function r(r,t){var d;void 0===r&&(r=.96),void 0===t&&(t=s.AfterimageShader),d=e.call(this)||this,l.default(u.default(d),"shader",void 0),l.default(u.default(d),"uniforms",void 0),l.default(u.default(d),"textureComp",void 0),l.default(u.default(d),"textureOld",void 0),l.default(u.default(d),"shaderMaterial",void 0),l.default(u.default(d),"compFsQuad",void 0),l.default(u.default(d),"copyFsQuad",void 0),d.shader=t,d.uniforms=a.UniformsUtils.clone(t.uniforms),d.uniforms.damp.value=r,d.textureComp=new a.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:a.LinearFilter,magFilter:a.NearestFilter,format:a.RGBAFormat}),d.textureOld=new a.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:a.LinearFilter,magFilter:a.NearestFilter,format:a.RGBAFormat}),d.shaderMaterial=new a.ShaderMaterial({uniforms:d.uniforms,vertexShader:d.shader.vertexShader,fragmentShader:d.shader.fragmentShader}),d.compFsQuad=new i.FullScreenQuad(d.shaderMaterial);var n=new a.MeshBasicMaterial;return d.copyFsQuad=new i.FullScreenQuad(n),d}n.default(r,e);var t=r.prototype;return t.render=function(e,r,t){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=t.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(),this.copyFsQuad.render(e));var a=this.textureOld;this.textureOld=this.textureComp,this.textureComp=a},t.setSize=function(e,r){this.textureComp.setSize(e,r),this.textureOld.setSize(e,r)},r}(i.Pass);exports.AfterimagePass=o;
