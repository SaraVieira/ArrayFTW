"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/assertThisInitialized"),t=require("@babel/runtime/helpers/inheritsLoose"),o=require("@babel/runtime/helpers/defineProperty"),n=require("three");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=r(e),l=r(t),u=r(o),c=function(e){function t(t,o){var r;return r=e.call(this)||this,u.default(a.default(r),"camera",void 0),u.default(a.default(r),"domElement",void 0),u.default(a.default(r),"isLocked",!1),u.default(a.default(r),"minPolarAngle",0),u.default(a.default(r),"maxPolarAngle",Math.PI),u.default(a.default(r),"changeEvent",{type:"change"}),u.default(a.default(r),"lockEvent",{type:"lock"}),u.default(a.default(r),"unlockEvent",{type:"unlock"}),u.default(a.default(r),"euler",new n.Euler(0,0,0,"YXZ")),u.default(a.default(r),"PI_2",Math.PI/2),u.default(a.default(r),"vec",new n.Vector3),u.default(a.default(r),"onMouseMove",(function(e){if(!1!==r.isLocked){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,o=e.movementY||e.mozMovementY||e.webkitMovementY||0;r.euler.setFromQuaternion(r.camera.quaternion),r.euler.y-=.002*t,r.euler.x-=.002*o,r.euler.x=Math.max(r.PI_2-r.maxPolarAngle,Math.min(r.PI_2-r.minPolarAngle,r.euler.x)),r.camera.quaternion.setFromEuler(r.euler),r.dispatchEvent(r.changeEvent)}})),u.default(a.default(r),"onPointerlockChange",(function(){r.domElement.ownerDocument.pointerLockElement===r.domElement?(r.dispatchEvent(r.lockEvent),r.isLocked=!0):(r.dispatchEvent(r.unlockEvent),r.isLocked=!1)})),u.default(a.default(r),"onPointerlockError",(function(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")})),u.default(a.default(r),"connect",(function(){r.domElement.ownerDocument.addEventListener("mousemove",r.onMouseMove),r.domElement.ownerDocument.addEventListener("pointerlockchange",r.onPointerlockChange),r.domElement.ownerDocument.addEventListener("pointerlockerror",r.onPointerlockError)})),u.default(a.default(r),"disconnect",(function(){r.domElement.ownerDocument.removeEventListener("mousemove",r.onMouseMove),r.domElement.ownerDocument.removeEventListener("pointerlockchange",r.onPointerlockChange),r.domElement.ownerDocument.removeEventListener("pointerlockerror",r.onPointerlockError)})),u.default(a.default(r),"dispose",(function(){r.disconnect()})),u.default(a.default(r),"getObject",(function(){return r.camera})),u.default(a.default(r),"direction",new n.Vector3(0,0,-1)),u.default(a.default(r),"getDirection",(function(e){return e.copy(r.direction).applyQuaternion(r.camera.quaternion)})),u.default(a.default(r),"moveForward",(function(e){r.vec.setFromMatrixColumn(r.camera.matrix,0),r.vec.crossVectors(r.camera.up,r.vec),r.camera.position.addScaledVector(r.vec,e)})),u.default(a.default(r),"moveRight",(function(e){r.vec.setFromMatrixColumn(r.camera.matrix,0),r.camera.position.addScaledVector(r.vec,e)})),u.default(a.default(r),"lock",(function(){r.domElement.requestPointerLock()})),u.default(a.default(r),"unlock",(function(){r.domElement.ownerDocument.exitPointerLock()})),void 0===o&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),o=document.body),r.domElement=o,r.camera=t,r.connect(),r}return l.default(t,e),t}(n.EventDispatcher);exports.PointerLockControls=c;
