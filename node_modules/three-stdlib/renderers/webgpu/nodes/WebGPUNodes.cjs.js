"use strict";var e=require("./WebGPUNodeBuilder.cjs.js"),r=require("../../nodes/core/NodeFrame.cjs.js");function s(e,r){var s;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(s=function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return o(e,r)}(e))||r&&e&&"number"==typeof e.length){s&&(e=s);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(s=e[Symbol.iterator]()).next.bind(s)}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var s=0,o=new Array(r);s<r;s++)o[s]=e[s];return o}require("@babel/runtime/helpers/inheritsLoose"),require("./WebGPUNodeUniformsGroup.cjs.js"),require("../WebGPUUniformsGroup.cjs.js"),require("@babel/runtime/helpers/assertThisInitialized"),require("../WebGPUBinding.cjs.js"),require("../constants.cjs.js"),require("./WebGPUNodeUniform.cjs.js"),require("../WebGPUUniform.cjs.js"),require("three"),require("../WebGPUSampler.cjs.js"),require("../WebGPUSampledTexture.cjs.js"),require("../../nodes/core/NodeSlot.cjs.js"),require("../../nodes/core/NodeBuilder.cjs.js"),require("../../nodes/core/NodeUniform.cjs.js"),require("@babel/runtime/helpers/createClass"),require("../../nodes/core/NodeAttribute.cjs.js"),require("../../nodes/core/NodeVary.cjs.js"),require("../../nodes/core/constants.cjs.js"),require("../../nodes/accessors/ModelViewProjectionNode.cjs.js"),require("../../nodes/core/Node.cjs.js"),require("../../nodes/accessors/CameraNode.cjs.js"),require("@babel/runtime/helpers/defineProperty"),require("../../nodes/inputs/Vector3Node.cjs.js"),require("../../nodes/core/InputNode.cjs.js"),require("../../nodes/inputs/Matrix4Node.cjs.js"),require("../../nodes/accessors/ModelNode.cjs.js"),require("../../nodes/inputs/Matrix3Node.cjs.js"),require("../../nodes/math/OperatorNode.cjs.js"),require("../../nodes/accessors/PositionNode.cjs.js"),require("../../nodes/core/AttributeNode.cjs.js"),require("./ShaderLib.cjs.js");var t=function(){function o(e){this.renderer=e,this.nodeFrame=new r,this.builders=new WeakMap}var t=o.prototype;return t.get=function(r){var s=this.builders.get(r);return void 0===s&&(s=new e(r,this.renderer).build(),this.builders.set(r,s)),s},t.remove=function(e){this.builders.delete(e)},t.updateFrame=function(){this.nodeFrame.update()},t.update=function(e,r){var o=e.material,t=this.get(o),i=this.nodeFrame;i.material=o,i.camera=r,i.object=e;for(var n,u=s(t.updateNodes);!(n=u()).done;){var a=n.value;i.updateNode(a)}},t.dispose=function(){this.builders=new WeakMap},o}();module.exports=t;
