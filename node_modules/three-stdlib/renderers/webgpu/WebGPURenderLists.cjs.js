"use strict";function r(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function e(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}var t=function(){function t(){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparent=[]}var n=t.prototype;return n.init=function(){this.renderItemsIndex=0,this.opaque.length=0,this.transparent.length=0},n.getNextRenderItem=function(r,e,t,n,i,d){var s=this.renderItems[this.renderItemsIndex];return void 0===s?(s={id:r.id,object:r,geometry:e,material:t,groupOrder:n,renderOrder:r.renderOrder,z:i,group:d},this.renderItems[this.renderItemsIndex]=s):(s.id=r.id,s.object=r,s.geometry=e,s.material=t,s.groupOrder=n,s.renderOrder=r.renderOrder,s.z=i,s.group=d),this.renderItemsIndex++,s},n.push=function(r,e,t,n,i,d){var s=this.getNextRenderItem(r,e,t,n,i,d);(!0===t.transparent?this.transparent:this.opaque).push(s)},n.unshift=function(r,e,t,n,i,d){var s=this.getNextRenderItem(r,e,t,n,i,d);(!0===t.transparent?this.transparent:this.opaque).unshift(s)},n.sort=function(t,n){this.opaque.length>1&&this.opaque.sort(t||r),this.transparent.length>1&&this.transparent.sort(n||e)},n.finish=function(){for(var r=this.renderItemsIndex,e=this.renderItems.length;r<e;r++){var t=this.renderItems[r];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.program=null,t.group=null}},t}(),n=function(){function r(){this.lists=new WeakMap}var e=r.prototype;return e.get=function(r,e){var n,i=this.lists,d=i.get(r);return void 0===d?(n=new t,i.set(r,new WeakMap),i.get(r).set(e,n)):void 0===(n=d.get(e))&&(n=new t,d.set(e,n)),n},e.dispose=function(){this.lists=new WeakMap},r}();module.exports=n;
