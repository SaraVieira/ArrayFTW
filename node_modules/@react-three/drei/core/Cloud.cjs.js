"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("blob-polyfill"),require("../helpers/base64.cjs.js");var e=require("../assets/cloud.base64.cjs.js"),r=require("react"),t=require("@react-three/fiber");require("@babel/runtime/helpers/extends");var a=require("@babel/runtime/helpers/objectWithoutPropertiesLoose");require("./shapes.cjs.js"),require("react-merge-refs");var i=require("./Billboard.cjs.js");require("three");var o=require("./useTexture.cjs.js");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=s(a);exports.Cloud=function(a){var s=a.opacity,u=void 0===s?.5:s,c=a.speed,l=void 0===c?.4:c,d=a.width,h=void 0===d?10:d,p=a.length,m=void 0===p?1.5:p,f=a.segments,v=void 0===f?20:f,b=a.dir,j=void 0===b?1:b,M=n.default(a,["opacity","speed","width","length","segments","dir"]),q=r.useRef(),y=o.useTexture(e),x=r.useMemo((function(){return[].concat(new Array(v)).map((function(e,r){return{x:h/2-Math.random()*h,y:h/2-Math.random()*h,scale:.4+Math.sin((r+1)/v*Math.PI)*(10*(.2+Math.random())),density:Math.max(.2,Math.random()),rotation:Math.max(.002,.005*Math.random())*l}}))}),[h,v,l]);return t.useFrame((function(e){var r;return null==(r=q.current)?void 0:r.children.forEach((function(r,t){r.rotation.z+=x[t].rotation*j,r.scale.setScalar(x[t].scale+(1+Math.sin(e.clock.getElapsedTime()/10))/2*t/10)}))})),r.createElement("group",M,r.createElement("group",{position:[0,0,v/2*m],ref:q},x.map((function(e,t){var a=e.x,o=e.y,s=e.scale,n=e.density;return r.createElement(i.Billboard,{key:t,scale:[s,s,s],position:[a,o,-t*m],lockZ:!0},r.createElement("meshStandardMaterial",{map:y,transparent:!0,opacity:s/6*n*u,depthTest:!1}))}))))};
