"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("@react-three/fiber"),n=require("three-stdlib"),t=require("three"),o=require("use-asset"),u=require("../helpers/environment-assets.cjs.js");exports.Environment=function(s){var i=s.background,a=void 0!==i&&i,c=s.files,d=void 0===c?["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]:c,f=s.path,p=void 0===f?"/":f,b=s.preset,v=void 0===b?void 0:b,g=s.scene;if(v){if(!(v in u.presetsObj))throw new Error("Preset must be one of: "+Object.keys(u.presetsObj).join(", "));d=u.presetsObj[v],p="https://rawcdn.githack.com/mattrossman/drei-assets/b597559ff62f85ec691df28cbea5ecb1263a2085/hdri/"}var m=r.useThree((function(e){return e.scene})),h=r.useThree((function(e){return e.gl})),l=Array.isArray(d),k=l?t.CubeTextureLoader:n.RGBELoader,j=r.useLoader(k,l?[d]:d,(function(e){return e.setPath(p)})),q=l?j[0]:j,x=o.useAsset((function(){return new Promise((function(e){var r=new t.PMREMGenerator(h),n=function(e,r,n){return n?(r.compileEquirectangularShader(),r.fromCubemap(e).texture):r.fromEquirectangular(e).texture}(q,r,l);r.dispose(),q.dispose(),e(n)}))}),q);return e.useLayoutEffect((function(){var e=g?g.background:m.background,r=g?g.environment:m.environment;return g?(g.environment=x,a&&(g.background=x)):(m.environment=x,a&&(m.background=x)),function(){g?(g.environment=r,g.background=e):(m.environment=r,m.background=e)}}),[x,a,g]),null};
