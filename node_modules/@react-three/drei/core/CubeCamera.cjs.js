"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("@react-three/fiber"),t=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),n=require("three");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=u(t);exports.CubeCamera=function(t){var u=t.children,o=t.fog,a=t.frames,f=void 0===a?1/0:a,c=t.resolution,s=void 0===c?256:c,l=t.near,d=void 0===l?1:l,m=t.far,g=void 0===m?1e3:m,v=i.default(t,["children","fog","frames","resolution","near","far"]),b=e.useRef(),p=e.useState(),h=p[0],F=p[1],q=r.useThree((function(e){return e.scene})),C=r.useThree((function(e){return e.gl})),E=e.useMemo((function(){return new n.WebGLCubeRenderTarget(s,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBFormat,encoding:C.outputEncoding})}),[s]),L=0;return r.useFrame((function(){if(h&&b.current&&(f===1/0||L<f)){b.current.traverse((function(e){return e.visible=!1}));var e=q.fog;q.fog=null!=o?o:e,h.update(C,q),q.fog=e,b.current.traverse((function(e){return e.visible=!0})),L++}})),e.createElement("group",v,e.createElement("cubeCamera",{ref:F,args:[d,g,E]}),e.createElement("group",{ref:b},u(E.texture)))};
